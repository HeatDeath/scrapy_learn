{"title": "Facebook 这类网站如何处理数十亿请求并保持高可用性的？", "url": "http://blog.jobbole.com/111996/", "create_date": "2017/07/25", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/03/912be8d20ca700194c3aced111cc833d1.jpg"], "fav_count": 6, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">孙腾浩</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://blog.vivekpanyam.com/scaling-a-web-service-load-balancing/\">Vivek Panyam</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>Facebook 这类网站如何处理数十亿请求并保持高可用性呢，答案是负载均衡，本文将对其一探究竟。</p>\n<h3>什么是负载均衡</h3>\n<p>负载均衡是许多协同工作资源（通常是计算机）的分配策略。它们通常用于提高容量和可靠性。</p>\n<p>为了便于讨论负载均衡，对于服务扩展我假设以下两点：</p>\n<ul>\n<li>我可以运行任意数量实例</li>\n<li>任何请求可以到达任意实例</li>\n</ul>\n<p>第一个假设表明服务是无状态的（或者像 Redis 集群一样可以共享状态）。第二个假设实际中并不是必须的（比如粘性负载均衡），但在这片文章中做这样的假设便于讨论。</p>\n<p>下面是我将要讨论的负载均衡技术：</p>\n<ol>\n<li>应用层（OSI 第七层）负载均衡（HTTP、HTTPS、WS）</li>\n<li>传输层（OSI 第四层）负载均衡（TCP、UDP）</li>\n<li>网络层（OSI 第三层）负载均衡</li>\n<li>DNS 负载均衡</li>\n<li>多个子域手动负载均衡</li>\n<li>任播（Anycast）</li>\n</ol>\n<p>最后还有一些其他知识点：</p>\n<ul>\n<li>延迟和吞吐量</li>\n<li>服务器直接返回</li>\n</ul>\n<p>这些技术大致按照「网站流量增大时需要的操作步骤」排序。比如，应用层的负载均衡是首先要做的事（远远早于任播）。前三条技术提高吞吐量和可用性，但存在单点故障。其余的三条技术在提高吞吐量的同时避免了单点故障。</p>\n<p>为了帮助我们理解负载均衡，我们来看一个简单的服务扩展。</p>\n<p>注意：每种扩展技术都采用了非技术的比喻（在商店购物）。这些比喻仅仅是描述技术背后的思想，并不完全准确。</p>\n<h3>服务</h3>\n<p>我们假设我们正在构建大规模的服务。就像下图所示：</p>\n<p><img class=\"aligncenter\" src=\"https://blog.vivekpanyam.com/content/images/2016/02/Service-1.png\" alt=\"\"></p>\n<p>这个系统并不能处理大量通信，并且如果它宕机，整个应用就停了。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你走向商店唯一一条结账的队伍。</li>\n<li>你购买你的商品，如果那里没有收银员，你无法完成购买。</li>\n</ul>\n<h3>应用层（OSI 第七层）负载均衡</h3>\n<p>为了承载更大的通信量，首先用到的就是应用层负载均衡。应用层是 OSI 第七层。它包括 HTTP、HTTPS 和 WebSockets。一款非常流行又久经考验的应用层负载均衡器就是 Nginx。让我们看看它如何帮助我们扩展服务：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/L7LB.png\" alt=\"\"></p>\n<p>请注意，通过这种技术，我们能负载均衡数十或上百服务器实例。上面图片只展示两个作为例子。</p>\n<h4>比喻</h4>\n<ul>\n<li>商店员工引领你到一个特别的（有收银员的）结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h4>工具：</h4>\n<ul>\n<li>Nginx</li>\n<li>HAProxy</li>\n</ul>\n<h4>注意：</h4>\n<ul>\n<li>我们要在这里停止使用 SSL（分发时不用 SSL)</li>\n</ul>\n<h3>传输层（OSI 第四层）负载均衡（TCP、UDP）</h3>\n<p>上一条技术帮助我们承载大量通信，但如果我们需要承载更大的通信量，传输层负载均衡非常有用。传输层是 OSI 第四层，包括 TCP 和 UDP。流行的传输层负载均衡器有 HAProxy（这个也用于应用层负载均衡）和 IPVS。让我们看看它们如何帮助我们扩展服务：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/L4LB.png\" alt=\"\"></p>\n<p>应用层负载均衡+传输层负载均衡能处理大多数情况下的通信量。然而我们我们仍要担心可用性。单点故障有可能出现在传输层的负载均衡器。我们在下面一节的 DNS 负载均衡解决这个问题。</p>\n<h4>比喻：</h4>\n<ul>\n<li>根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h4>工具：</h4>\n<ul>\n<li>HAProxy</li>\n<li>IPVS</li>\n</ul>\n<h3>网络层（OSI 第三层）负载均衡</h3>\n<p>如果我们要继续扩展，我们需要增加网络层负载均衡。这比上面两条技术更复杂。网络层是 OSI 第三层，包括 IPv4 和 IPv6。下面是网络层负载均衡：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/L3LB.png\" alt=\"\"></p>\n<p>为了搞清楚它如何工作，我们需要一点等价路由的知识（ECMP）。当有多条等价链路到达相同地址时，我们使用等价路由。简单来说，它允许路由器或交换机通过不同链接发送数据包（支持高吞吐量），最终到达同一地址。</p>\n<p>我们可以利用这一点来实现网络层负载均衡，因为在我们看来，每个传输层负载均衡器是相同的。这意味着我们可以把从网络层负载均衡器到传输层负载均衡器的链接看做相同目的地的链路。如果我们把所有负载均衡器绑定到相同 IP 地址，我们可以使用等价路由在传输层负载均衡器之间分配通信。</p>\n<h4>比喻：</h4>\n<ul>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h4>工具：</h4>\n<ul>\n<li>通常在机柜里交换机内部的硬件中处理。</li>\n</ul>\n<h4>太长不阅：</h4>\n<ul>\n<li>除非你的服务规模相当大或有自己的硬件，否则你不需要它。</li>\n</ul>\n<h3>DNS 负载均衡</h3>\n<p>DNS 是将名称转换为 IP 地址的系统。举个例子，它可以把 example.com 转换为 93.184.216.34 。它当然也可以返回多个 IP 地址，像下面这样：</p>\n<p><img class=\"aligncenter\" src=\"https://blog.vivekpanyam.com/content/images/2016/02/Screen-Shot-2016-02-04-at-3-25-32-AM.png\" alt=\"\"></p>\n<p>如果返回了多个 IP，客户端通常会使用第一个可用的地址（然而一些应用只看第一个返回的 IP）。</p>\n<p>目前有很多 DNS 负载均衡技术，比如 GeoDNS 和轮询调度（round-robin）。GeoDNS 基于不同请求者而返回不同响应。这让我们可以将客户端路由到其最近的服务器或数据中心。轮询调度会循环所有可用的 IP 地址，对于每个响应会返回不同的 IP。如果多个 IP 可用，这两种技术仅仅改变响应里的 IP 顺序。</p>\n<p>下图展示 DNS 负载均衡如何工作：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/DNS.png\" alt=\"\"></p>\n<p>在这个例子中，不同的用户被路由到不同的服务集群（随机或基于地理位置）。</p>\n<p>现在这里不再有单点故障的可能性（假设有多台 DNS 服务器）。为了进一步提高可靠性，我们可以在不同数据中心运行多个服务集群。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你在网上查询购物中心，返回的列表把最近的购物中心放在第一个。你查看通往每个购物中心的路，然后选择列表中第一个营业的购物中心。</li>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h3>手动负载均衡和路由</h3>\n<p>如果你的内容在许多数据中心或服务间共享，而我们需要路由到其中特定的一个，那么这条技术就很有用了。比如 <code>cat.jpg</code> 储存在伦敦的集群中，但其他集群中没有。相似的，<code>dog.jpg</code> 储存在纽约的集群中，其他数据中心或集群中没有。举个例子，这很可能发生在内容刚刚上传，还未在数据中心之间复制的时候。</p>\n<p>然而，用户获取内容时不应该等待复制完成。这意味着我们的应用需要临时把所有 <code>cat.jpg</code> 请求发送到伦敦，所有 <code>dog.jpg</code> 请求发送到纽约。所以我们需要用 <code>https://lon-1e.static.example.net/cat.jpg</code> 代替 <code>https://cdn.example.net/cat.jpg</code>。对 <code>dog.jpg</code> 来说也一样。</p>\n<p>为了实现这一点，我们需要为每个数据中心设置子域（最好细分到每个集群每台机器）。除了上面的 DNS 负载均衡，这一点也很有必要。</p>\n<p>注意：我们的应用需要保持追踪内容的位置，以便重写请求。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你拨打公司电话询问哪个购物中心提供猫粮。</li>\n<li>你查看列表上的购物中心路线，然后选择第一个营业的。</li>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h3>任播（Anycast）</h3>\n<p>这篇文章讨论的最后一种技术就是任播。首先来看一点背景知识：</p>\n<p>大多数网路使用单播。这本质上意味着每台计算机拥有独一无二的 IP 地址。有另一种称为任播的理论。通过任播，一些机器可以使用相同的 IP 地址和路由，并把请求发送到最近的一台机器。我们可以把这种技术和上面所讲的技术结合起来，构建出高可靠性和可用性，能承载巨大通信量的系统。</p>\n<p>任播根本上来说是允许互联网为我们处理部分负载均衡。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你告诉别人你打算去商店，他们把你带到最近的位置。</li>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h3>杂项</h3>\n<h4>延迟和吞吐量</h4>\n<p>顺便一提的是，这些技术也可以提升低延迟服务的吞吐量。增加服务数量而不是让每个服务处理更多的通信。这样我们就可以得到低延迟、高吞吐量的系统。</p>\n<h4>服务器直接返回</h4>\n<p>在传统负载均衡系统中，请求穿过负载均衡的所有层级，响应也同样穿过它们。降低负载均衡通信量的一个优化点就是服务器直接返回。这意味着服务端的响应不通过负载均衡。如果服务端的响应十分巨大，这点尤其有用。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111996\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111996votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111996\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">孙腾浩</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "2e20cef128b8ada5093512d12980db03", "front_image_path": "full/bbd3c66a3badc127bce3c714ce00a0e73265cc91.jpg"}
{"title": "MySQL 高性能表设计规范", "url": "http://blog.jobbole.com/112035/", "create_date": "2017/07/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/dea4002e77dd3ecd398568bf746ea46c.png"], "fav_count": 5, "comment_count": 2, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.jianshu.com/p/f797bbe11d76\">高广超</a>   </div><div>\n<div>\n<p>良好的逻辑设计和物理设计是高性能的基石， 应该根据系统将要执行的查询语句来设计schema, 这往往需要权衡各种因素。</p>\n<h2>一、选择优化的数据类型</h2>\n<p>MySQL支持的数据类型非常多， 选择正确的数据类型对于获得高性能至关重要。</p>\n<h4>更小的通常更好</h4>\n<p>更小的数据类型通常更快， 因为它们占用更少的磁盘、 内存和CPU缓存， 并且处理时需要的CPU周期也更少。</p>\n<h4>简单就好</h4>\n<p>简单数据类型的操作通常需要更少的CPU周期。 例如， 整型比字符操作代价更低， 因为字符集和校对规则（排序规则 ）使字符比较比整型比较更复杂。</p>\n<h4>尽量避免NULL</h4>\n<p>如果查询中包含可为NULL 的列， 对MySQL来说更难优化， 因为可为NULL 的列使得索引、 索引统计和值比较都更复杂。 可为NULL的列会使用更多的存储空间， 在MySQL里也需要特殊处理。 当可为NULL的列被索引时， 每个索引记录需要一个额外的字节， 在MyISAM里甚至还可能导致固定大小的索引（例如只有一个整数列的索引）变成可变大小的索引。<br>\n当然也有例外， 例如InnoDB 使用单独的位 (bit) 存储NULL值， 所以对于稀疏数据有很好的空间效率。</p>\n<h3>1.整数类型</h3>\n<p>有两种类型的数字：整数 (whole number) 和实数 (real number) 。 如果存储整数， 可以使用这几种整数类型：TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT。分别使用8,16, 24, 32, 64位存储空间。</p>\n<p>整数类型有可选的 **UNSIGNED ** 属性，表示不允许负值，这大致可以使正数的上限提高一倍。 例如 TINYINT. UNSIGNED 可以存储的范围是 0 – 255, 而 TINYINT 的存储范围是 -128 -127 。</p>\n<p><strong>有符号和无符号类型使用相同的存储空间，并具有相同的性能</strong> ， 因此可以根据实际情况选择合适的类型。</p>\n<p>你的选择决定 MySQL 是怎么在内存和磁盘中保存数据的。 然而， 整数计算一般使用64 位的 BIGINT 整数， 即使在 32 位环境也是如此。（ 一些聚合函数是例外， 它们使用DECIMAL 或 DOUBLE 进行计算）。</p>\n<p>MySQL 可以为整数类型指定宽度， 例如 INT(11), 对大多数应用这是没有意义的：它不会限制值的合法范围，只是规定了MySQL 的一些交互工具（例如 MySQL 命令行客户端）用来显示字符的个数。 对于存储和计算来说， INT(1) 和 INT(20) 是相同的。</p>\n<h3>2.实数类型</h3>\n<p>实数是带有小数部分的数字。 然而， 它们不只是为了存储小数部分，也可以使用DECIMAL 存储比 BIGINT 还大的整数。</p>\n<p>FLOAT和DOUBLE类型支持使用标准的浮点运算进行近似计算。<br>\nDECIMAL类型用于存储精确的小数。<br>\n浮点和DECIMAL类型都可以指定精度。 对于DECIMAL列， 可以指定小数点前后所允许的最大位数。这会影响列的空间消耗。</p>\n<p>有多种方法可以指定浮点列所需要的精度， 这会使得MySQL选择不同的数据类型，或者在存储时对值进行取舍。 这些精度定义是非标准的，<strong>所以我们建议只指定数据类型，不指定精度。</strong></p>\n<p><strong>浮点类型在存储同样范围的值时， 通常比DECIMAL使用更少的空间。FLOAT使用4个字节存储。DOUBLE占用8个字节，相比FLOAT有更高的精度和更大的范围。和整数类型一样， 能选择的只是存储类型； MySQL使用DOUBLE作为内部浮点计算的类型。</strong></p>\n<p>因为需要额外的空间和计算开销，所以应该尽量只在对小数进行精确计算时才使用DECIMAL。<strong>但在数据最比较大的时候， 可以考虑使用BIGINT代替DECIMAL, 将需要存储的货币单位根据小数的位数乘以相应的倍数即可。</strong></p>\n<h3>3.字符串类型</h3>\n<h4>VARCHAR</h4>\n<p>用于存储可变⻓字符串，长度支持到65535<br>\n需要使用1或2个额外字节记录字符串的长度<br>\n适合：字符串的最大⻓度比平均⻓度⼤很多；更新很少</p>\n<h4>CHAR</h4>\n<p>定⻓，⻓度范围是1~255<br>\n适合：存储很短的字符串，或者所有值接近同一个长度；经常变更</p>\n<h4>慷慨是不明智的</h4>\n<p>使用VARCHAR(5)和VARCHAR(200)存储’hello’的空间开销是一样的。 那么使用更短的列有什么优势吗？</p>\n<p>事实证明有很大的优势。 更长的列会消耗更多的内存， 因为MySQL通常会分配固定大小的内存块来保存内部值。 尤其是使用内存临时表进行排序或操作时会特别糟糕。 在利用磁盘临时表进行排序时也同样糟糕。</p>\n<p>所以最好的策略是只分配真正需要的空间。</p>\n<h3>4.BLOB和TEXT类型</h3>\n<p>BLOB和 TEXT都是为存储很大的数据而设计的字符串数据类型， 分别采用 二进制和字符方式存储 。</p>\n<p>与其他类型不同， MySQL把每个BLOB和TEXT值当作一个独立的对象处理。 存储引擎在存储时通常会做特殊处理。 当BLOB和TEXT值太大时，InnoDB会使用专门的 “外部“存储区域来进行存储， 此时每个值在行内需要1 – 4个字节存储 存储区域存储实际的值。</p>\n<p>BLOB 和 TEXT 之间仅有的不同是 BLOB 类型存储的是二进制数据， 没有排序规则或字符集， 而 TEXT类型有字符集和排序规则</p>\n<h3>5.日期和时间类型</h3>\n<p>大部分时间类型都没有替代品， 因此没有什么是最佳选择的问题。 唯一的问题是保存日期和时间的时候需要做什么。 MySQL提供两种相似的日期类型： DATE TIME和 TIMESTAMP。</p>\n<p>但是目前我们更建议存储时间戳的方式，因此该处不再对 DATE TIME和 TIMESTAMP做过多说明。</p>\n<h3>5.其他类型</h3>\n<h4>5.1选择标识符</h4>\n<p>在可以满足值的范围的需求， 井且预留未来增长空间的前提下， 应该选择最小的数据类型。</p>\n<h5>整数类型</h5>\n<p>整数通常是标识列最好的选择， 因为它们很快并且可以使用AUTO_INCREMENT。</p>\n<h5>ENUM和SET类型</h5>\n<p>对于标识列来说，EMUM和SET类型通常是一个糟糕的选择， 尽管对某些只包含固定状态或者类型的静态 ”定义表” 来说可能是没有问题的。ENUM和SET列适合存储固定信息， 例如有序的状态、 产品类型、 人的性别。</p>\n<h5>字符串类型</h5>\n<p>如果可能， 应该避免使用字符串类型作为标识列， 因为它们很消耗空间， 并且通常比数字类型慢。</p>\n<p>对于完全 “随机” 的字符串也需要多加注意， 例如 MDS() 、 SHAl() 或者 UUID() 产生的字符串。 这些函数生成的新值会任意分布在很大的空间内， 这会导致 INSERT 以及一些SELECT语句变得很慢。如果存储 UUID 值， 则应该移除 “-“符号。</p>\n<h4>5.2特殊类型数据</h4>\n<p>某些类型的数据井不直接与内置类型一致。 低千秒级精度的时间戳就是一个例子，另一个例子是以个1Pv4地址，人们经常使用VARCHAR(15)列来存储IP地址，然而， 它们实际上是32位无符号整数， 不是字符串。用小数点将地址分成四段的表示方法只是为了让人们阅读容易。所以应该用无符号整数存储IP地址。MySQL提供INET_ATON()和INET_NTOA()函数在这两种表示方法之间转换。</p>\n<h2>二、表结构设计</h2>\n<h3>1.范式和反范式</h3>\n<p>对于任何给定的数据通常都有很多种表示方法， 从完全的范式化到完全的反范式化， 以及两者的折中。 在范式化的数据库中， 每个事实数据会出现并且只出现一次。 相反， 在反范式化的数据库中， 信息是冗余的， 可能会存储在多个地方。</p>\n<h4>范式的优点和缺点</h4>\n<p>为性能提升考虑时，经常会被建议对 schema 进行范式化设计，尤其是写密集的场景。</p>\n<ul>\n<li>范式化的更新操作通常比反范式化要快。</li>\n<li>当数据较好地范式化时，就只有很少或者没有重复数据，所以只需要修改更少的数据。</li>\n<li>范式化的表通常更小，可以更好地放在内存里，所以执行操作会更快。</li>\n<li>很少有多余的数据意味着检索列表数据时更少需要 DISTINCT 或者 GROUP BY语句。</li>\n</ul>\n<h4>反范式的优点和缺点</h4>\n<p>不需要关联表，则对大部分查询最差的情况——即使表没有使用索引——是全表扫描。 当数据比内存大时这可能比关联要快得多，因为这样避免了随机I/0。</p>\n<p>单独的表也能使用更有效的索引策略。</p>\n<h4>混用范式化和反范式化</h4>\n<p>在实际应用中经常需要混用，可能使用部分范式化的 schema 、 缓存表，以及其他技巧。<br>\n表适当增加冗余字段，如性能优先，但会增加复杂度。可避免表关联查询。</p>\n<h4>简单熟悉数据库范式</h4>\n</div>\n</div>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59841626b1d4a781274599\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n第一范式(1NF)：字段值具有原子性,不能再分(所有关系型数据库系统都满足第一范式);\r\n 例如：姓名字段,其中姓和名是一个整体,如果区分姓和名那么必须设立两个独立字段;\r\n \r\n第二范式(2NF)：一个表必须有主键,即每行数据都能被唯一的区分;\r\n 备注：必须先满足第一范式;\r\n \r\n第三范式(3NF)：一个表中不能包涵其他相关表中非关键字段的信息,即数据表不能有沉余字段;\r\n 备注：必须先满足第二范式;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59841626b1d4a781274599-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59841626b1d4a781274599-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59841626b1d4a781274599-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59841626b1d4a781274599-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59841626b1d4a781274599-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59841626b1d4a781274599-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59841626b1d4a781274599-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59841626b1d4a781274599-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59841626b1d4a781274599-1\">第一范式<span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1NF</span><span class=\"crayon-sy\">)</span>：字段值具有原子性<span class=\"crayon-sy\">,</span>不能再分<span class=\"crayon-sy\">(</span>所有关系型数据库系统都满足第一范式<span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59841626b1d4a781274599-2\"><span class=\"crayon-h\"> </span>例如：姓名字段<span class=\"crayon-sy\">,</span>其中姓和名是一个整体<span class=\"crayon-sy\">,</span>如果区分姓和名那么必须设立两个独立字段<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59841626b1d4a781274599-3\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59841626b1d4a781274599-4\">第二范式<span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2NF</span><span class=\"crayon-sy\">)</span>：一个表必须有主键<span class=\"crayon-sy\">,</span>即每行数据都能被唯一的区分<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59841626b1d4a781274599-5\"><span class=\"crayon-h\"> </span>备注：必须先满足第一范式<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59841626b1d4a781274599-6\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59841626b1d4a781274599-7\">第三范式<span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3NF</span><span class=\"crayon-sy\">)</span>：一个表中不能包涵其他相关表中非关键字段的信息<span class=\"crayon-sy\">,</span>即数据表不能有沉余字段<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59841626b1d4a781274599-8\"><span class=\"crayon-h\"> </span>备注：必须先满足第二范式<span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p>\n<div>\n<div>\n<h3>2.表字段少⽽精</h3>\n<ul>\n<li>I/O高效</li>\n<li>字段分开维护简单</li>\n<li>单表1G体积 500W⾏行评估</li>\n<li>单⾏行不超过200Byte</li>\n<li>单表不超过50个INT字段</li>\n<li>单表不超过20个CHAR(10)字段</li>\n<li>建议单表字段数控制在20个以内</li>\n<li>拆分TEXT/BLOB，TEXT类型处理性能远低于VARCHAR，强制生成硬盘临时表浪费更多空间。</li>\n</ul>\n<h4>参考资料：</h4>\n<p>高性能mysql第三版</p>\n</div>\n</div>\n<hr>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112035\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112035votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112035\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "42ebcbade0688b35076d01309348c96f", "front_image_path": "full/75f6595b87bc254afe77bc1151f1aea91fb72f4b.jpg"}
{"title": "可能是迄今为止最好的 GitHub 代码浏览插件", "url": "http://blog.jobbole.com/112011/", "create_date": "2017/07/28", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/124.jpg"], "fav_count": 6, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.geeksense.cn/plugin/\">geeksense</a>   </div><p>【伯乐在线转注】：以前曾介绍过一个 Chrome 插件 <a href=\"http://t.cn/RPZJZfD\" target=\"_blank\">Octotree</a>。安装之后，浏览托管在 Github上的项目，可看到左侧的树形结构，更方便查看代码。今天这篇文章介绍另外一个同类插接。</p>\n<hr>\n<p>GitHub是很多开发者远(tong)程(xing)协(jiao)作(you)的重要工具，其社交化编码的理念伴随着开源运动改变着整个开发社区的生态，无数优质项目依托GitHub在全球开源开发者的参与下蓬勃发展。</p>\n<p><strong>不过，讲真，你有在GitHub上好好读过代码吗？</strong></p>\n<p>对于大部分人来说恐怕是没有，GitHub作为一款基于Git的代码管理工具和协同工具是很优秀的，然而作为代码浏览和搜索工具，就和IDE差的很远了。不然为什么到今天GitHub连个侧栏的文件树没有，很多开发者要专门去下载浏览器插件才能有文件树？为什么你还是需要git clone到本地在把代码装到你的IDE里才能愉快的阅读代码？是不是有想过如果能像IDE那样在GitHub上浏览代码多好？</p>\n<p>今天我们就来介绍一款Chrome浏览器插件Insight.io，让你能像在GitHub上像你的IDE里一样浏览和搜索代码，让你的Github就像穿上了钢铁侠的战衣。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhzg5vidjjg20dq094wp8.gif\"></p>\n<h2 id=\"\">功能总览</h2>\n<p><a href=\"https://chrome.google.com/webstore/detail/insightio/pmhfgjjhhomfplgmbalncpcohgeijonh\">下载安装</a>后，打开一个GitHub上的项目，会看到左边有个侧边栏，是不是已经有了自己在IDE里面的感觉了？插件提供以下功能</p>\n<ul>\n<li><strong>跳转到定义</strong></li>\n<li><strong>查找引用</strong></li>\n<li><strong>目录树功能</strong></li>\n<li><strong>基于符号的代码搜索</strong></li>\n</ul>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg5waddog21410osb29.gif\" alt=\"Glance\"></p>\n<p> </p>\n<h2 id=\"\">交叉引用</h2>\n<p>用<a href=\"https://github.com/apache/spark\">Apache Spark</a>做例子，悬浮在某个节点(类，方法，变量等)上就可以看到相应的类型和文档说明。点击左边的结构(Structure)按钮就可以看到改文件的类结构，包括成员变量，成员函数等，点击也可以跳到相应的行。</p>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg5y5wqwg21400ot1l0.gif\" alt=\"Cross Reference\"></p>\n<h2 id=\"\">查找引用</h2>\n<p>点击任何节点的用例就能跳到这个类，方法或者变量定义的地方（类似于IDE中的Ctrl + click）。</p>\n<p>点击类，方法和变量的定义节点，则可以找出所有该节点的使用例子。其中使用例子又会以被引用(Referenced At), 继承 (Inherit), 被继承(Inherited By), 重写(Override)等类型进一步分类方便查找。如果结果太多，用例的右上方也会有支持regular expression的文本框可以用来过滤出感兴趣的文件。</p>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg5zayzeg21650q4kjn.gif\" alt=\"Find References\"></p>\n<h2 id=\"\">目录树</h2>\n<p>点击文件(File)按钮你会看到树状的目录结构，忘记GitHub上切换文件的痛苦吧，文件树让你轻松的在项目之内的文件中自如切换。</p>\n<p>对于私有项目需要点击下方的<strong>Sign In</strong>按钮并到insight.io上导入私有项目文件树才会生效。</p>\n<p><img src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fhzg60wyodg21420othdv.gif\" alt=\"Directory Tree\"></p>\n<h2 id=\"\">代码搜索</h2>\n<p>GitHub只支持纯文本搜索，这时常让搜索代码变得很困难，特别是当你想搜的关键词是常用词的时候，大量的无用结果会让搜索功能完全不可用。而是用Insight.io插件，点击搜索(Search)按钮可以按类名，方法名，变量名，文件名等等搜索代码，并且有自动补全功能。试试在Insight.io和GitHub原生搜索上搜一下RDD.map对比下搜索结果吧？</p>\n<p><img src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhzg62hd81g21660q44qr.gif\" alt=\"Code Search\"></p>\n<h2 id=\"insightio\">跳转到Insight.io</h2>\n<p>你也可以一键点击跳转到Insight.io上获得更好的浏览体验。</p>\n<p><img src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhzg645xmfg21410oru0y.gif\" alt=\"View on insight.io\"></p>\n<h2 id=\"insightio\">提交项目给Insight.io</h2>\n<p>Insight.io目前收录了2000多个最活跃的开源项目，包括<a href=\"https://github.com/apache/kafka\">Apache Kafka</a>, <a href=\"https://github.com/torvalds/linux\">Linux-kernel</a>这样的大型项目，也有像<a href=\"https://github.com/daimajia/AndroidSwipeLayout\">AndroidSwipeLayout</a>这样优质的个人项目。如果你需要的项目并未被我们收录，点击<strong>Information</strong>栏下的<strong>Request Analyze</strong>就可以提交你目前正在浏览的项目了。</p>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg65lh83g213y0oru0x.gif\" alt=\"Request Analyze\"></p>\n<h2 id=\"\">快捷键</h2>\n<p>用快捷键可以快速打开关闭插件功能:</p>\n<ul>\n<li><strong>文件树</strong>: <code>⌘+⇧+f</code></li>\n<li><strong>类结构</strong>: <code>⌘+⇧+o</code></li>\n<li><strong>信息</strong>: <code>⌘+⇧+i</code></li>\n<li><strong>搜索</strong>: <code>⌘+⇧+s</code></li>\n</ul>\n<hr>\n<p><a href=\"https://chrome.google.com/webstore/detail/insightio-for-github/pmhfgjjhhomfplgmbalncpcohgeijonh/\" target=\"_blank\">插件下载传送门</a></p>\n<p>目前插件支持的语言有Java, C/C++, Scala, Python和Ruby。想跟开发团队吐个槽或者点个赞？想知道最好的编程语言PHP什么时候支持？想知道怎么让公司代码库也能用上Insight.io？欢迎邮件到 support@insight.io 。想实时吐槽的也可以加入我们的gitter房间</p>\n<p><a href=\"https://gitter.im/Insight-io/Lobby\"><img title=\"\" src=\"https://badges.gitter.im/Insight-io/Lobby.png\" alt=\"Gitter chat\"></a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112011\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112011votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112011\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "工具与资源", "url_object_id": "5e8243d793df35a9502c06640a79ceee", "front_image_path": "full/4ccab0a38c3c13879135519b200e0c60ce7498bb.jpg"}
{"title": "小王子之程序员版", "url": "http://blog.jobbole.com/111959/", "create_date": "2017/07/26", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/06/3b102356e4b2e8b92940143a3a70bed0.png"], "fav_count": 7, "comment_count": 4, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://ferd.ca/the-little-printf.html\">Fred Hebert</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线提示】：本文较长，Fred Hebert 仿照《小王子》小说，写了一个小程序员在学习软件开发中的各种历险，分了 11 个小故事。正如读者 lei 的评论所言：所有程序员都是文中这些人的缩影。</p>\n<p>补充：《小王子》是法国作家安托万·德·圣·埃克苏佩里于 1942 年写成的著名儿童文学短篇小说。本书的主人公是来自外星球的小王子。书中以一位飞行员作为故事叙述者，讲述了小王子从自己星球出发前往地球的过程中，所经历的各种历险。</p>\n<p> </p>\n<p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b102356e4b2e8b92940143a3a70bed0.png\"><img class=\"aligncenter size-full wp-image-65334\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b102356e4b2e8b92940143a3a70bed0.png\" alt=\"printf-nocover\" width=\"387\" height=\"424\"></a></p>\n<h3>第 0 章</h3>\n<p>我出生在电子游戏和电脑泛滥年代之前。所以我还算幸运，有足够的时间和我哥，还有小伙伴们一起做户外运动，还发明我们自己的游戏。</p>\n<p>我们自己扮演英雄，拿着一根树枝，我们就能瞬间把它想象成弓、剑、枪，甚至是望远镜，当然也可以是任何其他东西。哦，对了，唯一的例外就是你不能把它想象成回旋镖，因为真的回旋镖扔出去是会自己飞回来的，但是树枝扔出去了，你要自己去捡回来。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/f0a415ae533c3befdffdf1b417a054ae.png\"><img class=\"aligncenter size-full wp-image-65343\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/f0a415ae533c3befdffdf1b417a054ae.png\" alt=\"boomerang\" width=\"356\" height=\"230\"></a></p>\n<p>后来我们就长大了，再这么玩就有些尴尬了。要知道，在孩子们开始觉得大人的世界很精彩的阶段，你要是再玩那些把松果想象成魔法手榴弹的游戏，这就很不合群了。迟早你要面对成长的烦恼。不过，能有一个完整的童年还是很幸运。</p>\n<p>后来我就开始学会玩电子游戏了，当然也开始使用电脑。电子游戏的世界可绝对是你梦寐以求的世界，因为它能把你想象中的东西在你面前实现出来。玩游戏很消耗时间，但是它绝对会让你体验到不同的人生。</p>\n<p>不过对于电子游戏来说，有一个特点：那就是你不负责创造，你只负责响应和付出时间。我长到青少年的岁数，还当过即兴表演的演员。所以说，无论是与人相处，还是装作旁若无人，这对我都不是问题。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/c0d8cbc8c759f27640821750644a554c.png\"><img class=\"aligncenter size-full wp-image-65339\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/c0d8cbc8c759f27640821750644a554c.png\" alt=\"improv\" width=\"360\" height=\"289\"></a></p>\n<p>当然，在魁北克做即兴表演还是有点儿不同寻常，因为我们是在溜冰场地上表演——你知道冰球在加拿大多火吗。</p>\n<p>后来我去了职业学校学习多媒体，大概是 2005 年到 2008 年这个时段，我终究还是要做些编程的事情。不过我发现编程是个有意思的事情！我又感觉到了创造性！并且我还能靠这个赚钱！于是我设计了我的第一套游戏，这可让我受益匪浅。<a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/2f5fe97ea19c4f50e42da989f216c5ea.png\"><img class=\"aligncenter size-full wp-image-65337\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/2f5fe97ea19c4f50e42da989f216c5ea.png\" alt=\"game\" width=\"472\" height=\"400\"></a></p>\n<p>不过后来又有人告诉我：“你做的并不是真正的电子游戏。你做的只是一个 HTML 表单。而且你做的时候应该用数组来表示文字和选项，这样效果会更好。你写的代码应该更整洁一些。”</p>\n<p>我对这个评价觉得有点儿沮丧。我做的这个游戏是一个基于文字的游戏，文字大概有 11 页，通过选择来“进行你的冒险”。不过我意识到，如果想让大家对我做的东西更加满意，我还有很多东西要学。</p>\n<p>我应该学一些“真正的编程知识”。于是我从基于JScript 的 GUI 工具跳到了一些更牛的东西上面，例如 PHP。我学了 PHP，同时也学了 JavaScript。可是后来，我听说这些还是不行，我还得学一些“真正的编程知识”。别人跟我说，PHP 不行，我应该学的是 Python，当然后来我真的去学了。</p>\n<p>不过“真正的程序员”还会一些更时髦的东西，Python 的 Lambda 可到不了那个逼格，而且面向对象编程模式简直就是弱爆了。人家告诉我说，我应该去读一读 SICP，毕竟这是计算机科学的圣经嘛。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/88196eec64f6b673f4e1ce9ebe35eb80.png\"><img class=\"aligncenter size-full wp-image-65349\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/88196eec64f6b673f4e1ce9ebe35eb80.png\" alt=\"sicp\" width=\"309\" height=\"456\"></a></p>\n<p>然后我就接触了 Scheme。我还买了 Brian Kernighan 和 Dennis Ritchie<i><i class=\"01\"> </i></i>合写的《The C Programming Language》，因为真正的程序员就是要用 C 语言写程序的嘛。我还在本地大学报了一个业余班去上课，同时我还得去上班，因为真正的程序员都是很懂数学和算法的嘛，所以我也得学。我开始读论文，看书，因为真正的程序员在算法这件事情上肯定是与时俱进的啊。</p>\n<p>后来，我学了 Erlang 语言，而且还靠这门语言找了份工作。我写了一本 Erlang 的书。不过有意思的是，从来没人问过我是不是这本书的作者？我还有没有写其他的书？或者书里的图是不是我画的？好吧，我找到了一份教 Erlang 语言的工作，但是却从来没有在生产环境中用过这门语言。</p>\n<h3>第 1 章</h3>\n<p>我就这样一直在全世界飞来飞去，教给别人一些连我自己都没有做过的事情，结果突然之间大家就觉得我也是真正的程序员了。要知道我的工作一开始和写程序是没什么关系的。</p>\n<p>有一天，我参加完某个技术会议回家，然后被滞留在机场了，正当我气急败坏地在电脑上打字的时候，突然听到了一个奇怪的，但是很绅士的声音对我说：</p>\n<p>“能帮我设计一个系统吗？”</p>\n<p>“啥？”</p>\n<p>“设计一个系统！“</p>\n<p>我被这个请求惊呆了，于是抬起了头。我环顾四周，看到了一个小孩，他非常希望成为一名程序员，然后他说我可以叫他”printf”，当然，我觉得这肯定不是他的真名，而且这个名字也挺蠢的。他看上去长得这个样子：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/e91da181fb13d148dcb5b74e34579a96.png\"><img class=\"aligncenter size-full wp-image-65333\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/e91da181fb13d148dcb5b74e34579a96.png\" alt=\"printf-end\" width=\"393\" height=\"423\"></a></p>\n<p><q class=\"printf\"></q>”我不是很懂电脑，但是看上去你很懂。我想写一个博客程序给大家用，然后还想让大家阅读这个博客。所以麻烦你帮我写一个系统吧。”</p>\n<p>这可是一个让人吃惊的请求，可能是因为我已经 20 个小时没睡觉的原因，我还不是很理解，或者说我感觉还是很不真实。我跟他说，这可不是简单的事情。我不太清楚他到底要做什么？有没有考虑过失败了怎么办？这个博客要支持多少人同时在线阅读呢？服务器的主机放在哪儿呢？在缺乏这么多信息的前提下，我是没法设计一个合理系统的。</p>\n<p>“这些都不重要。就给我设计一个系统就好。”</p>\n<p>好吧，那么我就画了一个系统的架构图：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/23bf341a92d7e72309b27ca82f202995.png\"><img class=\"aligncenter size-full wp-image-65347\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/23bf341a92d7e72309b27ca82f202995.png\" alt=\"arch1\" width=\"467\" height=\"251\"></a></p>\n<p>他看了看，然后说：“不行，这个系统还不够好。给我再做一个吧。“</p>\n<p>然后我就又做了一个：<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/b9b614d4b48593d53f73e56f015f79d1.png\"><img class=\"aligncenter size-full wp-image-65346\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/b9b614d4b48593d53f73e56f015f79d1.png\" alt=\"arch2\" width=\"583\" height=\"337\"></a></p>\n<p>接着我跟他简要解释了一下这个系统是如何工作的。</p>\n<p>我的新朋友礼貌地笑了笑，说：”这不是我要的系统，它太复杂了，好多功能我其实都不需要。“</p>\n<p>我听了感觉气不打一处来啊，我可是考虑了冗余、系统监控、备份、缓存还有很多其他的机制，来降低负载，减轻额外的处理器负担，并且还能对系统进行有效保护，失效备援，易于部署等等。要知道，如果平时我给人拿出这种方案，那可是要收咨询费的！好吧我失去耐心了，然后我就画了下面这个图：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/ed300d72e9e18a9845bd8da8da96cae3.png\"><img class=\"aligncenter size-full wp-image-65344\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/ed300d72e9e18a9845bd8da8da96cae3.png\" alt=\"blackbox\" width=\"188\" height=\"176\"></a></p>\n<p>然后我还补充说：“这就是你要的设计。你要的系统就在这个黑盒子里。”我希望这个设计方案能让他放过我。不过我听到了一句非常意外的回答：</p>\n<p>“没错！这就是我要的系统！”</p>\n<p>这就是我和小 printf 初识的故事。</p>\n<h3>第 2 章</h3>\n<p>我迅速地对小 printf 做了点调查。发现他之前写的东西都是些小程序，基于表单的小网页，还有一些无关紧要的命令行工具。这些东西平淡无奇，就算是做出来了也很快会被人忘记。</p>\n<p>然后突然之间，他就开始做包含好几个模块的大项目了。这个项目要用到 sockets，要能访问本地硬盘，而且还要和数据库交互。程序刚一做出来的时候，小 printf 还觉得很神奇。但是即便如此这个项目还是差强人意。</p>\n<p>这个项目还需要重构，需要更细致的测试，需要更完备的文档，需要更好的包装和分析。项目上线已本来应该正常运行，但是某一天早上，它崩溃了。</p>\n<p>接下来就是各种崩溃，崩了又崩。</p>\n<p>系统配置不对，日志界面也不再滚动，磁盘速度忽快忽慢，网络不定时抽风，bug 开始各种出现，系统编码也让人匪夷所思，数据库需要清理，事务也被挂起，证书过期，各种漏洞开始暴露，系统监测则什么动静也没有。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/2a137d24c99e91c1d8b1d4fee8b313bb.png\"><img class=\"aligncenter size-full wp-image-65350\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/2a137d24c99e91c1d8b1d4fee8b313bb.png\" alt=\"spaghetti\" width=\"243\" height=\"143\"></a></p>\n<p>系统开始变成一锅粥了。</p>\n<p>他对我说：“事实上我什么都不懂！我本应根据我的需求来做判断的。我太想做一个完美的系统，花了这么多的时间，结果却是‘磨刀误了砍柴功’。当然，我还是知道这个系统的美妙之处的。“</p>\n<p>于是一天早晨，他决定离开办公室。他对着一大堆电脑指示灯说了「再见」。他离开是为了要看看，除了他那乱糟糟的服务器之外，软件的世界还能给他提供些什么好办法来实现他的系统。</p>\n<p>如果照现在的情况，只会是日志继续不停地累计，直到硬盘存爆了为止。</p>\n<h3>第 3 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/72c115153857d62127329f76d4615d75.png\"><img class=\"aligncenter size-full wp-image-65342\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/72c115153857d62127329f76d4615d75.png\" alt=\"building\" width=\"394\" height=\"281\"></a></p>\n<p>他来到了一个工作区，想找个经验丰富的人指点迷津。</p>\n<p>他找的第一个人是一个超级自信的高级工程师，他看上去地位很高的样子。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/e71c20866e199431e56c0e63c09a7c93.png\"><img class=\"aligncenter size-full wp-image-65335\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/e71c20866e199431e56c0e63c09a7c93.png\" alt=\"pro\" width=\"362\" height=\"425\"></a><q class=\"other\"></q>”啊，来向我取经啊！你可找对人了，我可是这个领域的专家！“这个人说。</p>\n<p>”专家？”小 printf 问到，”这就是说你什么程序都能写，什么程序都会写？“</p>\n<p>”那当然！“专家回答到。他补充说：”总的来说，我只写那些值得写的程序。我可不写那些没意义的东西。我能写但不写的那些程序，都是因为太简单，所以不劳我动手。“</p>\n<p>”啊，那你能帮我看一下我的系统吗？”就在小 printf 开始阐述他的系统的时候，这位专家打断了他：</p>\n<p>“抱歉，我真心觉得这么做没什么意义。”</p>\n<p>“为什么？”</p>\n<p>“因为经验。我善于编写我善于的程序，我给我善于编写的东西编程。我要严格限制我只做我擅长做的事情，这样才能变得更好。我管这个叫做‘职业安全’，这就是程序界的适者生存原理，而且这一行就是这么玩的。“</p>\n<p>”那你为什么不能帮我呢？“</p>\n<p>”好吧，你看，如果我花时间帮助了你，那么我就会让我的技术自我投资的方向发生分散和偏离——这对我来说是失策。对于你来说，最好的学习方法就是我当年做的那样：通过痛苦的努力来找到解决的办法。这有助于锻造你的个性。“</p>\n<p>”但是这样效率好低。“</p>\n<p>”好吧那你就去学校学，你也可以自学。但是无论哪种做法，都只是把那些想不劳而获的懒人踢出去，让真正愿意踏实学习的人留下来。如果不是这样的话，那我坚持恪守的价值观就会随之崩溃。“</p>\n<p>”那你觉得跟人合作，或者是你的同事能不能帮助你？“</p>\n<p>”并不能。我工作状态最好的时候其实是我一个人独自待着而且没人打扰的时候。每次我被迫和别人一起工作的时候，几乎可以肯定我们做的东西没法凑到一起。最后只能是我怒了，然后把他们写的东西又自己重新再写一遍，然后这才能行。“</p>\n<p>小 printf 对这个专家不愿帮助别人的态度感到非常意外，而且也对专家描述的周围的人能力如此之差感到很困惑。专家把自己的全部视野只集中在自己擅长的领域，只解决自己能解决的问题，这听上去有点儿悲哀。</p>\n<p>”我明白了…我觉得你别给我帮助的话就最好了。“ 小 printf 说到。</p>\n<p>”你什么意思？“自带高大上光环的专家似乎感到了自己的价值观受到了挑战。”你是说我的做的工作毫无趣味可言吗？“</p>\n<p>”哦，并不是，你做的工作很有趣。不过从你的眼光中看来，我只是一个烦躁而讨厌的家伙。我是来寻求帮助的，不是来找罪受的。“</p>\n<p>小 printf 迅速地离开了这个专家，因为他明白，除非你在他的”职业安全“范围之内，否则根本就不能碰他。</p>\n<h3>第 4 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/1ca156937bc6ffd234324776df20998e.png\"><img class=\"aligncenter size-full wp-image-65361\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/1ca156937bc6ffd234324776df20998e.png\" alt=\"books\" width=\"461\" height=\"360\"></a></p>\n<p>在继续寻找帮助的路上，小 printf 来到了一个办公室的的门口，办公室里四面都是书架，书架上放着装帧优美的硬皮书，书上有各式各样的精美图画，一个人坐在办公室里面。</p>\n<p>“先生你的书真不错啊“小 printf 说。</p>\n<p>”谢谢！我觉得这些书都是程序员必备的材料。如果你没有这些书，你都不好意思跟人家说你是真正的程序员。“</p>\n<p>”啊，那我觉得我可能就不算是真正的程序员了“，小 printf 说，”那你最喜欢哪本书呢？“</p>\n<p>”哦，大部分书我还没看过呢。“</p>\n<p>”那你不是个优秀的程序员咯？“</p>\n<p>”啊不，我不是。“这个开发者骄傲地补充到：”实际上，我是个糟糕的程序员。“</p>\n<p>”真遗憾，“，小 printf 说，”我可是不断在进步呢。“</p>\n<p>“你听说过 Dunning-Kruger 效应没？”，房间中的人问到。</p>\n<p>“没有，那是个啥玩意儿？”</p>\n<p>“就是一种认知偏差。它的意思大概就是说，那些能力不太强的人更容易高估自己，而能力很强的人更容易低估自己。”</p>\n<p>“所以按照你的意思，如果我认为我在进步，其实是因为我不够好造成的？”</p>\n<p>“是啊，就是这个意思。很可能就是你其实能力不强。而我，我公开声称自己是一个糟糕的程序员。但是根据 Dunning-Kruger 效应，我很可能是在低估我自己，这就意味着我其实是一个很棒的程序员，你还不明白吗？”</p>\n<p>“为什么会这样？”</p>\n<p>“那是因为自黑是程序员的一大法宝。当你自我感觉良好的时候，你实际上已经停滞不前了。”</p>\n<p>“但是这样一来不就意味着，一旦你自己感觉不错的时候，你就开始走下坡路了，所以你应该让自己感觉糟糕起来吗？”</p>\n<p>“对的。但是这件事情正确的做法是，你要对任何东西都说很糟糕，即便是你不知道怎么解决问题也要这么说。这样就能让你看上去很聪明，而且又并不用真的做什么。“</p>\n<p>”能具体解释一下么？“</p>\n<p>”比如我在网上看到了一个让我不爽的项目。然后我就说这个项目所有的地方都不对，但是又并不具体说哪儿不对。我只需要轻描淡写地说，因为做这个项目的人本身就是个白痴，就这样就可以了。“</p>\n<p>“但是你这么说，别人怎么会信呢？”</p>\n<p>“哈哈，我觉得他们都愿意相信他们做错了，而且他们也愿意让别人指出来。这就有点儿像烟雾或者镜子。实际上没人知道自己做的东西是啥样，他们只能知道自己做的东西看上去是啥样。”</p>\n<p>“那么如果他们说他们没法解决问题，让你来帮他们的话，那你怎么办？“</p>\n<p>”这样的话就又回到了一切事情都很糟糕的那个问题；你就说你很忙，有很多事情要做，然后你还很悲观。这样的话，他们就只能靠他们自己了。“</p>\n<p>”所以说这一切都只是摆个姿态而已？这对你来说只是一个套路？你懂的时候装作不懂，是为了让真正啥都不懂的人失去信心，你不懂的时候装懂，是为了让真正懂的人感觉糟糕。“</p>\n<p>”在大多数情况下，有能力没什么用。只有名声才是最重要的。老板招人的时候喜欢招自己的朋友，公司裁人的时候不招人喜欢的和不被重视的人会先被裁。这就是规则。如果你想改变社会的规则，你就会成为异类。这就是套路。业界就是这么运作的，学术界也大致如此，尽管这些都是潜规则，但是我还是都看出来了。一切都取决于你认识谁，如何推销自己，如果经营你的个人品牌。只有这样你才能在业界拥有一席之地。“</p>\n<p>”如果我必须要觉得自己很糟糕，而且还得让别人觉得很糟糕，这样才能找到工作的话，那我想还是算了。“小 printf 说完就走开了。</p>\n<h3>第 5 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/27adece4ab9b8ec687df066fb64d100a.png\"><img class=\"aligncenter size-full wp-image-65348\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/27adece4ab9b8ec687df066fb64d100a.png\" alt=\"realprog\" width=\"489\" height=\"488\"></a></p>\n<p>接下来就是午餐时间了，printf打断了一个全神贯注工作忘记吃午饭的人，他一直盯着屏幕，饭都已经凉了。</p>\n<p>工作这么忙碌的人应该很擅长软件行业。于是小 printf 问到：</p>\n<p>”如果主数据库崩溃了，那从数据库也会崩溃么？“</p>\n<p>”你运行的一切东西。“这个忙碌的人回答说，”迟早都会崩溃的。“</p>\n<p>”那么那些告诉你程序崩溃的程序呢？它们也会崩溃么？“</p>\n<p>”是的，它们也会崩溃。所有的大型系统在任意时刻都处在某种部分崩溃的状态。“</p>\n<p>”那么，我们搭建可靠系统（reliable system）的意义在哪儿呢？“</p>\n<p>这个忙碌的人不知道，他也在思考同样的问题，因为就在此时，他们又接到了一个问题，说是一朵云坏掉了，造成了天空塌下来砸到了头上。</p>\n<p>”那么，搭建可靠系统的意义到底在哪儿呢？“小 printf 追问到。</p>\n<p>这个忙碌的人此时一脸的不爽，一看就是在工作遇到问题的样子。他就像一个放了学被留下来不让走的孩子，而且他的三明治显然是废了。他很不耐烦地大声回答说：</p>\n<p>“显然没有任何意义。因为程序本身就是一坨屎。”</p>\n<p>“噢！”他倒抽了一口气。</p>\n<p>接下来，就是一段完全的沉默。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b7432892c1dbafb839a60491ad99734.png\"><img class=\"aligncenter size-full wp-image-65351\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b7432892c1dbafb839a60491ad99734.png\" alt=\"trashcan\" width=\"229\" height=\"381\"></a></p>\n<p>小 printf 打破了沉默，并且带着一丝愤怒：</p>\n<p>“我不相信你说的话。程序确实是脆弱的，但是程序员能够通过努力让程序变得更好且可用。”</p>\n<p>没有回应。这个时候忙碌的人已经打开一个文档，查看如何从头启动一个集群备份，情况似乎变得越来越糟糕了。</p>\n<p>“那么你真的相信可靠的程–”</p>\n<p>“噢不！”忙碌的人说，“不不不！我不相信什么好的或者可靠的程序！再也不信了！它们都不行！我告诉你我现在脑袋里想的就是怎么处理手头的这个垃圾系统。你没看到是我在努力维持让这些东西运行吗？这些破玩意儿多么重要！”</p>\n<p>小 printf 瞪了回来，表情有些惊愕。</p>\n<p>“都坏成这样了还很重要？你的口气就像是个真正的程序员似的。“</p>\n<p>他补充说：</p>\n<p>”你把概念完全搞混了。世界上有成百上千的程序，年复一年地运行，而且总是会崩溃。但是即便如此人们还是需要这些程序，使用这些程序。而且我知道还有一种程序，它们只会在单台笔记本上运行，但是只要发生一点点错误，其结果就能瞬间毁灭整个社区。如果这样，你还认为不重要吗？“</p>\n<p>接下来这个忙碌的人就不再说话了。</p>\n<h3>第 6 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/7350f2b08649e74bdbe6927120ebe2e3.png\"><img class=\"aligncenter size-full wp-image-65338\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/7350f2b08649e74bdbe6927120ebe2e3.png\" alt=\"frameworks\" width=\"529\" height=\"487\"></a></p>\n<p>小 printf 造访的第四个工作区有一个人，他的电脑前贴满了各种不知名的即时贴。</p>\n<p>”motor-mvc, quadrangular JS, GoQuery, cometeor, 还有一些听上去像是日语的东西, …“</p>\n<p>”Hi,“ 小 printf 打断了他，”请问你在做什么呢？“</p>\n<p>”alchemist, bongodb, mochascript, walktime.js, portasql, …“这个人不停地念叨。</p>\n<p>”请问您在做什么呢？“小 printf 又问了一遍，这次声音更大了一些。</p>\n<p>”噢，我在尝试新的框架，工具，数据库，编程语言。“</p>\n<p>”哇！你好像进度很快啊，效率和10个程序员加起来一样高。“</p>\n<p>”是啊，你看，这个行业的前进速度是非常快的！“他对着手机看了几秒，然后补充说，”这儿！cardboard.io 框架推出了 3.5 版本，这个版本和 3.4 不兼容，目前已经产生了 4 个 fork 了！我必须要把他们都试一遍，然后决定自己用哪个。“</p>\n<p>”但是你学这么多，都拿来做什么呢？“</p>\n<p>”我是一个提前学习主义者。如果你不保持着与时俱进的心态，现在你可能还要靠写 COBOL 或者 MUMPS 来过日子呢。如果你想做大事情，就要确保自己站在浪潮之巅。“</p>\n<p>”那这么做有效果么？“</p>\n<p>”有啊，我在 Rails 火起来之前就知道它要火了，我在 node.js 流行起来就知道它要流行了。我参与了 Redis、Mongodb 和 Riak早期的 beta 测试！我是第一个用 Vagrant 的人，后来又切换到了Docker上面，当然现在的潮流是 Unikernel“</p>\n<p>”酷，那么你掌握了这么多最前沿的技术，有什么回报呢？“</p>\n<p>”哦，并没有回报，Rails 变得越来越臃肿了以后，我就必须得赶快去关注别的重要技术，保证自己不要落后。其他的各种技术差不多也是这个套路。目前我希望掌握的是 Unikernel。“</p>\n<p>”明白了。“，小 printf 补充到，”那么这些新框架和技术都会用来解决哪些问题呢？“</p>\n<p>”噢，不是重大技术我们不用，我主要是要确保这一点，这样才能让我们公司不至于把资源花费到没有未来的技术上。这是很重要的，因为如果你不这么做的话，你的技术就会被那帮花白胡子的过时老程序员绑架，为了避免这样，你就必须成为一个自我驱动力强大的学习者，一个提前学习主义者。“</p>\n<p>”真有趣。“小 printf 插了一句嘴。</p>\n<p>”这可不是有趣，这是很难做到的！在创业的世界里，如果你想要吸引人才，你就必须要通过优秀的技术来招揽他们！否则你就是个不灵活的落后者。没人愿意做不灵活的落后者。“</p>\n<p>小 printf 赶紧说：”不，我不是这个意思。“，然后他补充到，”我感到有趣的地方在于，工具本来是用来给我们解决问题的，但是对于你来说，工具本身却成了问题。“</p>\n<p>接下来，这个人就站在他那个新潮的健身式办公桌前，没有任何回应了，小 printf 真希望自己赶紧出去。</p>\n<h3>第 7 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/6a7cef8b627c1b5bbdef6056762200a1.png\"><img class=\"aligncenter size-full wp-image-65362\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/6a7cef8b627c1b5bbdef6056762200a1.png\" alt=\"ops\" width=\"363\" height=\"349\"></a></p>\n<p>在下一个办公室，坐着一个看上去很疲倦的员工，他的桌子上堆满了空咖啡杯。她无精打采地坐着，愤怒地敲击着键盘。</p>\n<p>”嗨！“小 printf 说。</p>\n<p>这个疲倦的女人并没有停下手上的动作。他继续愤怒地敲击着键盘。</p>\n<p>”你好？“小 printf 又打了一遍招呼。</p>\n<p>这个女人忽然间停了下来，从抽屉里取出一只水壶，然后大口喝起水来。</p>\n<p>”我的工作太糟糕了。“她说，”我是做 Devops 的。一开始还好，我大部分时间做开发，偶尔也做做调试的事情，但是随着时间的推移，情况变得越来越糟糕。我开始在各处救火，但是问题还是不断发生。我解决了其中的大部分问题，但是有些小毛病还是要期盼奇迹发生，这才能赶得上开发计划预定的期限，而且开发工作也是我的。“</p>\n<p>”他们没有再找个人帮帮你么？“</p>\n<p>”没有，这就是问题的所在。小问题总是到处发生，因为我必须要解决这些问题，所以我在做开发的时候就不可能像以前只做开发时那么专注，所以我本身就会制造更多的问题。现在，我每天都没日没夜地给系统灭火，我真是恨死我的工作了。“</p>\n<p>”那你的雇主为什么什么都不做呢？“</p>\n<p>”那是因为我擅长我的工作啊，我长期以来一直可以控制住局面，而且大家都已经习惯了。当你把创造奇迹变成一种习惯的时候，人们就适应了。然后你就会被困在‘总是要创造奇迹’的局面当中，否则人们就会认为是你的工作不得力。“</p>\n<p>”这听上去可真是悲哀！“</p>\n<p>”是啊。因为你是最熟悉怎么去给系统灭火的人，所以你就总得去，久而久之就是你的工作了，直到有一天老板雇了新人来替代你做你心爱的工作。如果你真的很在意你的工作的话，那么就去做那种谁都不愿意干的脏活累活，接下来所有人都会感谢你，你干得越多人们就会越感谢你，直到所有的脏活累活全都归你。当然，这样的话工作就没有什么乐趣可言了。“</p>\n<p>”那么你可真不走运。“小 printf 说。</p>\n<p>说着，她的呼叫器又响了。</p>\n<p>”那个女人，”小 printf 对自己说，就像是他父亲的口吻，“那个女人的工作被所有人轻视，专家、明星程序员、提前学习主义者，他们都看不上她的工作。但是她做的工作才是唯一有帮助的。这很可能是因为她总是在考虑别人，而不是只考虑自己吧。”</p>\n<h3>第 8 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/e3b19d8ef4b712035dd80e8738020147.png\"><img class=\"aligncenter size-full wp-image-65363\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/e3b19d8ef4b712035dd80e8738020147.png\" alt=\"architect\" width=\"449\" height=\"377\"></a></p>\n<p>在建筑的一角，小 printf 发现了一间大办公室，办公室有巨大的落地窗，窗外视野极好。办公室内有一张非常大的办公桌，桌子上的文件堆成了小山，有一个老绅士坐在办公桌前。</p>\n<p>“啊，开发者来了”老绅士看到小 printf 走到门厅，于是就大声喊到，“进来！”</p>\n<p>透过窗户看去，小 printf 注意到窗户的玻璃上写着各种各样的字，还有用修正液涂改的痕迹，以至于窗外的风景都快被各种圈圈点点，箭头，圆柱等几何图形给盖住了，而且上面还画了云朵的图案。明明窗外就有真正的云，为什么还要在窗户上画云朵的形状？还有整个图案的含义也让人很感兴趣。</p>\n<p>”这是什么？“，小 printf 指着窗户问。</p>\n<p>”这个么？这是我们的生产系统！“那个老绅士说，一副看上去对外面事物毫不关心的样子，”我是一个软件架构师。“</p>\n<p>”软件架构师是什么？”</p>\n<p>“多数情况下，架构师是那种最了解组件之间的结构，并且最能够合理调度组件关系的人，架构师能让大型系统的各个部分完美协调地工作。同时，软件架构师也了解数据库、编程语言、框架、编辑器、序列化格式、协议以及诸如封装、协议隔离等概念。“</p>\n<p>”听上去真有趣！“小 printf 说，“终于有一个人能够回答所有的问题了！”他看了一眼架构师的图，“你的系统真是让人印象深刻啊！那么这个系统速度快么？”</p>\n<p>“我不知道，”架构师说，“应该挺快的吧。”</p>\n<p>“那系统的代码呢？写得好么？”</p>\n<p>“我也没法告诉你”</p>\n<p>“用户对系统满意么？”</p>\n<p>“恐怕我还是没法告诉你。”</p>\n<p>“但是你是软件架构师啊！”</p>\n<p>“对啊！但是我并不是开发者啊。软件架构师的任务并不是去写模块、类，也不是调用类库。软件架构师的工作相比写代码来说要重要得多。软件架构师会和开发者，程序员们聊天，问他们问题，给他们提供指导。如果程序员问的问题很有趣，那么架构师也许会亲自出马给这个问题做规划。”</p>\n<p>“为什么要这样？”</p>\n<p>“因为我们更有经验啊。我们对系统能做哪些事，不能做哪些事了解得更多。开发者则是我们知识的延伸，他们会去把优秀的系统真正做出来。”</p>\n<p>“但是你们不亲自编码，怎么能确认开发过程是顺利的呢？”</p>\n<p>“因为我们信任开发人员啊。”</p>\n<p>“所以你相信开发人员能够正确实现你的想法，并且不会产生他们自己的想法？”</p>\n<p>软件架构师听了小 printf 的话后明显有些震惊，他说：”我想我还是有点儿脱节。“，他最后承认说，“问题确实存在，别人总是跟你说要按照某种思想或者主意去做事，但是你又没法有效验证你做的事情是不是真的符合这种思想。”他低下了头，沉思着，“有的时候软件架构师既不做软件，也不做架构，这貌似是真的。”</p>\n<p>接着，小 printf 离开了坊间，然后结束了他的访问，离开了大楼。</p>\n<h3>第 9 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/badf773e339eb22672ab17db1335c747.png\"><img class=\"aligncenter size-full wp-image-65341\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/badf773e339eb22672ab17db1335c747.png\" alt=\"charity\" width=\"410\" height=\"299\"></a></p>\n<p>小 printf 刚一走出门，就碰到了一个男人正在路边募集善款。</p>\n<p>“Hi，”那个男人说，“你今天想不想给别人献点儿爱心呢？”</p>\n<p>”好吧，这样做我感觉可能会好点儿“，小 printf 回答说，”我已经在这栋大楼里待了一整天，可是我出来的时候感觉更加困惑了。“</p>\n<p>”啊，我明白了。这些人都是开发者。他们其实一点儿也帮不上忙，对不？他们总是喊着要改变世界，而且他们确实也做到了。“</p>\n<p>”但是为什么感觉这么奇怪呢？“小 printf 回答到。</p>\n<p>”好吧，因为他们的工作就是把人们的职业转换成程序，让人们安逸的生活变得更加安逸。软件会吞噬整个世界，然后给让世界面貌一新……不过从深层次来看，面貌一新的世界还是那个旧世界，只是面貌变了而已。之所你觉得奇怪，是因为世界的改变并不一定朝好的方向改变。我们现在面临的问题其实和以前一样多，需要填的坑也和以前一样深。“</p>\n<p>”那么我怎么才能让自己感觉好一点儿呢？”小 printf 显得有些焦虑。</p>\n<p>这个男人思考了一会儿，然后希望小 printf 能和他一起来帮助别人，这是他认为的能让自己感觉变好的方式。printf用了一整个下午告诉这个人自己的问题和经历。这个人听完了以后沉默了很长一段时间，然后说：</p>\n<p>“人们在社会中相互博弈，扮演不同角色，追逐和享受的名声，解决错综复杂的问题后得到瞬间的快感，这些都只是过眼云烟。最终，如果你没有解决什么有意义的问题，如果你完全不考虑别人，那么你是无法做到内心满足的。”</p>\n<p>“得不到内心的满足也许也没什么，也许会很糟糕，在你成长的过程中，你的满足感可能来自于你的工作之外，也可能来自于工作。工作可以仅仅就是工作，也可以是单纯为了钱，也可以为了兴趣。这些都OK。只要你能从生命中的某处找到内心的满足，那就好了。”</p>\n<p>“最后，只有当你以人类的面孔去解决问题的时候，你才会觉得真的正确；真正关键的点其实和电脑没关系。”</p>\n<p>“真正的关键在于你用心花在系统上的精力，这才是最重要的。“，那个人补充到，”如果你忘记了为什么花这么多精力的初衷，当一切都变成了关乎个人骄傲的游戏，那么事情的性质就变了，从可慰变成可悲。“</p>\n<p>”开发者们常常会忘记一个事实；如果你失去了对事物的眼光，那么在开发系统本身就成为了一个问题，这样的话最有效的办法就是把系统废掉，因为系统自己就是问题的根源。“</p>\n<p>”只有当你以人类的面孔去解决问题的时候，才会觉得真的正确。“，小 printf 不断重复着这句话，他铭记在心。</p>\n<h3>第 10 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/c3e439e098ad3e922e7c338db045c453.png\"><img class=\"aligncenter size-full wp-image-65332\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/c3e439e098ad3e922e7c338db045c453.png\" alt=\"printf\" width=\"569\" height=\"638\"></a></p>\n<p>坐在我身旁的Printf现在要起身回家了。跟他的一席对话让我意识到了我现在所做的事情和我的爱好有多么大的距离，而我的爱好才是我真正开始编程的动力。小 printf 遇到的每一个角色，我每天也都会遇到很多。我曾受到他们的鼓舞，希望成为他们的一员，我可能也鼓励过别人这么做。</p>\n<p>当我还在挣扎着成为一个真正的程序员的时候，小 printf 却没有这么做。他说他成不了一个真正的程序员也没关系，他更希望能成为一个长着人类面孔的程序员。</p>\n<p>时至今日，回首望去，我的困境并没有改变，我还是要在人类的面孔和纯粹的工作之间做出选择，我希望我能有这个能力。而且在这两者之间好像也没有什么中间地段可以让我去选择。</p>\n<p>无论如何，小 printf 觉得他不需要做一个真正的程序员了，我想我和他的感觉是一样的。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/78805a221a988e79ef3f42d7c5bfd4187.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111959\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111959votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111959\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/5423/Corbis-42-221258652.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            黄小非：毕业于重庆大学计算机系，南开大学软件工程硕士，SCJP。 目前在一家国企信息中心任职软件开发工程师。主要技术兴趣为Java平台相关技术、系统构架、C/C++、计算机图形学等。（新浪微博：@黄小非）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/huangxiaofei\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/huangxiaofei/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 63</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/huangxiaofei2002\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "4220d150717c8d45c995d3ccaa8b8996", "front_image_path": "full/71bf111fee57343e3033080c83e8e714bef0e88d.jpg"}
{"title": "小团队管理与大团队管理", "url": "http://blog.jobbole.com/111484/", "create_date": "2017/07/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/01/7062164f8b12cab9bb7cfd7920176dc7.jpg"], "fav_count": 3, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/liulun/p/7159705.html\">liulun</a>   </div><p>我们公司和大部分传统软件公司一样，随着业务的发展和新领域的开拓，公司的管理风格越来越像华为，这是不是最佳的演进路线，我觉得值得探讨，以下是我的思考，希望跟大家讨论。</p>\n<h2>一个问题</h2>\n<p>前段时间跟一个创业的朋友聊天，说起他们最近在做的一个项目，这是一个教育行业的管理系统，业务非常复杂，牵涉到的决策人，需要对接的系统也非常多，最后问到他们做了多久完成这个项目，朋友告诉我2个多月，6个人，其中还括一个美工，一个项目经理；剩下的都是开发人员，没有测试，没有前端开发；朋友问我，如果这个项目给你们做，你们需要做多久；我想了想说，这个项目如果交给我们做，顺利的话，至少要半年。</p>\n<p><strong>为什么差异这么大呢？</strong></p>\n<p>我们一个一个环节来分析一下，朋友的团队跟客户沟通需求的时候，功能性需求只用一个原型草图，非功能性需求就一个excel表格；如果我们公司做的话，至少要做需求调研报告，需求规格说明书；这个阶段的负责人甚至不会画原型，要到设计阶段才有人能画原型；</p>\n<p>到设计阶段，朋友的团队几乎没有什么技术设计，业务按模块给开发人员分一下，各人设计好自己的数据库模型，汇总起来给项目经理看一下，没问题就进入开发阶段了，界面设计花的时间比较久，跟客户反复确认了两三次；如果我们公司做的话，至少要产出原型设计（低保真描述功能的设计稿，高保真描述界面的设计稿），概要设计，详细设计（技术设计、架构设计、网络设计）等等，而且几乎每个设计都要经历评审环节，组织评审就要协调人员，要等大家都有时间的时候再做评审，这都是损耗；</p>\n<p>到开发测试阶段，朋友的团队几个开发人员从前端到后端，从开发到测试，都是这几个人做；如果我们公司来做的话，后台开发人员不做前端（不做复杂的前端页面，普通的前端工作还是要做的），质量保证要测试人员保证，测试把BUG提交到BUG管理工具，开发再去BUG管理工具查阅属于自己的BUG，修改完成之后，再关闭BUG，测试再做回归测试；这些流程看起来琐碎，但却损耗了大量的资源；</p>\n<p>验收上线阶段，朋友的团队所有人都铺在项目现场，有问题，当场解决；我们公司要收集问题，让测试工程师验证问题，再由开发解决，解决之后再验证，再发布版本给现场的实施工程师，实施工程师再更新上线，给客户验证。</p>\n<p>这个问题很明显：规模大的团队和规模小的团队工作方式的差异非常大，组织资源的方式也有明显的区别；我们抽象一下，把这两种模式称为：大军团模式和小编队模式，再看这两种模式的具体区别：</p>\n<h2>大军团模式</h2>\n<p>之前有一种理论，要完成一项超大规模的工程，往往需要成百上千人，有组织有纪律的协作才能完成；</p>\n<p>这样就需要制定一系列的规章、制度、流程、KPI来约束这些人，</p>\n<p>把这些人变成一个庞大机器的零部件，保证结果的达成，避免产生差错；</p>\n<p>这是一种非常常见的大组织的运作模式，</p>\n<p>不但在软件行业普遍存在（华为、惠普、IBM），</p>\n<p>在造桥、修路、航天、汽车等工业领域也十分常见，</p>\n<p>这种模式非常“稳”，他能保证目标的稳定达成，并且能使目标达成的过程清晰、可控。</p>\n<h2>小编队模式</h2>\n<p>第三次工业革命（信息技术革命）以来，小编队的运作模式发展越来越好，我司IPCC产品的核心：开源语音通信软件FreeSwitch，核心开发者也不过6个人；（说这个开源软件养活了半个呼叫中心行业的开发者都不足为过）； 这种例子在软件行业不胜枚举，比如：git源码管理系统、linux操作系统、JavaScript语言等等。</p>\n<p>甚至有些产品是一个人在短时间内完成的，这就是英雄；</p>\n<p>有很多大规模的公司，比如谷歌、Facebook、国内的百度也在内部推行小编队的运作模式；</p>\n<p>这种模式非常“快”，他能保证目标的快速达成，并且能使目标达成的效率非常高；</p>\n<h2>大军团的不足</h2>\n<h3>效率低下</h3>\n<p>大军团强调集体的智慧，</p>\n<p>个体想推动一项事务向正确的方向推进十分困难，</p>\n<p>个体的决策往往会受到质疑或排斥</p>\n<p>诸如：流程、规范、计划、考核、文档、评审、调研等词</p>\n<p>都是为了保证目标的稳定达成所衍生出来的东西，</p>\n<p>它们都是团队快速前进的束缚和绊脚石！</p>\n<h3>阻碍创新</h3>\n<p>大军团鼓励墨守成规、照章办事的氛围，</p>\n<p>大军团强调分工，把员工看作螺丝钉，希望员工各司其职，不是职责范围内的事务尽量不要碰，因为你不专业，你可能会出错，大军团最害怕出错；</p>\n<p>只有这样才能使目标达成的过程清晰可控；</p>\n<p>然而创新却需要不拘一格的思想，需要独立自主的工作空间，需要组织具备容错性，这和大军团的工作方式是格格不入的；</p>\n<h3>资源浪费</h3>\n<p>为了使目标的达成过程清晰可控；</p>\n<p>大军团制定了很多流程和制度来约束个体的行为；</p>\n<p>他把每一项事务都拆分成很多环节；</p>\n<p>又给每个环节制定了很多关卡；</p>\n<p>而且每个环节都要留下数据，使过程有迹可寻；</p>\n<p>因为大军团要做到每项事务都可以复盘，产生问题之后要可以追溯问题根源；</p>\n<p>这样确实保证了目标达成过程的清晰可控，但却浪费了大量的资源；</p>\n<h2>小编队的优势</h2>\n<h3>小编队也适合做大项目</h3>\n<p>有很多很庞大复杂的软件系统，都是以小编队的方式完成的；</p>\n<p>比如操作系统linux，大数据分析系统hadoop，我们这个行业的freeSwitch等；</p>\n<p>如果一个项目大到一定的规模，需要不同角色的人参与，那么也应该是有更多的小编队来做这一块事情；甚至更极端的做法，就是一个项目在建设之初，就考虑到会有很多小编队或个人参与到项目建设过程中，预留了多人、多团队协作的支撑工具，比如说nodejs的NPM，go语言和rust语言也有相应的规划；</p>\n<h3>小编队有很强的执行力</h3>\n<p>小编队不会说这个事情需要做个评审；</p>\n<p>小编队不会说这个事情安排的资源不够，需要协调更多的资源；</p>\n<p>小编队会把这个事情当成自己的事情，不会像大军团一样，把这个事情当成大家的事情来对待；</p>\n<p>我们来看个图：</p>\n<p>（图片遗失，暂不补充）</p>\n<h3>小编队有很强的创新力</h3>\n<p>软件行业不像建筑行业，90%以上的优秀软件一开始都是个人或者小编队创造出来的；很少见一个优秀软件是一个大规模的组织创造出来的。</p>\n<h2>一个案例</h2>\n<p>张小龙曾经说过一段话：</p>\n<p>好的工具就不应该黏人，应该帮助用户非常高效率完成任务，而不是说用完了还要拿到手里玩一会儿、多用一会儿，那不是一个很高效的表现。但是对这样的一些想法的话，我特别希望它能够根植到大家意识里，时刻想一下什么是我们做的对用户有价值的事情；</p>\n<p>假设你是马化腾，你会怎么给张小龙定KPI呢？考核微信的日活吗？……</p>\n<p>无论你制定什么KPI，都会导致团队去围绕着那个KPI去完成任务；</p>\n<p>KPI考核准则里有一项原则就是“可度量”，当你提出一项纯数据目标的时候，团队就会围绕着那个数字去工作。而偏离了做好产品的初心。</p>\n<p>一个团队工作的目的不应该是完成KPI，工作的目的应该是做好产品，完成KPI只不过是做好产品这件事情的副产物，就像一个人好好工作的目的不应该是为了赚钱，他好好工作的副产物是赚了很多钱；</p>\n<p>所以你制定了一系列的kpi考核制度，只能导致员工工作的动机更不纯粹。</p>\n<h2>最后</h2>\n<p>一个组织只要发展良好，总是会吸引更多的资源，所以组织规模的扩大是无可避免的，但如果一个组织规模已经超过500人了，那么你应该把他看作是50~100个小团队来对待，而不是把他当作一个500人的大团队来对待；</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111484\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111484votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111484\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "6d15dbaaf727b966d37bd068bb39aa2a", "front_image_path": "full/ff4572cdd38455986d3d6be616ebc49296dd76d8.jpg"}
{"title": "27 个机器学习、数学、Python 速查表", "url": "http://blog.jobbole.com/112009/", "create_date": "2017/07/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "fav_count": 21, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/shaozhengjiang\">iPytLab</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://unsupervisedmethods.com/cheat-sheet-of-machine-learning-and-python-and-math-cheat-sheets-a4afe4e791b6\">Robbie Allen</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>机器学习涉及到的方面非常多。当我开始准备复习这些内容的时候，我找到了许多不同的”速查表”, 这些速查表针对某一主题都罗列出了所有我需要知道的知识重点。最终我编译了超过 20 份机器学习相关的速查表，其中一些是我经常用到的而且我相信其他人也会从中受益。本文整理了我在网络上找到的 27 个速查表，我认为比较好。如果我有遗漏，欢迎补充。</p>\n<p>如今机器学习领域的发展相当迅速，我可以想象出来这些资源将会很快过时，但是至少在当前，在2017年6月1日，他们都是相当流行的。</p>\n<p>如果你们像我一样想要一次性批量下载所有资源，我已经将 27 个速查表整理打包（<a href=\"https://www.dropbox.com/s/v3yg8djhdf24g6v/UnsupervisedMethods.com%20-%20Cheat%20Sheets.zip?dl=0\" target=\"_blank\">Dropbox</a>、<a href=\"https://pan.baidu.com/s/1mi0viGS\" target=\"_blank\">百度云</a>）好了，请尽情享用吧！</p>\n<p>如果你喜欢本文，记得给我在下面点个 zan 哦。</p>\n<h2 id=\"机器学习\">机器学习\n</h2><p>这里我从一些和机器学习算法相关的流程图和表格中选择了我认为最全面的几个并在下面罗列出来。</p>\n<h3 id=\"Neural-Network-Architectures\">Neural Network Architectures\n</h3><p>链接: <a href=\"http://www.asimovinstitute.org/neural-network-zoo/\" target=\"_blank\" rel=\"external\">http://www.asimovinstitute.org/neural-network-zoo/</a><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/NN.png\" alt=\"\"></p>\n<p> </p>\n<p style=\"text-align: center;\"><em>The Neural Network Zoo</em></p>\n<h3 id=\"Microsoft-Azure-Algorithm-Flowchart\">Microsoft Azure Algorithm Flowchart\n</h3><p>链接: <a href=\"https://docs.microsoft.com/en-us/azure/machine-learning/machine-learning-algorithm-cheat-sheet\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://docs.microsoft.com/en-us/azure/machine-learning/machine-learning-algorithm-cheat-sheet</span></a></p>\n<p><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/MS.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><em>Machine learning algorithm cheat sheet for Microsoft Azure Machine Learning Studio</em></p>\n<h3 id=\"SAS-Algorithm-Flowchart\">SAS Algorithm Flowchart\n</h3><p>链接: <a href=\"http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/</span></a></p>\n<p><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/SAS.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><em>SAS: Which machine learning algorithm should I use?</em></p>\n<h3 id=\"Algorithm-Summary\">Algorithm Summary\n</h3><p>链接: <a href=\"http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/</span></a></p>\n<p><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/AS.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><em>A Tour of Machine Learning Algorithms</em></p>\n<p style=\"text-align: center;\"><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/best.jpeg\" rel=\"gallery0\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/best.jpeg\" alt=\"\"></a><br>\n<em>Which are the best known machine learning algorithms?</em></p>\n<h3 id=\"Algorithm-Pro-Con\">Algorithm Pro/Con\n</h3><p>链接: <a href=\"https://blog.dataiku.com/machine-learning-explained-algorithms-are-your-friend\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://blog.dataiku.com/machine-learning-explained-algorithms-are-your-friend</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/CON.jpeg\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/CON.jpeg\" alt=\"\"></span></a></p>\n<h2 id=\"Python\">Python\n</h2><p>网上在线的Python资源可以说是相当的多。在这一部分，我挑选了我遇到的几个最好的速查表呈献给大家。</p>\n<h3 id=\"ML算法\">ML算法\n</h3><p>链接: <a href=\"https://www.analyticsvidhya.com/blog/2015/09/full-cheatsheet-machine-learning-algorithms/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.analyticsvidhya.com/blog/2015/09/full-cheatsheet-machine-learning-algorithms/</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYALGO.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYALGO.png\" alt=\"\"></span></a></p>\n<h3 id=\"Python基础\">Python基础\n</h3><p>链接: <a href=\"http://datasciencefree.com/python.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://datasciencefree.com/python.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://www.datacamp.com/community/tutorials/python-data-science-cheat-sheet-basics#gs.0x1rxEA\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/tutorials/python-data-science-cheat-sheet-basics#gs.0x1rxEA</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC2.png\" alt=\"\"></span></a></p>\n<h3 id=\"Numpy\">Numpy\n</h3><p>链接: <a href=\"https://www.dataquest.io/blog/numpy-cheat-sheet/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.dataquest.io/blog/numpy-cheat-sheet/</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/NUMPY.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/NUMPY.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"http://datasciencefree.com/numpy.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://datasciencefree.com/numpy.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy-pdf.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy-pdf.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://www.datacamp.com/community/blog/python-numpy-cheat-sheet#gs.Nw3V6CE\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/python-numpy-cheat-sheet#gs.Nw3V6CE</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy3.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy3.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/numpy/numpy.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/numpy/numpy.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy4.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy4.png\" alt=\"\"></span></a></p>\n<h3 id=\"Pandas\">Pandas\n</h3><p>链接: <a href=\"http://datasciencefree.com/pandas.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://datasciencefree.com/pandas.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://www.datacamp.com/community/blog/python-pandas-cheat-sheet#gs.S4P4T=U\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/python-pandas-cheat-sheet#gs.S4P4T=U</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas2.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/pandas/pandas.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/pandas/pandas.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas3.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas3.png\" alt=\"\"></span></a></p>\n<h3 id=\"Matplotlib\">Matplotlib\n</h3><p>链接: <a href=\"https://www.datacamp.com/community/blog/python-matplotlib-cheat-sheet\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/python-matplotlib-cheat-sheet</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/matplotlib/matplotlib.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/matplotlib/matplotlib.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib2.png\" alt=\"\"></span></a></p>\n<h3 id=\"Scikit-Learn\">Scikit Learn\n</h3><p>链接: <a href=\"https://www.datacamp.com/community/blog/scikit-learn-cheat-sheet#gs.fZ2A1Jk\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/scikit-learn-cheat-sheet#gs.fZ2A1Jk</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"http://peekaboo-vision.blogspot.de/2013/01/machine-learning-cheat-sheet-for-scikit.html\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://peekaboo-vision.blogspot.de/2013/01/machine-learning-cheat-sheet-for-scikit.html</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl2.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/rcompton/ml_cheat_sheet/blob/master/supervised_learning.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/rcompton/ml_cheat_sheet/blob/master/supervised_learning.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl3.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl3.png\" alt=\"\"></span></a></p>\n<h3 id=\"Tensorflow\">Tensorflow\n</h3><p>链接: <a href=\"https://github.com/aymericdamien/TensorFlow-Examples/blob/master/notebooks/1_Introduction/basic_operations.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/aymericdamien/TensorFlow-Examples/blob/master/notebooks/1_Introduction/basic_operations.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/tf.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/tf.png\" alt=\"\"></span></a></p>\n<h3 id=\"Pytorch\">Pytorch\n</h3><p>链接: <a href=\"https://github.com/bfortuner/pytorch-cheatsheet\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/bfortuner/pytorch-cheatsheet</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/torch.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/torch.png\" alt=\"\"></span></a></p>\n<h2 id=\"数学\">数学\n</h2><p>如果你想真正的理解机器学习，你需要有扎实的统计学(尤其是概率论), 线性代数以及微积分基础。我在上大学的时候辅修了数学专业，但是我肯定还是需要对这些数学知识进行复习。如果你想理解常用机器学习算法背后的数学原理，那么下面的这些速查表将会是你需要的。</p>\n<h3 id=\"概率论\">概率论\n</h3><p>链接: <a href=\"http://www.wzchen.com/s/probability_cheatsheet.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://www.wzchen.com/s/probability_cheatsheet.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/prob.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/prob.png\" alt=\"\"></span></a></p>\n<h3 id=\"线性代数\">线性代数\n</h3><p>链接: <a href=\"https://minireference.com/static/tutorials/linear_algebra_in_4_pages.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://minireference.com/static/tutorials/linear_algebra_in_4_pages.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/la.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/la.png\" alt=\"\"></span></a></p>\n<h3 id=\"统计学\">统计学\n</h3><p>链接: <a href=\"http://web.mit.edu/~csvoss/Public/usabo/stats_handout.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://web.mit.edu/~csvoss/Public/usabo/stats_handout.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/stat.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/stat.png\" alt=\"\"></span></a></p>\n<h3 id=\"微积分\">微积分\n</h3><p>链接: <a href=\"http://tutorial.math.lamar.edu/getfile.aspx?file=B,41,N\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://tutorial.math.lamar.edu/getfile.aspx?file=B,41,N</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/calculus.png\" rel=\"gallery0\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/calculus.png\" alt=\"\"></a></p>\n<p>打包下载：<a href=\"https://www.dropbox.com/s/v3yg8djhdf24g6v/UnsupervisedMethods.com%20-%20Cheat%20Sheets.zip?dl=0\" target=\"_blank\">Dropbox</a>、<a href=\"https://pan.baidu.com/s/1mi0viGS\" target=\"_blank\">百度云</a></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/c3d3aeee3e50259c10c3524201fc68db.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112009\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112009votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112009\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 21 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaozhengjiang\">iPytLab</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaozhengjiang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/d3f741a9dd5c4194b365e95b06a56c09.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            喜欢写程序的计算化学狗，Python/C/C++/Fortran, 个人博客 http://pytlab.org        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/shaozhengjiang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/shaozhengjiang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/shaozhengjiang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://pytlab.org\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/shaowugui\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/PytLab\"><i class=\"fa fa-github\"></i></a> <a title=\"Stack Overflow主页\" target=\"_blank\" href=\"http://stackoverflow.com/users/4014840/pytlab\"><i class=\"fa fa-stack-overflow\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "工具与资源", "url_object_id": "edadb3aea0db398bd4790e74f9295bb1", "front_image_path": "full/eadb28355fab57e9672e5c965147ef4caca04ac4.jpg"}
{"title": "MySQL 主从复制原理探索", "url": "http://blog.jobbole.com/111865/", "create_date": "2017/07/16", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/582271a95a4505dff985ffc837868976.png"], "fav_count": 3, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/hector\">hoohack</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p><a href=\"http://blog.jobbole.com/111853/\" target=\"_blank\">上一篇文章</a>里面，讲到了遇到mysql主从延迟的坑，对于这次的坑多说两句，以前也看过这样的例子，也知道不能够写完之后马上更新，但是真正开发的时候还是没有注意到这一点，道理大家都懂，但是还是会犯错，只有等到自己亲生体验到该错误之后，才真正的掌握到该道理。</p>\n<p>经历过一次mysql主从延迟之后，就开始思考，主从复制是什么东西？它是怎么实现的呢？它的原理是什么？于是乎就开始查阅资料、文章，现将自己理解到的内容总结在此，加深印象。</p>\n<h3>为什么要做主从复制？</h3>\n<p>1、在业务复杂的系统中，有这么一个情景，有一句sql语句需要锁表，导致暂时不能使用读的服务，那么就很影响运行中的业务，使用主从复制，让主库负责写，从库负责读，这样，即使主库出现了锁表的情景，通过读从库也可以保证业务的正常运作。</p>\n<p>2、做数据的热备</p>\n<p>3、架构的扩展。业务量越来越大，I/O访问频率过高，单机无法满足，此时做多库的存储，降低磁盘I/O访问的频率，提高单个机器的I/O性能。</p>\n<h3>mysql主从复制的原理是什么？</h3>\n<p>binlog: binary log，主库中保存所有更新事件日志的二进制文件。</p>\n<p>主从复制的基础是主库记录数据库的所有变更记录到binlog。binlog是数据库服务器启动的那一刻起，保存所有修改数据库结构或内容的一个文件。</p>\n<p>mysql主从复制是一个异步的复制过程，主库发送更新事件到从库，从库读取更新记录，并执行更新记录，使得从库的内容与主库保持一致。</p>\n<p>在主库里，只要有更新事件出现，就会被依次地写入到binlog里面，之后会推到从库中作为从库进行复制的数据源。</p>\n<p><strong>binlog输出线程。</strong>每当有从库连接到主库的时候，主库都会创建一个线程然后发送binlog内容到从库。 对于每一个即将发送给从库的sql事件，binlog输出线程会将其锁住。一旦该事件被线程读取完之后，该锁会被释放，即使在该事件完全发送到从库的时候，该锁也会被释放。</p>\n<p>在从库里，当复制开始的时候，从库就会创建两个线程进行处理：</p>\n<p><strong>从库I/O线程。</strong>当START SLAVE语句在从库开始执行之后，从库创建一个I/O线程，该线程连接到主库并请求主库发送binlog里面的更新记录到从库上。 从库I/O线程读取主库的binlog输出线程发送的更新并拷贝这些更新到本地文件，其中包括relay log文件。</p>\n<p><strong>从库的SQL线程。</strong>从库创建一个SQL线程，这个线程读取从库I/O线程写到relay log的更新事件并执行。</p>\n<p>可以知道，对于每一个主从复制的连接，都有三个线程。拥有多个从库的主库为每一个连接到主库的从库创建一个binlog输出线程，每一个从库都有它自己的I/O线程和SQL线程。</p>\n<p>从库通过创建两个独立的线程，使得在进行复制时，从库的读和写进行了分离。因此，即使负责执行的线程运行较慢，负责读取更新语句的线程并不会因此变得缓慢。比如说，如果从库有一段时间没运行了，当它在此启动的时候，尽管它的SQL线程执行比较慢，它的I/O线程可以快速地从主库里读取所有的binlog内容。这样一来，即使从库在SQL线程执行完所有读取到的语句前停止运行了，I/O线程也至少完全读取了所有的内容，并将其安全地备份在从库本地的relay log，随时准备在从库下一次启动的时候执行语句。</p>\n<h3>查看主从复制的状态</h3>\n<p>当主从复制正在进行中时，如果想查看从库两个线程运行状态，可以通过执行在从库里执行”show slave status\\G”语句，以下的字段可以给你想要的信息：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cc2d67902942369632\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMaster_Log_File — 上一个从主库拷贝过来的binlog文件\r\nRead_Master_Log_Pos — 主库的binlog文件被拷贝到从库的relay log中的位置\r\nRelay_Master_Log_File — SQL线程当前处理中的relay log文件\r\nExec_Master_Log_Pos — 当前binlog文件正在被执行的语句的位置</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cc2d67902942369632-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cc2d67902942369632-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983cc2d67902942369632-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cc2d67902942369632-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cc2d67902942369632-1\"><span class=\"crayon-v\">Master_Log</span><span class=\"crayon-sy\">_</span>File<span class=\"crayon-h\"> </span>—<span class=\"crayon-h\"> </span>上一个从主库拷贝过来的<span class=\"crayon-i\">binlog</span>文件</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cc2d67902942369632-2\"><span class=\"crayon-v\">Read_Master_Log</span><span class=\"crayon-sy\">_</span>Pos<span class=\"crayon-h\"> </span>—<span class=\"crayon-h\"> </span>主库的<span class=\"crayon-i\">binlog</span>文件被拷贝到从库的<span class=\"crayon-e\">relay </span><span class=\"crayon-i\">log</span>中的位置</div><div class=\"crayon-line\" id=\"crayon-5983cc2d67902942369632-3\"><span class=\"crayon-v\">Relay_Master_Log</span><span class=\"crayon-sy\">_</span>File<span class=\"crayon-h\"> </span>—<span class=\"crayon-h\"> </span><span class=\"crayon-i\">SQL</span>线程当前处理中的<span class=\"crayon-e\">relay </span><span class=\"crayon-i\">log</span>文件</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cc2d67902942369632-4\"><span class=\"crayon-v\">Exec_Master_Log</span><span class=\"crayon-sy\">_</span>Pos<span class=\"crayon-h\"> </span>—<span class=\"crayon-h\"> </span>当前<span class=\"crayon-i\">binlog</span>文件正在被执行的语句的位置</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>整个主从复制的流程可以通过以下图示理解：</p>\n<p><img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/DB%20replication.png\" alt=\"DB Replication\"></p>\n<ul>\n<li>步骤一：主库db的更新事件(update、insert、delete)被写到binlog</li>\n<li>步骤二：从库发起连接，连接到主库</li>\n<li>步骤三：此时主库创建一个binlog dump thread，把binlog的内容发送到从库</li>\n<li>步骤四：从库启动之后，创建一个I/O线程，读取主库传过来的binlog内容并写入到relay log</li>\n<li>步骤五：还会创建一个SQL线程，从relay log里面读取内容，从<strong>Exec_Master_Log_Pos</strong>位置开始执行读取到的更新事件，将更新内容写入到slave的db</li>\n</ul>\n<p class=\"lang:default decode:true brush: default; gutter: true\"><code>注：上面的解释是解释每一步做了什么，整个mysql主从复制是异步的，不是按照上面的步骤执行的。 </code></p>\n<h3>其他</h3>\n<p>关于主从复制架构的搭建，可以参考网上更多的文档，文笔有限，不做更多的介绍。</p>\n<p>作为一名开发，这些基础的mysql知识还是需要多多学习。</p>\n<h3>参考资料</h3>\n<ul>\n<li><a href=\"http://dbadiaries.com/what-is-mysql-replication-and-how-does-it-work\">What is MySQL Replication and How Does It Work?</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.6/en/replication-implementation-details.html\">Replication Implementation Details</a></li>\n</ul>\n<p>原创文章，文笔有限，才疏学浅，文中若有不正之处，万望告知。</p>\n<p><!-- JiaThis Button END --></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/7aa70eaa311d5a5dec82ca0d49624741.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/1a4b335ec981d013f4002205a23fedd0.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111865\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111865votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111865\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/hector\">hoohack</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/hector\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/df22a501f19a5bba1b3331e2001f8ec2.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            一个正在努力的菜鸟        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/hector\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/hector/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/hector/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 27</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.hoohack.me\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/u/2388493434?is_all=1\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：914099943\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：hhq8307231\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/hoohack\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "3a27b353b7aca708e99d62dc9d86734b", "front_image_path": "full/76dac52543eae84f3fd038af336bf45c1c4c1efe.jpg"}
{"title": "人人都能读懂的设计模式（2）：结构型模式", "url": "http://blog.jobbole.com/111798/", "create_date": "2017/07/16", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/1503a298ec77047d9314ddceef5e4ff7.jpg"], "fav_count": 4, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/justin_ygg\">Justin(李加庆)</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://github.com/kamranahmedse/design-patterns-for-humans/blob/master/README.md#structural-design-patterns\">kamranahmedse</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>用最简单的语言，解释设计模式。</p>\n<p>虽然示例代码是用 PHP7 实现的，但因为概念是一样的，所以语言并不会阻碍大家理解设计模式。</p>\n<p>《<a href=\"http://blog.jobbole.com/111799/\" target=\"_blank\">人人都能读懂的设计模式（1）：创建型模式</a>》</p>\n<h3>结构型设计模式</h3>\n<h4>概述</h4>\n<p>结构型设计模式主要关注对象组合，换句话说，关注实体之间如何互相使用。 或者还有另外一个解释，结构型设计模式有助于回答“如何构建软件组件？”</p>\n<h4>维基百科</h4>\n<p>在软件工程中，结构型设计模式是借由一以贯之的方式来了解元件间的关系，从而简化设计的一种设计模式。</p>\n<p><strong>分类</strong></p>\n<ul>\n<li>适配器模式</li>\n<li>桥接模式</li>\n<li>组合模式</li>\n<li>修饰模式</li>\n<li>外观模式</li>\n<li>享元模式</li>\n<li>代理模式</li>\n</ul>\n<h3>🔌 适配器模式</h3>\n<h4>现实生活示例</h4>\n<p>考虑这样一个场景，你的存储卡中有一些照片，你需要将其传输到计算机。为此，你需要某种与计算机端口兼容的适配器，以便将存储卡连接到计算机上。在这种情况下，读卡器就是适配器。另外一个例子就是大名鼎鼎的电源适配器：一个三脚插头不能连接到双插头插座，需要使用电源适配器使其与双插头插座兼容。另外一个例子是译者将一个人说的话翻译给另一个人。</p>\n<h4>概述</h4>\n<p>适配器模式可以将不兼容的对象包装成适配器来适配其它类。</p>\n<h4>维基百科</h4>\n<p>在软件工程中，适配器模式是允许将现有类的接口用作另一个类接口的软件设计模式。它通常用于现有类与其他类的协作，而无需修改现有类的代码。</p>\n<p><strong>程序示例</strong></p>\n<p>考虑一个游戏场景，有一个猎人，他狩猎狮子。</p>\n<p>首先给出 <code>Lion</code> 接口，所有种类的狮子都要实现这个接口。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c555d888940319\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Lion\r\n{\r\n    public function roar();\r\n}\r\n\r\nclass AfricanLion implements Lion\r\n{\r\n    public function roar()\r\n    {\r\n    }\r\n}\r\n\r\nclass AsianLion implements Lion\r\n{\r\n    public function roar()\r\n    {\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c555d888940319-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c555d888940319-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lion</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">roar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-6\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AfricanLion</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lion</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">roar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-12\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-13\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AsianLion</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lion</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-14\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">roar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c555d888940319-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c555d888940319-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>猎人希望可以狩猎任何实现 <code>Lion</code> 接口的狮子</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5567723405859\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Hunter\r\n{\r\n    public function hunt(Lion $lion)\r\n    {\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5567723405859-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5567723405859-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5567723405859-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5567723405859-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5567723405859-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5567723405859-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5567723405859-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Hunter</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5567723405859-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5567723405859-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">hunt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Lion</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">lion</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5567723405859-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5567723405859-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5567723405859-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>现在我们假定猎人在游戏中也可以狩猎<code>野狗</code>。但是目前我们无法实现，因为狗是通过其他接口实现。为了让猎人可以狩猎野狗，我们需要创建一个适配器，来兼容这种情况。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c556c546178210\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// This needs to be added to the game\r\nclass WildDog\r\n{\r\n    public function bark()\r\n    {\r\n    }\r\n}\r\n\r\n// Adapter around wild dog to make it compatible with our game\r\nclass WildDogAdapter implements Lion\r\n{\r\n    protected $dog;\r\n\r\n    public function __construct(WildDog $dog)\r\n    {\r\n        $this-&gt;dog = $dog;\r\n    }\r\n\r\n    public function roar()\r\n    {\r\n        $this-&gt;dog-&gt;bark();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556c546178210-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556c546178210-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-1\"><span class=\"crayon-c\">// This needs to be added to the game</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WildDog</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bark</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-9\"><span class=\"crayon-c\">// Adapter around wild dog to make it compatible with our game</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-10\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WildDogAdapter</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lion</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-11\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">dog</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">WildDog</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">dog</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">dog</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">dog</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-18\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">roar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">dog</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">bark</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556c546178210-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556c546178210-23\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>这样，在游戏中通过 <code>WildDogAdapter</code> 就可以使用 <code>WildDog</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c556f022223486\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">PHP</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$wildDog = new WildDog();\r\n$wildDogAdapter = new WildDogAdapter($wildDog);\r\n\r\n$hunter = new Hunter();\r\n$hunter-&gt;hunt($wildDogAdapter);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c556f022223486-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556f022223486-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556f022223486-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c556f022223486-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c556f022223486-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c556f022223486-1\"><span class=\"crayon-v\">$wildDog</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WildDog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556f022223486-2\"><span class=\"crayon-v\">$wildDogAdapter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WildDogAdapter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$wildDog</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556f022223486-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c556f022223486-4\"><span class=\"crayon-v\">$hunter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Hunter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c556f022223486-5\"><span class=\"crayon-v\">$hunter</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">hunt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$wildDogAdapter</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h3>🚡 桥接模式</h3>\n<h4>现实生活示例</h4>\n<p>假如你有一个网站，上面有不同的网页，并且允许用户更改主题。你会如何实现呢？是为每个页面的各个主题创建多个副本，还是创建单独的主题，并根据用户的偏好来加载主题呢？桥接模式可以帮你实现后者。</p>\n<p>不使用桥接模式</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/04/4b4f6fd843a5bfc7ee4880c5c9a71146.png\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/04/4b4f6fd843a5bfc7ee4880c5c9a71146-300x221.png\" alt=\"2\"></a> <a href=\"http://jbcdn2.b0.upaiyun.com/2017/04/6b0ea9d009344ad2311de1dfcdadcec0.png\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/04/6b0ea9d009344ad2311de1dfcdadcec0-300x221.png\" alt=\"1\"></a></p>\n<p>使用桥接模式</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/04/4b4f6fd843a5bfc7ee4880c5c9a71146.png\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/04/4b4f6fd843a5bfc7ee4880c5c9a71146-300x221.png\" alt=\"2\"></a></p>\n<h4>概述</h4>\n<p>桥接模式主打的是组合优于继承。实现细节从对象的层次结构推送给具有单独层次结构的另一个对象。</p>\n<h4>维基百科</h4>\n<p>桥接模式是软件工程中使用的设计模式，旨在“将抽象与实现分离，使得两者可以独立变化”</p>\n<p><strong>程序示例</strong></p>\n<p>以上面提到的网页为例，下面是 <code>WebPage</code> 的结构</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5574199571272\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface WebPage\r\n{\r\n    public function __construct(Theme $theme);\r\n    public function getContent();\r\n}\r\n\r\nclass About implements WebPage\r\n{\r\n    protected $theme;\r\n\r\n    public function __construct(Theme $theme)\r\n    {\r\n        $this-&gt;theme = $theme;\r\n    }\r\n\r\n    public function getContent()\r\n    {\r\n        return \"About page in \" . $this-&gt;theme-&gt;getColor();\r\n    }\r\n}\r\n\r\nclass Careers implements WebPage\r\n{\r\n    protected $theme;\r\n\r\n    public function __construct(Theme $theme)\r\n    {\r\n        $this-&gt;theme = $theme;\r\n    }\r\n\r\n    public function getContent()\r\n    {\r\n        return \"Careers page in \" . $this-&gt;theme-&gt;getColor();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5574199571272-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5574199571272-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WebPage</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Theme</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getContent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-7\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">About</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WebPage</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-10\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Theme</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">theme</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getContent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"About page in \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">theme</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-20\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-22\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Careers</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WebPage</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-23\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Theme</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">theme</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">theme</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-30\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getContent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Careers page in \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">theme</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5574199571272-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5574199571272-35\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p>独立的 <code>主题</code> 结构</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5577628256783\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Theme\r\n{\r\n    public function getColor();\r\n}\r\n\r\nclass DarkTheme implements Theme\r\n{\r\n    public function getColor()\r\n    {\r\n        return 'Dark Black';\r\n    }\r\n}\r\nclass LightTheme implements Theme\r\n{\r\n    public function getColor()\r\n    {\r\n        return 'Off white';\r\n    }\r\n}\r\nclass AquaTheme implements Theme\r\n{\r\n    public function getColor()\r\n    {\r\n        return 'Light blue';\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5577628256783-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5577628256783-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Theme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-6\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DarkTheme</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Theme</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Dark Black'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-13\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LightTheme</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Theme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-14\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Off white'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-19\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-20\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AquaTheme</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Theme</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-21\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Light blue'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5577628256783-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5577628256783-26\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>都是两层结构</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c557b440404065\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$darkTheme = new DarkTheme();\r\n\r\n$about = new About($darkTheme);\r\n$careers = new Careers($darkTheme);\r\n\r\necho $about-&gt;getContent(); // \"About page in Dark Black\";\r\necho $careers-&gt;getContent(); // \"Careers page in Dark Black\";</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c557b440404065-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557b440404065-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557b440404065-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557b440404065-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557b440404065-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557b440404065-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557b440404065-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c557b440404065-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">darkTheme</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DarkTheme</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557b440404065-2\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557b440404065-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">about</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">About</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">darkTheme</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557b440404065-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">careers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Careers</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">darkTheme</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557b440404065-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557b440404065-6\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">about</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getContent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// \"About page in Dark Black\";</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557b440404065-7\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">careers</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getContent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// \"Careers page in Dark Black\";</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h3>🌿 组合模式</h3>\n<h4>现实生活示例</h4>\n<p>每个公司都是由员工组成，每个员工都有一些共同特征比如薪资以及所承担的某些责任，会或者不会向其他人汇报工作，有或者没有下属等。</p>\n<h4>概述</h4>\n<p>组合模式让客户端以统一的方式对待各个对象。</p>\n<h4>维基百科</h4>\n<p>在软件工程中，组合模式是一种分治设计模式。组合模式对待一组对象的处理方式与对待对象的单个实例相同。组合的意图是将对象“组合”成树状结构以呈现<strong>部分-整体</strong>的层次结构。实现组合模式可以使客户端能够均匀地处理单个对象和组合。</p>\n<p><strong>程序示例</strong></p>\n<p>以上面提到的员工为例，下面是不同的员工类型</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c557e934722940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Employee\r\n{\r\n    public function __construct(string $name, float $salary);\r\n    public function getName(): string;\r\n    public function setSalary(float $salary);\r\n    public function getSalary(): float;\r\n    public function getRoles(): array;\r\n}\r\n\r\nclass Developer implements Employee\r\n{\r\n    protected $salary;\r\n    protected $name;\r\n\r\n    public function __construct(string $name, float $salary)\r\n    {\r\n        $this-&gt;name = $name;\r\n        $this-&gt;salary = $salary;\r\n    }\r\n\r\n    public function getName(): string\r\n    {\r\n        return $this-&gt;name;\r\n    }\r\n\r\n    public function setSalary(float $salary)\r\n    {\r\n        $this-&gt;salary = $salary;\r\n    }\r\n\r\n    public function getSalary(): float\r\n    {\r\n        return $this-&gt;salary;\r\n    }\r\n\r\n    public function getRoles(): array\r\n    {\r\n        return $this-&gt;roles;\r\n    }\r\n}\r\n\r\nclass Designer implements Employee\r\n{\r\n    protected $salary;\r\n    protected $name;\r\n\r\n    public function __construct(string $name, float $salary)\r\n    {\r\n        $this-&gt;name = $name;\r\n        $this-&gt;salary = $salary;\r\n    }\r\n\r\n    public function getName(): string\r\n    {\r\n        return $this-&gt;name;\r\n    }\r\n\r\n    public function setSalary(float $salary)\r\n    {\r\n        $this-&gt;salary = $salary;\r\n    }\r\n\r\n    public function getSalary(): float\r\n    {\r\n        return $this-&gt;salary;\r\n    }\r\n\r\n    public function getRoles(): array\r\n    {\r\n        return $this-&gt;roles;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c557e934722940-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c557e934722940-72\">72</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Employee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRoles</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-10\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Developer</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Employee</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-11\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-14\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">salary</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-20\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">string</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">salary</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-30\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRoles</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">roles</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-40\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-42\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Designer</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Employee</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-43\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-46\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-50\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">salary</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-52\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">string</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-54\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-55\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">salary</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-62\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-64\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-65\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">salary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-67\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-68\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRoles</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-69\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-70\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">roles</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c557e934722940-71\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c557e934722940-72\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0080 seconds] -->\r\n<p><span style=\"font-weight: normal\">包含几种不同类型员工的公司</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5582584806836\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Organization\r\n{\r\n    protected $employees;\r\n\r\n    public function addEmployee(Employee $employee)\r\n    {\r\n        $this-&gt;employees[] = $employee;\r\n    }\r\n\r\n    public function getNetSalaries(): float\r\n    {\r\n        $netSalary = 0;\r\n\r\n        foreach ($this-&gt;employees as $employee) {\r\n            $netSalary += $employee-&gt;getSalary();\r\n        }\r\n\r\n        return $netSalary;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5582584806836-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5582584806836-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Organization</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addEmployee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Employee</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">employee</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">employee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getNetSalaries</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">netSalary</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">foreach</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">employees </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">employee</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">netSalary</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">employee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getSalary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">netSalary</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5582584806836-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5582584806836-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>然后可以这样调用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5586963846688\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Prepare the employees\r\n$john = new Developer('John Doe', 12000);\r\n$jane = new Designer('Jane Doe', 15000);\r\n\r\n// Add them to organization\r\n$organization = new Organization();\r\n$organization-&gt;addEmployee($john);\r\n$organization-&gt;addEmployee($jane);\r\n\r\necho \"Net salaries: \" . $organization-&gt;getNetSalaries(); // Net Salaries: 27000</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5586963846688-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5586963846688-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5586963846688-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5586963846688-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5586963846688-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5586963846688-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5586963846688-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5586963846688-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5586963846688-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5586963846688-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5586963846688-1\"><span class=\"crayon-c\">// Prepare the employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5586963846688-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">john</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Developer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'John Doe'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5586963846688-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">jane</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Designer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Jane Doe'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5586963846688-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5586963846688-5\"><span class=\"crayon-c\">// Add them to organization</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5586963846688-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">organization</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Organization</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5586963846688-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">organization</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">addEmployee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">john</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5586963846688-8\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">organization</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">addEmployee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">jane</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5586963846688-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5586963846688-10\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Net salaries: \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">organization</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getNetSalaries</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Net Salaries: 27000</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p>\n<h3>☕ 装饰器模式</h3>\n<h4>现实生活示例</h4>\n<p>想象一下，你在经营一家提供多种服务的汽车服务站。现在如何计算收费帐单呢？选择一项服务，并动态地向其添加价格，直到获得最终成本。这里每种类型的服务就是装饰器。</p>\n<h4>概述</h4>\n<p>通过将对象包装在装饰器类的对象中，装饰器模式可以在运行时动态地更改对象的行为。</p>\n<h4>维基百科</h4>\n<p>装饰器模式，是面向对象编程领域中，一种动态地或静态地往一个类中添加新行为而不影响相同类中其他对象的设计模式。装饰器模式对于遵守单一责任原则通常是有用的，因为它允许在具有独特领域的类之间划分功能。</p>\n<p><strong>程序示例</strong></p>\n<p>我们以咖啡为例，首先我们通过咖啡接口实现一个简单咖啡</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5589600928266\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Coffee\r\n{\r\n    public function getCost();\r\n    public function getDescription();\r\n}\r\n\r\nclass SimpleCoffee implements Coffee\r\n{\r\n    public function getCost()\r\n    {\r\n        return 10;\r\n    }\r\n\r\n    public function getDescription()\r\n    {\r\n        return 'Simple coffee';\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5589600928266-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5589600928266-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Coffee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-7\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SimpleCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Coffee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Simple coffee'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5589600928266-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5589600928266-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>我们希望代码可扩展，以允许选项在需要时进行修改。 增加一些附加项（装饰器）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c558d073314503\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MilkCoffee implements Coffee\r\n{\r\n    protected $coffee;\r\n\r\n    public function __construct(Coffee $coffee)\r\n    {\r\n        $this-&gt;coffee = $coffee;\r\n    }\r\n\r\n    public function getCost()\r\n    {\r\n        return $this-&gt;coffee-&gt;getCost() + 2;\r\n    }\r\n\r\n    public function getDescription()\r\n    {\r\n        return $this-&gt;coffee-&gt;getDescription() . ', milk';\r\n    }\r\n}\r\n\r\nclass WhipCoffee implements Coffee\r\n{\r\n    protected $coffee;\r\n\r\n    public function __construct(Coffee $coffee)\r\n    {\r\n        $this-&gt;coffee = $coffee;\r\n    }\r\n\r\n    public function getCost()\r\n    {\r\n        return $this-&gt;coffee-&gt;getCost() + 5;\r\n    }\r\n\r\n    public function getDescription()\r\n    {\r\n        return $this-&gt;coffee-&gt;getDescription() . ', whip';\r\n    }\r\n}\r\n\r\nclass VanillaCoffee implements Coffee\r\n{\r\n    protected $coffee;\r\n\r\n    public function __construct(Coffee $coffee)\r\n    {\r\n        $this-&gt;coffee = $coffee;\r\n    }\r\n\r\n    public function getCost()\r\n    {\r\n        return $this-&gt;coffee-&gt;getCost() + 3;\r\n    }\r\n\r\n    public function getDescription()\r\n    {\r\n        return $this-&gt;coffee-&gt;getDescription() . ', vanilla';\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c558d073314503-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c558d073314503-59\">59</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MilkCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Coffee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Coffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-14\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">', milk'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-19\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-20\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-21\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WhipCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Coffee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-22\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-24\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Coffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-34\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">', whip'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-39\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-40\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-41\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VanillaCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Coffee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-42\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-44\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Coffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-47\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-49\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-54\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">coffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">', vanilla'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c558d073314503-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c558d073314503-59\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0060 seconds] -->\r\n<p>下面我们来做杯咖啡吧</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5591302339728\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$someCoffee = new SimpleCoffee();\r\necho $someCoffee-&gt;getCost(); // 10\r\necho $someCoffee-&gt;getDescription(); // Simple Coffee\r\n\r\n$someCoffee = new MilkCoffee($someCoffee);\r\necho $someCoffee-&gt;getCost(); // 12\r\necho $someCoffee-&gt;getDescription(); // Simple Coffee, milk\r\n\r\n$someCoffee = new WhipCoffee($someCoffee);\r\necho $someCoffee-&gt;getCost(); // 17\r\necho $someCoffee-&gt;getDescription(); // Simple Coffee, milk, whip\r\n\r\n$someCoffee = new VanillaCoffee($someCoffee);\r\necho $someCoffee-&gt;getCost(); // 20\r\necho $someCoffee-&gt;getDescription(); // Simple Coffee, milk, whip, vanilla</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5591302339728-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5591302339728-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SimpleCoffee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-2\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 10</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-3\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Simple Coffee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MilkCoffee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-6\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 12</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-7\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Simple Coffee, milk</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-9\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WhipCoffee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-10\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 17</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-11\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Simple Coffee, milk, whip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-12\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-13\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VanillaCoffee</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5591302339728-14\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 20</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5591302339728-15\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">someCoffee</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Simple Coffee, milk, whip, vanilla</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p></p>\n<h3>📦 外观模式</h3>\n<h4>现实生活示例</h4>\n<p>请问你会如何打开计算机呢？你会回答：“按电源键就行！”。你会这样想是因为你在使用计算机对外提供的简易接口，但是在内部，计算机完成了很多工作后才得以启动，这种复杂子系统的简单接口就是外观模式。</p>\n<h4>概述</h4>\n<p>外观模式提供了一个简化复杂系统的简单接口。</p>\n<h4>维基百科</h4>\n<p>外观模式是指针对像类库这种大体积代码提供简化接口的对象。</p>\n<p><strong>程序示例</strong></p>\n<p>以上面提到的计算机为例，给出计算机类</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5594463541983\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Computer\r\n{\r\n    public function getElectricShock()\r\n    {\r\n        echo \"Ouch!\";\r\n    }\r\n\r\n    public function makeSound()\r\n    {\r\n        echo \"Beep beep!\";\r\n    }\r\n\r\n    public function showLoadingScreen()\r\n    {\r\n        echo \"Loading..\";\r\n    }\r\n\r\n    public function bam()\r\n    {\r\n        echo \"Ready to be used!\";\r\n    }\r\n\r\n    public function closeEverything()\r\n    {\r\n        echo \"Bup bup bup buzzzz!\";\r\n    }\r\n\r\n    public function sooth()\r\n    {\r\n        echo \"Zzzzz\";\r\n    }\r\n\r\n    public function pullCurrent()\r\n    {\r\n        echo \"Haaah!\";\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5594463541983-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5594463541983-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Computer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getElectricShock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Ouch!\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeSound</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Beep beep!\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-12\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">showLoadingScreen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Loading..\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Ready to be used!\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-22\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">closeEverything</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Bup bup bup buzzzz!\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sooth</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Zzzzz\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-32\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pullCurrent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Haaah!\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5594463541983-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5594463541983-37\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>下面是计算机的外观</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c5598338432519\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass ComputerFacade\r\n{\r\n    protected $computer;\r\n\r\n    public function __construct(Computer $computer)\r\n    {\r\n        $this-&gt;computer = $computer;\r\n    }\r\n\r\n    public function turnOn()\r\n    {\r\n        $this-&gt;computer-&gt;getElectricShock();\r\n        $this-&gt;computer-&gt;makeSound();\r\n        $this-&gt;computer-&gt;showLoadingScreen();\r\n        $this-&gt;computer-&gt;bam();\r\n    }\r\n\r\n    public function turnOff()\r\n    {\r\n        $this-&gt;computer-&gt;closeEverything();\r\n        $this-&gt;computer-&gt;pullCurrent();\r\n        $this-&gt;computer-&gt;sooth();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c5598338432519-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c5598338432519-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ComputerFacade</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">computer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Computer</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">computer</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">computer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">turnOn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getElectricShock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">makeSound</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">showLoadingScreen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">bam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">turnOff</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">closeEverything</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">pullCurrent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sooth</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c5598338432519-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c5598338432519-24\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>可以这样使用外观模式</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c559b846919471\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$computer = new ComputerFacade(new Computer());\r\n$computer-&gt;turnOn(); // Ouch! Beep beep! Loading.. Ready to be used!\r\n$computer-&gt;turnOff(); // Bup bup buzzz! Haah! Zzzzz</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c559b846919471-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559b846919471-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559b846919471-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c559b846919471-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">computer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ComputerFacade</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Computer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559b846919471-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">turnOn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Ouch! Beep beep! Loading.. Ready to be used!</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559b846919471-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">computer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">turnOff</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Bup bup buzzz! Haah! Zzzzz</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3>🍃 享元模式</h3>\n<h4>现实生活示例</h4>\n<p>你是否在某个摊位上喝过茶？店主总是会多做一些茶，以预留给其他顾客，以此来节省资源比如燃气。享元模式所讲的就是共享。</p>\n<h4>概述</h4>\n<p>享元模式通过相似对象之间尽可能的资源共享，来最小化内存使用或计算开销。</p>\n<h4>维基百科</h4>\n<p>在计算机编程中，享元模式是一种软件设计模式。享元模式是通过与其他类似对象共享尽可能多的数据来最小化内存使用的对象; 当简单的重复对象过多占用内存时，可以通过享元模式来处理大量相似对象的情况。</p>\n<p><strong>程序示例</strong></p>\n<p>以茶为例，首先定义茶的种类及茶具</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c559f317390078\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Anything that will be cached is flyweight.\r\n// Types of tea here will be flyweights.\r\nclass KarakTea\r\n{\r\n}\r\n\r\n// Acts as a factory and saves the tea\r\nclass TeaMaker\r\n{\r\n    protected $availableTea = [];\r\n\r\n    public function make($preference)\r\n    {\r\n        if (empty($this-&gt;availableTea[$preference])) {\r\n            $this-&gt;availableTea[$preference] = new KarakTea();\r\n        }\r\n\r\n        return $this-&gt;availableTea[$preference];\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c559f317390078-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c559f317390078-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-1\"><span class=\"crayon-c\">// Anything that will be cached is flyweight.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-2\"><span class=\"crayon-c\">// Types of tea here will be flyweights.</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">KarakTea</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-7\"><span class=\"crayon-c\">// Acts as a factory and saves the tea</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-8\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TeaMaker</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-9\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">availableTea</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">make</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">preference</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">empty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">availableTea</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">preference</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">availableTea</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">preference</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">KarakTea</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">availableTea</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">preference</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c559f317390078-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c559f317390078-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>然后定义茶店来接单及提供服务</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c55a2582854800\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass TeaShop\r\n{\r\n    protected $orders;\r\n    protected $teaMaker;\r\n\r\n    public function __construct(TeaMaker $teaMaker)\r\n    {\r\n        $this-&gt;teaMaker = $teaMaker;\r\n    }\r\n\r\n    public function takeOrder(string $teaType, int $table)\r\n    {\r\n        $this-&gt;orders[$table] = $this-&gt;teaMaker-&gt;make($teaType);\r\n    }\r\n\r\n    public function serve()\r\n    {\r\n        foreach ($this-&gt;orders as $table =&gt; $tea) {\r\n            echo \"Serving tea to table# \" . $table;\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a2582854800-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a2582854800-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TeaShop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">orders</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">TeaMaker</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-10\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">takeOrder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaType</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">orders</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">make</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaType</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">serve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">foreach</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">orders </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">tea</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Serving tea to table# \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a2582854800-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a2582854800-22\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>下面可以这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c55a6856826661\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$teaMaker = new TeaMaker();\r\n$shop = new TeaShop($teaMaker);\r\n\r\n$shop-&gt;takeOrder('less sugar', 1);\r\n$shop-&gt;takeOrder('more milk', 2);\r\n$shop-&gt;takeOrder('without sugar', 5);\r\n\r\n$shop-&gt;serve();\r\n// Serving tea to table# 1\r\n// Serving tea to table# 2\r\n// Serving tea to table# 5</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a6856826661-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a6856826661-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a6856826661-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a6856826661-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a6856826661-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a6856826661-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a6856826661-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a6856826661-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a6856826661-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55a6856826661-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55a6856826661-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c55a6856826661-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TeaMaker</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a6856826661-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TeaShop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">teaMaker</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a6856826661-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a6856826661-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shop</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">takeOrder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'less sugar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a6856826661-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shop</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">takeOrder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'more milk'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a6856826661-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shop</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">takeOrder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'without sugar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a6856826661-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a6856826661-8\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shop</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">serve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a6856826661-9\"><span class=\"crayon-c\">// Serving tea to table# 1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55a6856826661-10\"><span class=\"crayon-c\">// Serving tea to table# 2</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55a6856826661-11\"><span class=\"crayon-c\">// Serving tea to table# 5</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3>🎱 代理模式</h3>\n<h4>现实生活示例</h4>\n<p>有没有过使用门禁卡进门的经历呢？打开门的方法有多种，既可以使用门禁卡，也可以按下门上的安全按钮。门的主要功能是打开，但在其上添加一个代理，便可以给门添加一些功能。下面的代码示例可以给出更好的解释。</p>\n<h4>概述</h4>\n<p>使用代理模式，一个类可以代理另外一个类的功能。</p>\n<h4>维基百科</h4>\n<p>一个代理，其最一般的形式，是一个作为其他类接口的类。代理是由客户端调用的包装器或代理对象，用来访问幕后的真实服务对象。使用代理可以简单地向真实对象做转发，或者可以提供额外的逻辑。在代理模式中，可以提供额外的功能，例如当在真实对象上的操作是资源密集型时进行缓存，或者在调用真实对象的操作之前进行预处理。</p>\n<p><strong>程序示例</strong></p>\n<p>以安全门为例，首先给出安全门接口及实现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c55aa224859703\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Door\r\n{\r\n    public function open();\r\n    public function close();\r\n}\r\n\r\nclass LabDoor implements Door\r\n{\r\n    public function open()\r\n    {\r\n        echo \"Opening lab door\";\r\n    }\r\n\r\n    public function close()\r\n    {\r\n        echo \"Closing the lab door\";\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55aa224859703-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55aa224859703-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-7\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LabDoor</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Opening lab door\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Closing the lab door\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55aa224859703-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55aa224859703-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>然后使用代理来确保门的安全</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c55ad721885042\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Security\r\n{\r\n    protected $door;\r\n\r\n    public function __construct(Door $door)\r\n    {\r\n        $this-&gt;door = $door;\r\n    }\r\n\r\n    public function open($password)\r\n    {\r\n        if ($this-&gt;authenticate($password)) {\r\n            $this-&gt;door-&gt;open();\r\n        } else {\r\n            echo \"Big no! It ain't possible.\";\r\n        }\r\n    }\r\n\r\n    public function authenticate($password)\r\n    {\r\n        return $password === '$ecr@t';\r\n    }\r\n\r\n    public function close()\r\n    {\r\n        $this-&gt;door-&gt;close();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55ad721885042-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55ad721885042-28\">28</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Security</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Door</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">authenticate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Big no! It ain't possible.\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-18\"> </div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">authenticate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">password</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'$ecr@t'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55ad721885042-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55ad721885042-28\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>可以这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a089c55b1217461924\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$door = new Security(new LabDoor());\r\n$door-&gt;open('invalid'); // Big no! It ain't possible.\r\n\r\n$door-&gt;open('$ecr@t'); // Opening lab door\r\n$door-&gt;close(); // Closing lab door</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a089c55b1217461924-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55b1217461924-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55b1217461924-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a089c55b1217461924-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a089c55b1217461924-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a089c55b1217461924-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Security</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LabDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55b1217461924-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'invalid'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Big no! It ain't possible.</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55b1217461924-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a089c55b1217461924-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'$ecr@t'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Opening lab door</span></div><div class=\"crayon-line\" id=\"crayon-5983a089c55b1217461924-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Closing lab door</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>另一个例子是实现某种数据映射器。例如，我最近使用这种模式为 MongoDB 做了一个 ODM（对象数据映射器），其中我使用魔术方法<code>__call（）</code> 在 mongo 类上编写代理。所有的方法调用被代理到原始的 mongo 类，并且检索的结果原样返回，但如果调用 <code>find</code> 或 <code>findOne</code> ，数据会被映射到所需的类对象，并且返回了对象而不是<code>Cursor</code>。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/a9e67955472c1afcad111aa202984192.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111798\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111798votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111798\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/justin_ygg\">Justin(李加庆)</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/justin_ygg\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/4302cabf679254e36d325f1d9185b6c72.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Python工程师一枚，对go、docker感兴趣，还在成长ing~~        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/justin_ygg\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/justin_ygg/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/justin_ygg/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "52be25117b0479b1012ef04dcc262667", "front_image_path": "full/36430ccefda2f0d333a3bbac206945b3528bf1aa.jpg"}
{"title": "代码写的好，出过畅销书，还拿过赛车冠军，这是一种什么体验？", "url": "http://blog.jobbole.com/111892/", "create_date": "2017/07/18", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fhns9tpacyj20h30b4wg9.jpg"], "fav_count": 2, "comment_count": 5, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>问：代码写的好，出过畅销书，并且还拿过赛车冠军，这是一种什么体验？</p>\n<p>答：这事得问 DHH。什么？你不知道 DHH 是哪个程序员，那你更得看看这篇文章了。😀</p>\n<p>（ps：以前伯乐在线扩散《<a href=\"http://blog.jobbole.com/110811/\" target=\"_blank\">我是小有成就，但我过不了白板面试</a>》这篇文章时，曾有读者问 DHH 是何许人也。）</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhnu0fdsm9j20dw09bgos.jpg\"></p>\n<p>DHH 是一个丹麦程序员，全名是 David Heinemeier Hansson，DHH 是他的全名首字母缩写，也是他常用的网名。1979 年 10 月 15 日出生在哥本哈根。</p>\n<h3>Ruby On Rails 的诞生</h3>\n<p>1999 年，20 岁的 DHH 成立了一个丹麦语的游戏资讯和社区网站 Daily Rush，一直运营到 2001 年。</p>\n<p>后来因其 PHP 编程能力，吸引到 37signals 联合创始人 Jason Fried 的注意，后被 Jason 招入37signals 开发一个在线版的项目管理工具。该工具也就是后来 37signals 的 SasS 产品 Basecamp。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fhnuqwp1i0j21kw0w0ajk.jpg\" width=\"601\" height=\"338\"></p>\n<p style=\"text-align: center;\">（图：37signals 联合创始人 Jason Fried）</p>\n<p>为了加速 Basecamp 开发，DHH 用 Ruby 开发了一个框架，即 Ruby On Rails。2004 年 7 月，DHH 把 Rails 从 Basecamp 中剥离出来，并且开源。Rails 初期并没有开放 commit 权限，2005 年 2 月才向外开放。</p>\n<p>因其 Rails 的贡献，DHH 获得 Google 和 O’Reilly 联合颁发的「2005 年度最佳 Hacker」奖。</p>\n<p>2006 年 8 月，Rails 迎来一个重要里程碑，苹果公司宣布 Mac OS X v10.5 Leopard 预装 Rails 框架。</p>\n<p>2007 年，DHH 注册了 3 个商标：RUBY ON RAILS 短语、RAILS 以及 Rails 官方标志。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fhnw217rahj20go0gogm2.jpg\" width=\"300\" height=\"300\"></p>\n<p>Rails 的（企业）用户很多，包括 GitHub、Shopify、 Airbnb 和 Square 等。</p>\n<h3>移居美国</h3>\n<p>2005 年，DHH 从哥本哈根商学院毕业，拿到计算机科学和企业管理双学位。同年 11 月，从丹麦移居到美国芝加哥。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhns0wk3zrj20jb0avt9s.jpg\" width=\"601\" height=\"338\"></p>\n<p>DHH 后来成为了 37signals 的联合创始人兼 CTO。</p>\n<p>37signals 公司在 2014 年更名为 Basecamp。</p>\n<h3>写书</h3>\n<p>DHH 和 Jason 合著了 3 本畅销书：</p>\n<p>2006 年的《<a href=\"http://gettingreal.37signals.com/\" target=\"_blank\">Getting Real</a>》，2010 年的《Rework》，和 2013 年的《Remote》。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fho1d0td36j20im0cewg8.jpg\" width=\"601\" height=\"400\"></p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fho1d0b23lj20ic0cqt9o.jpg\" width=\"601\" height=\"417\"></p>\n<h3>赛车</h3>\n<p>DHH 有两大业余爱好：赛车和摄影。</p>\n<p>从 2013 年到 2017 年，连续 5 年参加国际汽联世界耐力锦标赛（FIA WEC）。2014 年，在「勒芒 24 小时耐力赛」个人排名 82 位。他所在车队赢得 GTE-AM 组的冠军。</p>\n<p>补充介绍：</p>\n<blockquote><p>勒芒 24 小时耐力赛：3 位车手为一个车组，驾驶一台赛车，完成连续 24 个小时的竞赛。它和世界一级方程式锦标赛(F1)、世界汽车拉力锦标赛(WRC)，并称为世界最著名和最艰苦的三大汽车赛事。</p>\n<p>勒芒耐力赛分 4 个组别：LMP1、LMP2、GTE-PRO，GTE-AM。</p>\n<p>GTE-AM：允许封闭座舱以及开放式座舱，2车门，2或2+2坐席，所使用的赛车为市面上可以够买到的量产车改装而成，但赛车车龄必须大于 12 个月，每辆车内必须包含有业余车手。</p></blockquote>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhns9tpacyj20h30b4wg9.jpg\" width=\"600\" height=\"390\"></p>\n<blockquote><p>注意 DHH 的赛车服，前胸的 Basecamp.com、脖颈的 Basecamp.com 和 logo，还有左臂的 37signals logo，开车还不忘给自家公司做宣传。´</p></blockquote>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhns9sfhyuj20rs0fu75o.jpg\" width=\"600\" height=\"342\"></p>\n<p>五年来，DHH 参加 FIA WEC 36 场比赛，16 次上领奖台，赢过 6 次分站冠军，2 次锦标赛亚军，1 次锦标赛冠军。</p>\n<p>5 次参加勒芒耐力赛（无退赛），3 次上领奖台，获得 1 次冠军。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fho726yopzj21kw1kwqow.jpg\" width=\"640\" height=\"640\"></p>\n<p style=\"text-align: center;\">（DHH 参加比赛的车）</p>\n<h3>摄影</h3>\n<p>除了赛车，DHH 还有一大爱好 —— 摄影。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fho3eotjxrj20hs0bvadi.jpg\" width=\"640\" height=\"427\"></p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fho3es3f93j20hs0bwjv1.jpg\" width=\"640\" height=\"428\"></p>\n<p>DHH 已婚，妻子 Jamie。他们有 2 个儿子：Colt 和 Dash。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fho7266uh9j20m80m81i9.jpg\" width=\"690\" height=\"690\"></p>\n<p>DHH 一家四口的时间，主要在芝加哥、加州的马里布，西班牙的马贝拉之间切换度过。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111892\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111892votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111892\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 249</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "a91e0b50334a75b7a782e2c16dff83d3", "front_image_path": "full/0f76dcd24f8a5d0095b676d974e274b9e9914d81.jpg"}
{"title": "漫画算法：什么是 B 树？", "url": "http://blog.jobbole.com/111757/", "create_date": "2017/07/09", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/07/f4156a04d1ce10e1d6b6e119ce1fc3db.jpg"], "fav_count": 11, "comment_count": 2, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/bjweimengshu\">玻璃猫</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<blockquote><p>伯乐在线补充：本文提到的「B-树」，就是「B树」，都是 B-tree 的翻译，里面不是减号-，是连接符-。因为有人把 B-tree 翻成 「B-树」，让人以为「B树」和「B-树」是两种树，实际上两者就是同一种树。</p></blockquote>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/f4156a04d1ce10e1d6b6e119ce1fc3db.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/fc713400ca8ce73e4d4f7b656974a270.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/98d1b3066e41fa6e28ad131e4f04f2d5.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/4cb37c6fcae8dbb405cb4b8ed10112aa.jpg\" alt=\"\"></p>\n<p>————————————</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/70f82597c6205ae0b915cf9446605986.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/fbb934ec8ef90054d26303d34bb27a24.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/616f5e86b4cf206dcfee036fd55e9602.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ce70b97a696efa28520a19e5adea080c.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/54f122a98313bd4f61c2e95d9858eaf6.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/06556ae2f9f1dbf3bc798b350a97290a.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/b159585a12d50e1fbfffa2d892fde68f.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/40fb54cfbec0e48c40e3f01d79f2cc3e.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/89cca300c77afb89a592d252de98f012.jpg\" alt=\"\"></p>\n<p>————————————</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/f2ab28eb6aa7b3efce6c000aed8ccba2.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/29249cf3f3edddb4eb738a4b05eff361.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0264f0d13bce4acf176e0e67412e02d8.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/093de5649072fa0e9118d6b47ea4c39f.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0aa46ad4cff77069122a89d83238dd02.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/1516c8202da7f5df1ba479edeff75d9e.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/70d834f21e6e7a482270817f1ef9b66a.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/6a5c3760c3b6375ab7f3db270c833205.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/423081a186bb730f6246d4fc88fe8397.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/35e21257dd7649cbf648f8a12c9526bf.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/be4e8c9eea941021983b3a0ec2e30fe7.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/c8115df892823961e16b58e50f2745f7.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/3fc378e0a26f0a455b5de0c2b9085d0e.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/2540a2a93236be26570e7cfed001dd0c.jpg\" alt=\"\"></p>\n<p><strong>二叉查找树的结构：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a48d291a87e8f7451d7096f06c28a266.jpg\" alt=\"\"></p>\n<p><strong>第1次磁盘IO：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/c3afbbed4dc8d9ab0eb28f36c525eb64.jpg\" alt=\"\"></p>\n<p><strong>第2次磁盘IO：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/eaaadd8563fe9c2ce028b356b4b1b972.jpg\" alt=\"\"></p>\n<p><strong>第3次磁盘IO：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/29510bc7455978e0a4b76538c481d211.jpg\" alt=\"\"></p>\n<p><strong>第4次磁盘IO：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e776aad15f9db6791ed4ece4cebf179b.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/519a5ecae2049027e151f56404221cd6.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/57a3d2232bdc3602101d26de6af70629.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/dfe811439d5a4b83908d1aece65b2858.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a551a5af0899d0f4487d5174c879fbee.jpg\" alt=\"\"></p>\n<p><strong>下面来具体介绍一下B-树（Balance Tree），一个m阶的B树具有如下几个特征：</strong></p>\n<p>1.根结点至少有两个子女。</p>\n<p>2.每个中间节点都包含k-1个元素和k个孩子，其中 m/2 &lt;= k &lt;= m</p>\n<p>3.每一个叶子节点都包含k-1个元素，其中 m/2 &lt;= k &lt;= m</p>\n<p>4.所有的叶子结点都位于同一层。</p>\n<p>5.每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域分划。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/3bdde769e986c29df17ee5a05e2283f5.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/1053258e35bc3a11daa6a35c0a4876a5.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/7b6f7416cab11f23fa141cbcbe5ae97b.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e4bab35b22e04f408f20d9d78dd1ada7.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/1da23fc560320dd7fc33c4250f7bc62f.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a18c14c033cc7773cbc5417b47c8433e.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e00c03897682ce16665f1fc6a103fae5.jpg\" alt=\"\"></p>\n<p><strong>第1次磁盘IO：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a9bff5a34ad1b721c406d49aa5f71c7f.jpg\" alt=\"\"></p>\n<p><strong>在内存中定位（和9比较）：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e7aad0107f143df4d294f6d4ddc2efca.jpg\" alt=\"\"></p>\n<p><strong>第2次磁盘IO：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/55f9ffb7ec69c5624d3d38c3e487619f.jpg\" alt=\"\"></p>\n<p><strong>在内存中定位（和2，6比较）：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/7181bf7db0d93d67a6d19e98bdec086a.jpg\" alt=\"\"></p>\n<p>第3次磁盘IO：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/c7d939ddbd73ea5a28ab7c895e996d1e.jpg\" alt=\"\"></p>\n<p><strong>在内存中定位（和3，5比较）：</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/6e00c658824f6979d5c2a6526adcdd07.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/6a8d6dd48be32ff61f0a20955c3f1231.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e067432832fd13a46e588a4165f6f2e9.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/150acc7b44a31e028d53b97e44e6a7f7.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/301f7f8c3add3183aa7fcc85a6ac584c.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/07469afd080afb68036063ba808965f1.jpg\" alt=\"\"></p>\n<p>自顶向下查找4的节点位置，发现4应当插入到节点元素3，5之间。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/b19105d47fd35c8b0d1e7ed2248bdaa0.jpg\" alt=\"\"></p>\n<p>节点3，5已经是两元素节点，无法再增加。父亲节点 2， 6 也是两元素节点，也无法再增加。根节点9是单元素节点，可以升级为两元素节点。于是<strong>拆分</strong>节点3，5与节点2，6，让根节点9升级为两元素节点4，9。节点6独立为根节点的第二个孩子。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/1a708a324257d422e594224c6f7afad4.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/60daf22a13c44bec7cd0384a04fe9e12.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ebf569b446c84c77405395ea1503477c.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ed7fea3cc0eeab4fac24420dfa6a57c0.jpg\" alt=\"\"></p>\n<p>自顶向下查找元素11的节点位置。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ca7856622c48d55fbf9502f4ef8219b7.jpg\" alt=\"\"></p>\n<p>删除11后，节点12只有一个孩子，不符合B树规范。因此找出12,13,15三个节点的中位数13，取代节点12，而节点12自身下移成为第一个孩子。（这个过程称为<strong>左旋</strong>）</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/f5f4b28523d3d381b63c11b7ab3ac7d3.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/8d567b18da9582a3dbed613232117001.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/7041d2780cb7fa9bf64af19b6476dc2f.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/04191ffe9d9fa92c54b4375b8b3da210.jpg\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0fd1168e35ccc3953584f971f38c75b5.jpg\" alt=\"\"></p>\n</div>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/2df4a3ede6e684f78858dfde0e7b118f.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111757\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111757votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111757\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 11 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/bjweimengshu\">玻璃猫</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/bjweimengshu\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/7ce4028f2cece3294efcb3e5caa73af1.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            互联网公司的码农一枚，喜欢算法和面向对象设计。个人微信号：13522239721 个人订阅号：dreamsee321欢迎一起交流讨论！        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/bjweimengshu\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/bjweimengshu/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/bjweimengshu/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 94</a> · <a title=\"个人微信：bjweimengshu\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "fd842a72622552f4dffcc903ae3af9b5", "front_image_path": "full/3f0be7614d3c4b769873121d69a7e1ad5ae8b755.jpg"}
{"title": "程序员偷偷自动化，每周才工作几小时却拿全薪，这样道德么？", "url": "http://blog.jobbole.com/111742/", "create_date": "2017/07/06", "front_image_url": ["http://ww2.sinaimg.cn/mw690/63918611gw1f5idukigfrj20fw07yt9o.jpg"], "fav_count": 7, "comment_count": 7, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.sciencealert.com/programmers-are-secretly-automating-their-jobs-and-only-working-a-few-hours-a-week\">Julie Bort</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>就在上周，程序员们在 StackExchange 上有<a href=\"https://workplace.stackexchange.com/questions/93696/is-it-unethical-for-me-to-not-tell-my-employer-i-ve-automated-my-job/94099#94099\" target=\"_blank\">激烈的讨论</a>，如果偷偷把自己的工作自动化，是不是不道德？</p>\n<p><img class=\"alignnone\" src=\"http://ww2.sinaimg.cn/mw690/63918611gw1f5idukigfrj20fw07yt9o.jpg\" width=\"572\" height=\"286\"></p>\n<p>这次讨论的源于 Etherable 于 6 月 27 日在 StackExchange 上发的一个帖子，全文翻译如下：</p>\n<blockquote><p>我目前在给一家公司的遗留系统工作。这个系统真的是很老了，尽管我的角色是程序员，但我大部分工作却是美化数据。总结一下，我有一堆需求，实际上是每月电子表格中的大量数据，我必须把系统配置好，保证运行。这工作基本就是编写一大堆的 SQL 脚本。</p>\n<p>不过这并不是一份很简单的活，因为最初开发这个系统的人写反了。实际上，创建电子表单的分析师要花很多时间来验证我的工作。原因是我这活太繁杂，易出错。</p>\n<p>正如你猜到的，这活非常枯燥。然而，这份全职工作薪水可观，并且允许远程，我还可以陪儿子。</p>\n<p>这份工作我做到大概 18 个月的时候，我基本摸清了所有套路，然后我编写了一个自动化程序，并且我过去 6 个月的活，都是交给它了。所以，过去要 1 人做 1 个月的事，现在可能 10 分钟就可以了。</p>\n<p>现在的问题是，我是否应该告诉公司？如果我告诉他们了，他们或许采纳自动化程序，然后不要我了。这并不像是一个有着大量 IT 工作的公司，他们是有一个遗留系统，一直来保存所有的客户数据，他们只是需要有人来维护这个系统。</p>\n<p>同时，我也觉得自己做的不对。我的意思是，现在只要我拿到了（公司下发的）规范（spec），然后大约每周运行一次自动化程序。再上报我做完了一部分工作，让他们测试验证。我甚至插入了一些 Bugs，以便让结果看起来更像是人做出来的。</p>\n<p>虽然有时候规范需要修改，加上邮件来回沟通的时间，我每周的实际工作时间约 1-2 小时，但我拿的却是全薪。</p>\n<p>虽然我真的很享受多出来的自由时间，但如果这样不打招呼，继续这样偷偷地做下去，是不是不道德？ 这不比我在欺骗公司。公司从来没有表示他们对我的表现不满意，事实上，他们从雇用我中得到了他们想要的。</p></blockquote>\n<p>这位程序员（Etherable）说，他写了一些脚本，悄悄把原本一周的工作用不到两个小时就做完了，他开始感到有些愧疚了。</p>\n<p>公司雇他做的工作都完成了，但是由于是远程工作，也没告诉他老板脚本的事，因此他基本上整天都在陪儿子。他担心公司发现这些脚本然后解雇他，并非是出于道德原因，而是公司有了脚本以后就不再需要他了。</p>\n<p>他写道：</p>\n<blockquote><p>“不告诉我老板自动化工作的事，不道德吗？……</p>\n<p>你能想象，这大概是世界上最无聊的工作了。但是这也是一份薪水颇丰的全职工作，而且我可以远程工作，在家里陪我的儿子。</p>\n<p>所以我已经做了 18 个月了，在这期间，我差不多发现了所有的套路，在过去的六个月里写了一个程序来帮我完成全部工作。以前别人需要用一个月的时间来清理电子表格，用这个程序大概十分钟就能完成。</p>\n<p>现在的问题是，我要不要告诉他们？如果我说了，他们大概会拿走我的程序然后解雇我。”</p></blockquote>\n<p>还有一件事是：这位程序员也坦白，他会通过故意加一些错误来掩盖自动化的痕迹，“让它看起来像是人工完成的。”</p>\n<p>这个问题也发在了<a href=\"https://news.ycombinator.com/item?id=14656945\"> Hacker News</a> 上，引起了激烈的讨论。</p>\n<p>有趣的是，在参与评论的这几十个程序员中，人们分成了两大阵营：<strong>该行为道德和不道德</strong>。</p>\n<h3>你这不道德</h3>\n<p>Stack Overflow 上的人普遍倾向于这种情况不道德。一个叫 <a href=\"https://workplace.stackexchange.com/questions/93696/is-it-unethical-for-me-to-not-tell-my-employer-i-ve-automated-my-job#comment279618_93700\">Magisch</a> 的用户甚至说这位程序员在“诈骗你的老板”。</p>\n<p><a href=\"https://workplace.stackexchange.com/a/93704\">Joe Strazzere</a> 很好地总结了这一派的观点：</p>\n<ul>\n<li><strong>你用每周 1-2 个小时在家里工作（陪儿子），但是却拿着 40 个小时的工资</strong></li>\n<li><strong>你 6 个月前写的这个程序，但是到现在都没告知你的老板</strong></li>\n<li><strong>几乎每周你都在对你的工作成果撒谎</strong></li>\n<li><strong>你故意在程序里插入错误来挽救你的骗局</strong></li>\n<li><strong>你还要让创建表格的分析师花费相当多的时间来检查你的工作</strong></li>\n<li><strong>你承认“感觉自己做了错事”</strong></li>\n</ul>\n<blockquote><p>即使答案在我看来已经很明显了，但是你个人的道德标准让你得出了这样并没什么问题的结论。尽管我怀疑你知道真相……”</p></blockquote>\n<p>另一个<a href=\"https://workplace.stackexchange.com/a/94099\">程序员 SSight3</a> 承认他曾经也自动化做过类似的工作，但是他说自己不属于不道德的原因是，他告诉了他的老板：</p>\n<blockquote><p>“我的情况是，我本来是要做半年的无脑输入数据的工作，但是我自动化了这个过程并且把方法公开给了我的老板。我现在被分配到一个更适合我的天赋和能力的部门。”</p></blockquote>\n<p>他说这个自动化的工作最终使他免于部门的后期裁员。</p>\n<p>大多数站在认为此行为不道德的阵营的人坚信，即使他不能承认已经用这个脚本多久，以及他的工作时间有多短，他仍有义务告诉他的老板关于脚本的事。</p>\n<h3>错误的动机</h3>\n<p>但是 Hacker News 的朋友们提出了另一种观点。</p>\n<p>很多人认为，<strong>只要公司拿到了他们花钱想要的结果，那这个人用多少时间去完成都无所谓</strong>。尽管这个阵营的人也同意，故意制造一些 bug 确实是错的。</p>\n<p><a href=\"https://news.ycombinator.com/user?id=barrkel\">其中一个人写道</a>：“我不认为这里有什么道德问题，只有交易关系——支付工资，创造价值。如果公司用另一种方法能花更少的钱达到目的，它就会采用这种方法并解雇员工。这种事可以避免吗？这位员工正在为公司创造价值，他正在守护自己（和公司）讨价还价的底线，毕竟公司一直都在剥削员工。”</p>\n<p>另一位程序员表示他在做网页的时候也有<a href=\"https://news.ycombinator.com/item?id=14657663\">相似的境遇</a>，而且受到了负面的影响：</p>\n<blockquote><p>“他们想按小时付费给我，但是我协商要按页数付费。当然了，我是自动化完成工作的。但出乎我意料的是，即使他们花同样的钱得到了同样的结果，我们也明确地达成协议不按时间付费，而是按产量付费，他们还是很讨厌我写程序自动化工作。”</p></blockquote>\n<p>有人<a href=\"https://news.ycombinator.com/item?id=14657672\">指出</a>，在整个 IT 行业，自动化不是特例，而是规则。拿系统管理这个工作来说，这项工作是确保 IT 系统不出故障。“我知道很多系统管理员自动化完成大多数工作，他们自己只是做一些监控和维护，他们很棒，没人因为这件事儿指责他们，事实上，这是很好的实践。”</p>\n<p>另一个人<a href=\"https://news.ycombinator.com/item?id=14659048\">表示同意</a>。“作为一个系统管理员，我工作的 90% 都是自动化完成的。如果出了问题，我会一周七天 24 小时随叫随到，但是工作中的其他时间，我可以做做杂事，看看电影，玩玩游戏。我所知道的每个系统管理员，几乎都是这样的。”</p>\n<p>一个人说他<a href=\"https://news.ycombinator.com/item?id=14658785\">整个职业生涯</a>中都是自动化工作的，从没隐瞒过：</p>\n<blockquote><p>“五年前，我在一家大公司做着一份入门级的夜班。那六个月里，我几乎用脚本完成了所有工作，大部分时间都在看 Netflix，我也没花什么心思去隐瞒我没事做这件事。</p>\n<p>为此公司奖励我一次升职，然后我做了同样的事（自动化工作）并且又升职了两次。我现在的产出是从前的两倍多，我的职责是告诉别人如何自动化工作。”</p></blockquote>\n<p>一位程序员完美<a href=\"https://news.ycombinator.com/item?id=14662152\">总结</a>了 Hacker News 上的观点：</p>\n<blockquote><p>“他（发帖求助的程序员 Etherable）唯一的错误就是，没能充分利用他的才能和潜在的生产力。对此最好的解决办法，就是找一份更好的工作。”</p></blockquote>\n<p>技术人员对自动化工作并不陌生。2015 年，曾经有过这样一个程序员，他离开公司后才被发现自动化到了这样的程度：甚至连用咖啡机煮一杯拿铁都要自动化。详情请看《<strong><a href=\"http://blog.jobbole.com/95222/\" target=\"_blank\">超过 90 秒的任务不自动化，你好意思说自己是黑客？</a></strong>》</p>\n<p>有趣的是，编程对于需要长时间且难以忍受的工作来说是小有名气的。许多技术人员都这样工作。</p>\n<p>但显然也出现了这样的亚文化：一些人在做相反的事情，创造一些没有他们就进行不下去的工作。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/acb658caeaa7401d5d7d20f28a1eab52.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111742\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111742votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111742\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang\">刘唱</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/5f17a18404975a50e3a341f2f8e27d59.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            数据挖掘研究生        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/liuchang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/liuchang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 37</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://blog.csdn.net/github_36299736\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2577872237\"><i class=\"fa fa-weibo\"></i></a> <a title=\"个人微信：learningDM\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "da181fa9746cff2a3a3ca3f1b082c055", "front_image_path": "full/55b1132af682daa4944e35728414d9d865d4670f.jpg"}
{"title": "累到想删库，程序员职业倦怠的真实现状", "url": "http://blog.jobbole.com/111762/", "create_date": "2017/07/10", "front_image_url": ["https://static1.squarespace.com/static/533ad9bde4b098d084a846b1/t/534f6e1ce4b09b70f38ee6c1/1432265542589/DSCF3147.jpg?format=500w"], "fav_count": 7, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.kennethreitz.org/essays/the-reality-of-developer-burnout\">kennethreitz</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：Kenneth Reitz 是一个知名的程序员，特别是在 Python 圈，他编写了 Requests / Records / Maya 等著名 Python 库，出过书《The Hitchhiker’s Guide to Python》。他在从 2001 年起就职于 Heroku，同时还是 Python 软件基金会董事会成员。对了，他以前还是个大胖子，2016 年后来减肥成功。他喜欢街拍，并且还是一个电子音乐制作人。</p>\n<p><img class=\"aligncenter\" src=\"https://static1.squarespace.com/static/533ad9bde4b098d084a846b1/t/534f6e1ce4b09b70f38ee6c1/1432265542589/DSCF3147.jpg?format=500w\" width=\"500\" height=\"333\"></p>\n<p>很不幸，倦怠在软件开发中是一个非常真实的现象，尤其是创立并维护一个具有大量用户的开源项目。就这个话题，我深有体会。所以我来分析我的个人经验。</p>\n<p>即使软件编程是你在这世上最喜欢的活动之一，每个整天写代码的人都会经历这样的事情，突然感觉“我想做别的事情，而不是坐在这写代码”。</p>\n<blockquote><p>你突然意识到，你已把冰激凌当成三餐，持续吃了好几年。你已厌倦了冰淇淋，不想再看到它。但偶尔吃冰淇淋的人不明白这一点，他们会想：你怎么会不想要冰淇淋了呢？—— Gary Bernhardt</p></blockquote>\n<p>我对软件开发的倦怠情况有一些个人经验，还有几个如何正视、防范和简单应对的小窍门。</p>\n<h3>目标的必然衰败</h3>\n<p>在 2011 年，我为自己设定了一些开源社区的目标后，我很努力地为此工作，有着好运相伴，我取得了成功（特别是 Requests 项目）。随着项目的人气不断攀升，我对继续创建新项目的动力下降了。同时，为了满足成功项目带来的大量用户群所提出的要求，我的负担越来越重，而维护项目的压力也在不断增加。</p>\n<p>这是我想要的，是吗？</p>\n<blockquote><p>倦怠十分狡猾，它悄然而至。它慢慢地折磨你，直到你认为这种感觉已经成为了新常态，这时你再也无法轻易跳出自己挖的坑了。—— Zach Holman</p></blockquote>\n<h3>410 GONE 网络失踪</h3>\n<p>我记得曾经有一次，我躺在沙发上，也就是我现在坐的地方，一边解决新出现的慢性偏头痛 (NDPH)，一边回顾我的生活。就像看推文一样，我不断地刷新并思考过当时软件世界中的一些政治问题，我发现自己对这些事情非常紧张，这本身就是一个问题。不仅如此，而且我过于在意我在推特上关注的人提出的公开观点，</p>\n<p>一旦我认识到这一点，我立刻意识到这是一个很严重的问题，必须立即停止它。我的第一个想法是提出所谓的“410 错误”情况。当然，我没有这样做，但是我很重视这个问题。</p>\n<blockquote><p>410 GONE 是 Mark Pilgrim 的一个沸沸扬扬的举动，他作为 Python 的开发者以及一个普通人，因为一些未知的原因，选择将自己从开发者社区隔离。我认为这可能是因为他感受到了来自开源“领导者”地位的压力，想要保持自己的身份认同。他突然从互联网上删除了所有的公共代码，这样所有的用户只能重新定向，访问其他非官方镜像。</p>\n<p>伯乐在线补注：Mark Pilgrim 是《Dive into Python | 深入 Python》的作者。他不仅删代码，并且他的社交账号 GitHub、Google+、Reddit、Twitter，也全部清空了。</p></blockquote>\n<p>在我看来，这是倦怠周期的缩影以及最坏的情况。我差一点就从 GitHub 上删除所有的项目，从 SpeakerDeck 上删除所有演讲的幻灯片，搞掉我自己的网站，然后在平静的生活中继续前进。</p>\n<p>但最后我没有这样做，为什么？因为这些是世界上对我最重要的事情。为什么我要破坏那些我努力创造、引以为傲的东西？</p>\n<h3>“只发布”模式</h3>\n<p>所以，我决定找到问题的根源，并解决它们。我意识到，我的世界已经挤入太多人，没有委派足够的人手，并且需要他人的帮助来维持我的项目。我不想失去我在社区中珍视的位置，它能够影响这个我极其重视的世界。</p>\n<p>所以，我选择取消关注推特上的所有人。我停止关注科技趋势，也不再阅读 Hacker News。我进入了“只发布”模式。</p>\n<p>这是一个重大的举措，就和我见过的很多其他开发者一样（一般比较隐晦，并不明确），这是一个从开源软件开发中，缓解压力的好方法。远离喧嚣，善待自己。</p>\n<p>今天，我在社交媒体上关注了一些人，人数不多，但足以让我处于一个相对较忙的状态，而过去很长一段时间我都过于忙碌了。这一切很容易就能实现。</p>\n<h3>委派</h3>\n<p>当成千上万的活跃用户使用你的软件，或即使只有你的同事时，你很容易感到懈怠，因为你是项目的唯一联系人。所以，我已经学会以新的方式委托并加强合作。</p>\n<p>针对 Requests 项目，我有两个合作维护者，他们帮忙处理收到的问题（issues），并解决诸如安全更新的事情。这大大降低了项目施加在我身上的压力，也帮助他们成为了 Python 社区的活跃分子。</p>\n<h3>我今天的平衡生活</h3>\n<p>所有的这些都是许多年前的事了，如今我的生活已经取得了一个良好的平衡。我在个人的兴趣爱好，如音乐制作、摄影上花费了大量的空闲时间（我甚至今年要出一张专辑）。我今年出版了一本书，另一个人花了大量的时间与精力参与其中，这本书的出版离不开他/她的鼎力相助。</p>\n<p><span style=\"color: #ff0000;\">有着写代码以外的爱好，实在是太重要了。</span></p>\n<p>我没有和往常那样，将编程作为一项娱乐消遣的工作，但我将再一次重新出发。我不觉得现在缺少了什么，但我的夜生活已经不同往昔，不再 100% 被代码完全占据了。</p>\n<p>开源的本质就是合作/协作。如果你发现自己倦怠了，累了，也许你需要找到一种与他人协作的新方式，来帮助你做最好的事情。你会发现，其他人可以通过做他们擅长的事，来帮助你做自己擅长的事。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111762\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111762votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111762\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 29</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "22720e0ebb8efa08e36bb42b57357be2", "front_image_path": "full/5e8775a4506c4ad37e2e965d436efb7888507510.jpg"}
{"title": "写给自学者的入门指南", "url": "http://blog.jobbole.com/112052/", "create_date": "2017/08/02", "front_image_url": ["http://insights.thoughtworkers.org/wp-content/uploads/2017/07/1-story-1024x595.jpg"], "fav_count": 6, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<p>在 IT 工程师和培训机构多如牛毛的时代，拜师学艺并不难。但自学编程对于毫无基础的同学来说却可能是个问题，相信有过类似经历的朋友都有一把辛酸泪和一肚不吐不快的体会。让我们从一个故事说起…</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/1-story-1024x595.jpg\" alt=\"\" width=\"700\" height=\"407\"></p>\n<h3>故事</h3>\n<p>某君在一个普通大学读着自己不喜欢的专业，以打游戏、刷段子和睡觉度日，突然有一天想学点什么。学编程好像挺酷，而且听说IT行业充满了机会，没准一不小心就和大佬一起“改变世界”了。</p>\n<p>那么第一个问题来了，他该选择什么语言？</p>\n<p>是世界上最好的语言 PHP？还是语言之母的 C？幸好还知道个编程语言排行榜，找到一看、几十种不带重样，这要逼死天秤座的小朋友。选 PHP 吧？上非诚勿扰都要被灭灯，而且就只能做个网页。万般纠结之后我们选 C 吧，听起来既高级又底层，说不准还能考个计算机二级。</p>\n<p>接下来得干正事儿了。在这个便捷的网络时代，自学可选择的方式非常丰富。除了在网络上收集资料、阅读干货外，某君还向一些前辈咨询了自学的方法。</p>\n<p>网络上流传的编程学习方式有：</p>\n<ul>\n<li>看书（这是最容易想到的方法）</li>\n<li>观看视频教程</li>\n<li>阅读官网文档</li>\n<li>读源码</li>\n<li>到大学蹭课或者报名培训（不知道还算不算自学，没交学费都算吧？）</li>\n</ul>\n<p>某君又得纠结一番了，大学蹭课和培训并不一定有合适条件，且不符合自学的气质；观看视频教程，前辈们觉得比较low；阅读官网文档和源码，这不适合初学者。总得来说看书算是比较中肯的方法，至于看什么书呢，前辈推荐了《C Primer Plus》，据说是学习C语言的经典之作。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/2-C-Primer-Plus-1-1024x572.jpg\" alt=\"\" width=\"700\" height=\"391\"></p>\n<p>好吧，不再纠结，直接啃这本大部头，虽然有人说看原版好一些，但是实在能力有限、还是看中文版吧。一口气花了一周时间读完这本书，果然是经典，变量、语句、条件判断甚至指针都知道怎么回事了。</p>\n<p>某君决定按照书中的说法实践一下了，于是打开了记事本，折腾很久装了GCC，把书上的第一个例子抄了下来，在控制台的小黑窗输出了“Hello World”，成就感满满。决定上手写点高级的的东西一试身手，合上书。咦，为什么会报错？哦，原来少个分号。不禁陷入思考：为什么学了两个月还是只能在这个黑窗口算算秋水仙数？网友还说要看官网文档、要读源码、要看英文原版，我一样都不能做到，我一定是能力不够，编程果然是天才做的事情……</p>\n<h3>正经话</h3>\n<p>上面的故事是我编的，但其中的纠结却是自学者或多或少都经历过的。实际上，IT从业者并不像传说中那样需要天才般的智商，要点在于能否找到合适的入门途径，再加上一点点坚持和思考。比较可惜的情况是一些人没能找到适合自己的学习方法，并在纠结和碰壁后失去信心，然后沮丧的认定自己并不适合干这行。学编程很多时候就是一个趟坑的过程，但不是每一个坑都有必要趟，写这篇文章的目的是希望能够帮助初学者尽量少趟一些坑。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/3-learning-method-1024x553.jpg\" alt=\"\" width=\"700\" height=\"378\"></p>\n<h3>IT世界的地图</h3>\n<p>初学者遇到的一个典型问题是对IT世界没有一个大的图景。比如大多数的Java书籍，教完你基础语法知识和秋水仙数的求法后就结束了，并没告诉你接下来能干什么。我曾经为此感到非常困惑，学完Java SE后做了一个非常简陋的GUI demo，就失去了后续的Java学习方向，带着对Java的偏见，这成为了我一段令人沮丧的学习经历。关于这个话题一本书可能都不够，简单来说，我尝试从计算机科学知识和技术实践两方面来聊聊成为一名IT工程师需要具备哪些东西。</p>\n<h3>计算机科学基础</h3>\n<p>首先初学者要具备一些非常基础的知识，这些知识在你踏上工作岗位后能被实际的用到，比如计算机运行原理、网络的传输、常用数据结构和算法等。这部分属于计算机科学，也是应该被计算机专业本科课程涵盖的，不要伤心错过了大学本科的相关课程，我会分享一些有用的资源。</p>\n<p>这里我罗列了一些计算机专业的学生一般需要学习的课程，当然每个学校专业设计都不一样，甚至采用的教材名字也不一样，仅供参考。大学计算机科学课程往往包括：《高等数学》、《离线数学》、《电子电路》、《数据结构》、《程序设计》、《计算机组成原理》、《编译原理》、《计算机网络》、《软件工程》、《数据库原理》等。有些学校会有一些额外的课程，例如《通信原理》、《汇编语言》、《线性代数》、《C语言》、《Java 语言》等。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/4-MOOC.png\" alt=\"\" width=\"761\" height=\"403\"></p>\n<p style=\"text-align: center;\">图片来源于网易计算机专业的课程体系</p>\n<p>尽管IT行业知识更迭非常快，但是基础知识并不容易过时，因此有大量的资料可以选择。可以选择从计算机经典丛书系列开始，比如佛罗赞和莫沙拉夫的《计算机科学导论》，甚至可以阅读一些计算机科普类读物例如《穿越计算机的迷雾》。另一种直观的方式是观看大学精品课和去跟慕课课程，比较推荐的有几个：</p>\n<ul>\n<li>中国大学精品开放课程，高等教育出版社的精品课程项目，有全国大量的名校授课视频和课件</li>\n<li>中国大学MOOC ，这个是中国大学MOOC和网易合作的，提供了上文附图中计算机课程体系中所有课程</li>\n<li>果壳网的MOOC学院，主打翻译全球名校的优秀课程，比如斯坦福的《编译原理》和MIT的《Python》</li>\n</ul>\n<h3>从知识到实践</h3>\n<p>除此之外，还需要了解实际应用于设计软件或者开发网站中的实践类知识，包括某个特定语言以及周边的库、框架和工具等。 我们可以把特定需求中用到的语言、库和框架以及其他的工具称为技术栈，在技术选型上通常也是被这样考虑的，HR常常会根据技术栈来寻找需要的工程师。比如需要学习SSH 三大框架和Java的Java技术栈；为服务器web开发而生的PHP技术栈；在移动开发领域流行的IOS、安卓技术栈等。当然这里面有一些重合和共用的技术也需要学习，比如版本管理器Git、SVN就是每个合格的工程师需要去学习的。</p>\n<p>换句话说，大学课程主要定位在上面说到的计算机科学基础知识，而市面上的培训机构主要是告诉你在怎么在实际工作中运用，所以大学和培训机构都有他们的价值。</p>\n<p>想要更加详细的了解这部分内容，这里有一些开源的技能图谱可以参考:</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/5-skill-map-1024x752.jpeg\" alt=\"\" width=\"700\" height=\"514\"></p>\n<p style=\"text-align: center;\">图片来自： http://skill-map.stuq.org/</p>\n<h3>如何挑选你的兵器？</h3>\n<p>在介绍完计算机领域的大致图景后，就需要选择一门合适的编程语言，一个较为形象的例子是把编程语言比喻成兵器，因为我们深知编程语言对于工程师而言是实实在在的工具，我们不是为了学它而学，学编程不仅仅是学语言特性，一般来说我们也不用知道赋值语句像“茴香豆蔻”的“茴”字有四种写法。</p>\n<p>当然语言之争从来没有停止过，如果把编程语言比喻江湖武器的话十分有趣。</p>\n<blockquote><p>C语言是M1式加兰德步枪，很老但可靠。</p>\n<p>C++是双截棍，挥舞起来很强悍，很吸引人，但需要多年的磨练来掌握，很多人希望改用别的武器。</p>\n<p>Perl语言是燃烧弹，曾经在战场上很有用，但现在很少人使用它。</p>\n<p>Java是M240通用弹夹式自动机枪，有时它的弹夹是圆的，但有时候不是，如果不是，当你开火时，会遇到NullPointerException问题，枪会爆炸，你就会被炸死。</p>\n<p>JavaScript是一把宝剑，但没有剑柄。</p>\n<p>— 来自网络</p></blockquote>\n<p>老实来讲IT行业的最终目的是交付可用的软件，编程语言也是适应市场的。这对于初学者或许有些残酷，在工作中我们发现最好的语言是用来处理工作任务或者构建合适的应用，并不是出于爱好或者某种Geek精神。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/6-Geek-1024x586.png\" alt=\"\" width=\"700\" height=\"401\"></p>\n<p>对于初学者而言，在选择合适的入门语言时至少需要考虑两点：</p>\n<ul>\n<li>是否能适用于构建你想要的应用。如果你的目标是创建一个运行在IPhone上的APP，那么最好选择 Object C 或者 Swift，学习web开发可以选择PHP 或者JAVA。实际上我们仍然可以用汇编做出网页，但是这样做成本高昂。</li>\n<li>是否容易学习，在满足第一点的条件下请尽量选择容易学习的语言。容易不仅仅指语法简单，包括环境搭建、部署等都需要考虑在内，以及能不能容易找到好的学习资料，因此尽可能的选择主流语言。</li>\n</ul>\n<p>别忘了非常重要的一点，学习编程语言还包括平台提供的API，比如Win 32 之于C++/C#/VB，以及周边的库和框架（这些库、框架和工具能在上面说的技术图谱中找到）。IT历史上甚至出现框架和库引领编程语言走向的情况：JQuery 和Angular 改变了前端开发的思想; Rails 抢走了Ruby的名气；而SSH三大框架一度代表了Java世界。</p>\n<p>最后我为初学者整理了一个流行编程语言和用途的表：</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/7-programming-language-1.png\" alt=\"\" width=\"606\" height=\"555\"></p>\n<p>另外还需要注意的是开发工具，可以选用IDE和有代码提示的编辑器，但尽量不要在这上喋喋不休，这就像用来盛放你锋利兵器的架子，用着顺手就行，也不推荐使用纯文本编辑器，这看起来像赤手空拳。 推荐一些编辑器和IDE</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/8-IDE-1.png\" alt=\"\" width=\"674\" height=\"323\"></p>\n<h3>挑选合适的资料和有效的阅读</h3>\n<p>对初学者而言，我仍然推荐好的视频教程，虽然我已经听到不下5个人声称是靠阅读官方文档或者看源码学会编程的，而且认为观看视频教程见效太慢。但这个思想对初学者很危险，不得不承认阅读文档和源码能更准确找到自己想要的信息，这对深入技术原理非常有用，但视频能比文字传达出更丰富的内容，有更直观的演示和细致的讲解，我想没有比这个更适合初学者了。</p>\n<p>除了上面提到的精品课程和慕课教程，国内有像网易云课堂，国外有lynda.com这种在线学习视频网站，甚至在优酷和土豆都能找到足够的教程资源。</p>\n<p>如果选择了阅读技术类书籍，我们来聊聊怎么有效的阅读一本技术书籍。</p>\n<p>读IT类书籍和读考试类书籍的方式不同，初学者需要选择更接地气、并且能告诉你最终能做出什么案例的书籍。你不需要通读整本书，而是需要搭建好和书中版本一致的环境，然后把书中的每行代码敲入电脑，观察这些代码怎样被运行，在遇到问题时去请教朋友或者到搜索引擎中寻找解决办法，直到示例程序能被正确运行。</p>\n<p>可能一个月才能读完一本书，但慢点并没什么坏处，敲过一遍的代码才能算是你的，否则永远存在于纸上的代码清单中。对于关键的概念和知识点，可以在阅读的同时做一些笔记，去尝试使用思维导图来做你的笔记吧，这让你的笔记跟上你的思考，并形成一个知识网络。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/9-spring.png\" alt=\"\" width=\"940\" height=\"356\"></p>\n<h3>自我激励</h3>\n<p>自学无疑是寂寞的。编程学习耗时较长，如何保证在这个阶段能坚持下去？</p>\n<p>我们知道很多人都能对游戏产生强烈的兴趣、愿意为之投入时间，这其中的秘密就是游戏的奖励规则。杀死一个怪物就能得到一些金币，通过完成任务获得满足感，通过关卡的设计产生持续吸引力，进而形成正向的反馈。</p>\n<p>其实学习编程也一样，实现一小段程序并运行，足以让人感到成就感和满足，借鉴这个简单的心理学技巧，定期给自己设定一些有实际意义但是不太难的目标和任务。太难会让人失去耐心，太简单又很无聊，最好设定一个跳起来刚好摸得着的任务。每完成一个目标就给予自己奖励，可以是完成任务的成就感，也可以是其他的物质奖励。</p>\n<p>这个时候一个代办记事的清单就可以帮上忙了，可以是一个to do list的软件，或者自己手写一张卡片贴到墙上，关键在于不要忘了在任务达成后给予自己适当的奖励。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/07/10-to-do-list.png\" alt=\"\" width=\"940\" height=\"560\"></p>\n<p style=\"text-align: center;\">图片来源：https://appadvice.com</p>\n<p>那如果真的遇到一些麻烦的任务呢，如何顺利解决而不至于丧失信心？笛卡尔在《方法论》一书中告诉了我们研究复杂问题的方法和步骤:</p>\n<ul>\n<li>尽量将其分解为多个比较简单的小问题，一个一个地分开解决</li>\n<li>将小问题从简单到复杂排列，先从容易解决的问题着手</li>\n<li>子问题被解决后，进行联调测试，看是否能协同运行</li>\n</ul>\n<p>在敏捷开发这种工程思想中我们正是这样做的，我们需要把业务需求进行拆分然后评估工作量，不仅可以直观的看到任务进展，手上的工作也不会看起来庞大得难以完成。</p>\n<h3>最后多说几句</h3>\n<p>非科班出身的工程师入门是有一定痛苦的，不像武侠世界里面的名门正派弟子，也没有机缘遇到骨骼精奇的世外高人，如何选择合适自己的学习方式并自我管理是很重要的一方面。没有任何Low的学习方式，只要直接而又高效，而且要能达到我们的目的就好。以我为例，从大专学校毕业并没有机会参加本科课程，曾经也在网上攫取各种视频教程，去别的学校蹭课，甚至带上礼物去一个老师那里登门拜访补课。</p>\n<p>另一方面是如何上桌，吃上编程这碗饭。学习的成果如果无处施展便成为屠龙之技，参加一些开源项目和一些公益活动，谁不喜欢一个热心的人呢。也可以尝试去实现自己的一些idea，当做一个小项目来开发，有了一些项目实践后去找一个公司实习会容易的多。</p>\n<p>我不知道算是有幸还是不幸经历了这一个过程，矫情一点来说是有一些曲折，但是我知道“聪明”从来不是这个行业的门槛。引用流行于知乎的一句老话“以大多人的努力程度，还轮不到拼天赋的程度”，在Thoughtworks有大量优秀的工程师，从他们身上我能看到聪明不是学习编程成功的关键，坚持和勤于思考才是。</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112052\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112052votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112052\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 62</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "其他", "url_object_id": "47b29ae058a42e8c7d20bb7935eb996f", "front_image_path": "full/d1090f61ad1b5ed427d81d03e12c8b76397dd93a.jpg"}
{"title": "创业公司操蛋的面试过程", "url": "http://blog.jobbole.com/111585/", "create_date": "2017/06/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/b2be6a040296beff733db89b9cef0ab1.jpg"], "fav_count": 1, "comment_count": 6, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://zachholman.com/posts/startup-interviewing-is-fucked/\">Zach Holman</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>硅谷充满了下面这种创业公司，它们疯狂崇拜在面试中能够答对几道编码难题的候选人，并认为雇佣这些人最终会带来双赢的局面：能够解决算法难题宣告着伴随着他们的加入，背后的 VC 公司一定能获得高利益回报。</p>\n<blockquote>\n<p class=\"Tweet-text e-entry-title\" dir=\"ltr\" lang=\"en\">创业公司：我们正在招募能够革新和改变世界的人！</p>\n<p>面试官：请把这个字符移动到此数组上。</p></blockquote>\n<p>大多数创业公司的用户基础为零，但它们仍有可能成功。尽管技术很少是创业公司成功的原因，但我们依然不切实际地将编程谜题作为招聘的最佳标准。</p>\n<h3>公司/HR 该了解自家的需求</h3>\n<p>面试中遇到的问题，与工作中遇到的问题，两者存在相当广泛的差距。因此人们总是好奇，创业公司是如何脱离初期的孵化阶段。</p>\n<p>我是一名产品工程师。我没有正式的 CS 背景，但我会做 Web 相关的东西，并且还很擅长。在过去的 10 个月中，我一直在不断地进行面试，从未如此近距离的面对视图、控制器、甚至模型。并不是每个公司都坚持使用编程谜题作为招聘的技术指标，但使用这种方法的公司，基本上都完全聚焦在解决现实世界中不存在的奇特算法问题。</p>\n<ul class=\" list-paddingleft-2\">\n<li>面试官： 怎样写一个完成此操作的方法？</li>\n<li>我：在 Ruby 中写一行代码。</li>\n<li>面试官：OK，那如果现在你不能使用标准库呢？想象一下这是一个 200GB 的文件，你必须在 Ruby 的内存中完成所有操作。</li>\n<li>我：我 TM 为什么要这样做？</li>\n</ul>\n<p>诚然，对于一些工作而言，面试要求“完全正确的”算法，这并没错。但看看周围，有多少小型、不到 50 人的创业公司在做着这样的工作？业内有个不为人知的秘密，就是大部分创业公司在头几年，做的都是“响当当的”CRUD（增删改查）应用程序，并且认为能够产生最大影响的全面、多样化的人才，往往能够身兼数职。</p>\n<p>你更需要担心的是，你是否招错人了！</p>\n<h3>现状</h3>\n<p>现在的趋势是，公司普遍采用编程谜题来招人，这往往让那些不擅长技术面试但其他方面优秀的人才，在面试中失利。</p>\n<p>基于算法的难题通常是这么来的：<strong>面试官陶醉在自我欣赏、自命不凡的氛围中，想出了一些他们认为能够体现聪明才智的东西</strong>。 （解决前面那种算法题的）可靠方法是，从一开始就采用递归思路来解决问题。（这对于面试官而言，是一种诱惑。）如果这行不通，请再次尝试一次通过，而不是在 O(n) 操作中尝试。此时，即使只节约了额外的 1 ms，也一定能向公司证明你的价值。</p>\n<p>从这个角度来看，你马上给未来的同事（应征者）传达了一个信息，“正确答案只有我知道，而我希望你能得到它”。这样会让他们更有压力，因为你向他暗示了存在着一个正确答案。</p>\n<p>在我的职业生涯中，我完成的每一个产品都没有所谓的正确答案。它更像是雕刻大理石雕像：你对想要呈现的东西有模糊的概念和理解，而你必须通过不断地削减、雕琢它，来最终获得一个可能的结果。你和你的队友在此过程中一起获得最终答案，而不是以一个先入为主的答案，来指导你的同事独自获得它。</p>\n<h3>合作面试（作者的观点，后面还有例子）</h3>\n<p>这就是为什么有时我在面试过程中，强烈地主张结对编程。拿出一个小时，用来讨论 Bug 或一起想要获得的功能。今天没有发生什么有趣的事吗？这个 Bug 太“无聊”了吗？</p>\n<p>好吧，那你为什么要这样做呢？如果这是候选人在工作中会实际碰到的典型问题，那么你值得在面试中一试。此外，即使只是最简单的错误修复，你也可以从别人那里学到很多东西。</p>\n<p>一起做一些真正的东西。这样做<strong>完全能够改变你的动力</strong>，我一直是这样强调的。从前你独自努力地寻找一个只有你知道的秘密，但现在你们团队合作，钻研一个答案未知的难题。以前你们是独立对抗，而现在则是团队合作。这会让你的候选人放心，更容易施展技能。</p>\n<h3>没有人知道他们在做什么</h3>\n<p>技术面试中还有很多疯狂的事，我听说过，并且也曾经历过。</p>\n<p>Max Howell 曾为开发过热门的一个工具  (Homebrew)，你可能听说过他在 2015 年在谷歌面试时被拒。谷歌面试官认为他不是一个合格的开发人员，因为他没能在白板上写出（二叉树翻转）算法。</p>\n<p>去年，我参加了一场巨头创业公司的面试，争取工程主管的职位，而当时公司的高速发展导致了一些基本问题，使得数百名开发商的产品无法顺利出货。我和公司的 CEO 和 CTO 进行了一次很好的讨论，关于对整个流程、CI、部署和管理架构进行全面的改革。<strong>然而，当我进入非编程领导岗位的最后一轮面试时，内容则几乎完全是由初级开发者问我初级的 JavaScript 问题。</strong>我在这样的情况下退缩了。</p>\n<p>你看，我现在明白了，面试需要花费时间和精力，而大多数人只想回到做事的阶段。提出一个标准化问题，可以让你以更少的精力做更多的事，并让你比较不同候选人的能力。</p>\n<p><strong>但是，选上的候选人是否合适，这需要花费长时间来验证</strong>。大多数处于初期阶段的创业公司，对候选人（特别针对早期员工）所需要的技能集，太过炫目和繁杂了。<strong>它们期望候选人懂得：产品、代码、营销、设计（全能选手），会沟通，并且饱含热情</strong>。你不能像微软或苹果那样过滤掉其他人。它们是大公司，让我第一个提醒你：你并不是它们，你有不同的优先事项。</p>\n<p>哎，反正我也没通过那些操蛋的面试！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111585\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111585votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111585\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 29</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "e996399cd77b5e76c3d56717474e9813", "front_image_path": "full/2f774db07a589d09c8c152c0bb471f04c956412e.jpg"}
{"title": "王垠：如何掌握所有的程序语言", "url": "http://blog.jobbole.com/111469/", "create_date": "2017/07/07", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/01/f9dc3a6611e10b616985757498ed6a74.jpg"], "fav_count": 22, "comment_count": 2, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.yinwang.org/blog-cn/2017/07/06/master-pl\">王垠</a>   </div><p>对的，我这里要讲的不是如何掌握一种程序语言，而是所有的……</p>\n<p>很多编程初学者至今还在给我写信请教，问我该学习什么程序语言，怎么学习。由于我知道标题问题的答案，所以总感觉这个问题是如此“低级”，一直没来得及回复 :P 可是逐渐的，我发现原来不只是小白们有这个问题，就连美国大公司的很多资深工程师，其实也没搞明白。</p>\n<p>今天休闲活动进入第二个星期，稍微闲下来一点，我想来统一回答一下这个搁置已久的“初级问题”。这个话题貌似曾经写过，然而现在我想把它重新写一遍。因为通过跟很多人的交流，我对自己头脑中的（未转化为语言的）想法，有了更精确的表达。</p>\n<p>如果你存在以下的种种困惑，那么这篇文章也许会对你有所帮助：</p>\n<ol>\n<li>你是编程初学者，不知道该选择什么程序语言来入门。</li>\n<li>你是资深的程序员或者团队领导，对新出现的种种语言感到困惑，不知道该“投资”哪种语言。</li>\n<li>你的团队为使用哪种程序语言争论不休，发生各种宗教斗争。</li>\n<li>你追逐潮流采用了某种时髦的语言，结果两个月之后发现深陷泥潭，痛苦不堪……</li>\n</ol>\n<p>虽然我已经不再过问这些世事，然而无可置疑的现实是，程序语言仍然是很重要的话题，这个情况短时间内不会改变。程序员的岗位往往会要求熟悉某些语言，甚至某些奇葩的公司要求你“深入理解 OOP 或者 FP 设计模式”。对于在职的程序员，程序语言至今仍然是可以争得面红耳赤的宗教话题。它的宗教性之强，以至于我在批评和调侃某些语言（比如 Go 语言）的时候，有些人会本能地以为我是另外一种语言（比如 Java）的粉丝。</p>\n<p>显然我不可能是任何一种语言的粉丝，我甚至不是 Yin 语言的粉丝 ;) 对于任何从没见过的语言，我都是直接拿起来就用，而不需要经过学习的过程。看了这篇文章，也许你会明白我为什么可以达到这个效果。理解了这里面的东西，每个程序员都应该可以做到这一点。嗯，但愿吧。</p>\n<h3 id=\"重视语言特性而不是语言\">重视语言特性，而不是语言</h3>\n<p>很多人在乎自己或者别人是否“会”某种语言，对“发明”了某种语言的人倍加崇拜，为各种语言的孰优孰劣争得面红耳赤。这些问题对于我来说都是不存在的。虽然我写文章批评过不少语言的缺陷，在实际工作中我却很少跟人争论这些。如果有其它人在我身边争论，我甚至会戴上耳机，都懒得听他们说什么 ;) 为什么呢？我发现归根结底的原因，是因为我重视的是“语言特性”，而不是整个的“语言”。我能用任何语言写出不错的代码，就算再糟糕的语言也差不了多少。</p>\n<p>任何一种“语言”，都是各种“语言特性”的组合。打个比方吧，一个程序语言就像一台电脑。它的牌子可能叫“联想”，或者“IBM”，或者“Dell”，或者“苹果”。那么，你可以说苹果一定比 IBM 好吗？你不能。你得看看它里面装的是什么型号的处理器，有多少个核，主频多少，有多少 L1 cache，L2 cache……，有多少内存和硬盘，显示器分辨率有多大，显卡是什么 GPU，网卡速度，等等各种“配置”。有时候你还得看各个组件之间的兼容性。</p>\n<p>这些配置对应到程序语言里面，就是所谓“语言特性”。举一些语言特性的例子：</p>\n<ul>\n<li>变量定义</li>\n<li>算术运算</li>\n<li>for 循环语句，while 循环语句</li>\n<li>函数定义，函数调用</li>\n<li>递归</li>\n<li>静态类型系统</li>\n<li>类型推导</li>\n<li>lambda 函数</li>\n<li>面向对象</li>\n<li>垃圾回收</li>\n<li>指针算术</li>\n<li>goto 语句</li>\n</ul>\n<p>这些语言特性，就像你在选择一台电脑的时候，看它里面是什么配置。选电脑的时候，没有人会说 Dell 一定是最好的，他们只会说这个型号里面装的是 Intel 的 i7 处理器，这个比 i5 的好，DDR3 的内存 比 DDR2 的快这么多，SSD 比磁盘快很多，ATI 的显卡是垃圾…… 如此等等。</p>\n<p>程序语言也是一样的道理。对于初学者来说，其实没必要纠结到底要先学哪一种语言，再学哪一种。曾经有人给我发信问这种问题，纠结了好几个星期，结果一个语言都还没开始学。有这纠结的时间，其实都可以把他纠结过的语言全部掌握了。</p>\n<p>初学者往往不理解，每一种语言里面必然有一套“通用”的特性。比如变量，函数，整数和浮点数运算，等等。这些是每个通用程序语言里面都必须有的，一个都不能少。你只要通过“某种语言”学会了这些特性，掌握这些特性的根本概念，就能随时把这些知识应用到任何其它语言。你为此投入的时间基本不会浪费。所以初学者纠结要“先学哪种语言”，这种时间花的很不值得，还不如随便挑一个语言，跳进去。</p>\n<p>很多初学者不了解，一个高明的程序员如果开始用一种新的程序语言，他往往不是去看这个语言的大部头手册或者书籍，而是先有一个需要解决的问题。手头有了问题，他可以用两分钟浏览一下这语言的手册，看看这语言大概长什么样。然后，他直接拿起一段例子代码来开始修改捣鼓，想法把这代码改成自己正想解决的问题。在这个简短的过程中，他很快的掌握了这个语言，并用它表达出心里的想法。</p>\n<p>在这个过程中，随着需求的出现，他可能会问这样的问题：</p>\n<ul>\n<li>这个语言的“变量定义”是什么语法，需要“声明类型”吗，还是可以用“类型推导”？</li>\n<li>它的“类型”是什么语法？是否支持“泛型”？泛型的 “variance” 如何表达？</li>\n<li>这个语言的“函数”是什么语法，“函数调用”是什么语法，可否使用“缺省参数”？</li>\n<li>……</li>\n</ul>\n<p>注意到了吗？上面每一个引号里面的内容，都是一种语言特性（或者叫概念）。这些概念可以存在于任何的语言里面，虽然语法可能不一样，它们的本质都是一样的。比如，有些语言的参数类型写在变量前面，有些写在后面，有些中间隔了一个冒号，有些没有。</p>\n<p>这些实际问题都是随着写实际的代码，解决手头的问题，自然而然带出来的，而不是一开头就抱着语言手册看得仔仔细细。因为掌握了语言特性的人都知道，自己需要的特性，在任何语言里面一定有对应的表达方式。如果没有直接的方式表达，那么一定有某种“绕过方式”。如果有直接的表达方式，那么它只是语法稍微有所不同而已。所以，他是带着问题找特性，就像查字典一样，而不是被淹没于大部头的手册里面，昏昏欲睡一个月才开始写代码。</p>\n<p>掌握了通用的语言特性，剩下的就只剩某些语言“特有”的特性了。研究语言的人都知道，要设计出新的，好的，无害的特性，是非常困难的。所以一般说来，一种好的语言，它所特有的新特性，终究不会超过一两种。如果有个语言号称自己有超过 5 种新特性，那你就得小心了，因为它们带来的和可能不是优势，而是灾难！</p>\n<p>同样的道理，最好的语言研究者，往往不是某种语言的设计者，而是某种关键语言特性的设计者（或者支持者）。举个例子，著名的计算机科学家 Dijkstra 就是“递归”的强烈支持者。现在的语言里面都有递归，然而你可能不知道，早期的程序语言是不支持递归的。直到 Dijkstra 强烈要求 Algol 60 委员会加入对递归的支持，这个局面才改变了。Tony Hoare 也是语言特性设计者。他设计了几个重要的语言特性，却没有设计过任何语言。另外大家不要忘了，有个语言专家叫王垠，他是早期 union type 的支持者和实现者，也是 checked exception 特性的支持者，他在自己的<a href=\"http://www.yinwang.org/blog-cn/2017/05/23/kotlin\">博文</a>里指出了 checked exception 和 union type 之间的关系 :P</p>\n<p>很多人盲目的崇拜语言设计者，只要听到有人设计（或者美其民曰“发明”）了一个语言，就热血沸腾，佩服的五体投地。他们却没有理解，其实所有的程序语言，不过是像 Dell，联想一样的“组装机”。语言特性的设计者，才是像 Intel，AMD，ARM，Qualcomm 那样核心技术的创造者。</p>\n<h3 id=\"合理的入门语言\">合理的入门语言</h3>\n<p>所以初学者要想事半功倍，就应该从一种“合理”的，没有明显严重问题的语言出发，掌握最关键的语言特性，然后由此把这些概念应用到其它语言。哪些是合理的入门语言呢？我个人觉得这些语言都可以用来入门：</p>\n<ul>\n<li>Scheme</li>\n<li>C</li>\n<li>Java</li>\n<li>Python</li>\n<li>JavaScript</li>\n</ul>\n<p>那么相比之下，我不推荐用哪些语言入门呢？</p>\n<ul>\n<li>Shell</li>\n<li>PowerShell</li>\n<li>AWK</li>\n<li>Perl</li>\n<li>PHP</li>\n<li>Basic</li>\n<li>Go</li>\n</ul>\n<p>总的说来，你不应该使用所谓“<a href=\"http://www.yinwang.org/blog-cn/2013/03/29/scripting-language\">脚本语言</a>”作为入门语言，特别是那些源于早期 Unix 系统的脚本语言工具。PowerShell 虽然比 Unix 的 Shell 有所进步，然而它仍然没有摆脱脚本语言的根本问题——他们的设计者不知道他们自己在干什么 :P</p>\n<p>采用脚本语言学编程，一个很严重的问题就是使得学习者抓不住关键。脚本语言往往把一些系统工具性质的东西（比如正则表达式，Web 概念）加入到语法里面，导致初学者为它们浪费太多时间，却没有理解编程最关键的概念：变量，函数，递归，类型……</p>\n<p>不推荐 Go 语言的原因类似，虽然 Go 语言不算脚本语言，然而他的设计者显然不明白自己在干什么。所以使用 Go 语言来学编程，你不能专注于最关键，最好的语言特性。</p>\n<h3 id=\"掌握关键语言特性忽略次要特性\">掌握关键语言特性，忽略次要特性</h3>\n<p>为了达到我之前提到的融会贯通，一通百通的效果，初学者应该专注于语言里面最关键的特性，而不是被次要的内容分心。我发现很多编程培训班和野鸡大学的编程入门课，往往一来就教学生如何使用 printf 打印“Hello World！”，进而要他们记忆 printf 的各种“格式字符”的意义，要他们实现各种复杂格式的打印输出，甚至要求打印到文本文件里，然后再读出来……</p>\n<p>可是殊不知，这种输出输入操作其实根本不算是语言的一部分，而且对于掌握编程的核心概念来说，都是次要的。有些人的 Java 课程进行了好几个星期，居然还在布置各种 printf 的作业。学生写出几百行的 printf，却不理解变量和函数是什么，甚至连算术语句和循环语句都不知道怎么用！这就是为什么很多初学者感觉编程很难，我连 <code class=\"highlighter-rouge\">%d</code>，<code class=\"highlighter-rouge\">%f</code>，<code class=\"highlighter-rouge\">%.2f</code>的含义都记不住，还怎么学编程！</p>\n<p>然而这些野鸡大学的“教授”头衔是如此的洗脑，以至于被他们教过的学生（比如我女朋友）到我这里请教，居然骂我净教一些没用的东西，学了连 printf 的作业都没法完成 :P 你别跟我讲 for 循环，函数什么的了…… 可不可以等几个月，等我背熟了 printf 的用法再学那些啊？</p>\n<p>所以你就发现一旦被差劲的老师教过，这个程序员基本就毁了。就算遇到好的老师，他们也很难纠正过来。</p>\n<h3 id=\"自己动手实现语言特性\">自己动手实现语言特性</h3>\n<p>在基本学会了各种语言特性，能用它们来写代码之后，下一步的进阶就是去实现它们。只有实现了各种语言特性，你才能完完全全的拥有它们，成为它们的主人。否则你就只是它们的使用者，你会永远做语言创造者们的仆人。</p>\n<p>有个大师说得好，完全理解一种语言最好的方法就是自己动手实现它，也就是自己写一个解释器来实现它的语义。但我觉得这句话应该稍微修改一下：完全理解一种“语言特性”最好的方法就是自己亲自实现它。</p>\n<p>注意我在这里把“语言”改为了“语言特性”。你并不需要实现整个语言来达到这个目的，因为我们最终使用的是语言特性。只要你自己实现了一种语言特性，你就能理解这个特性在任何语言里的实现方式和用法。</p>\n<p>举个例子，学习 SICP 的时候，大家都会亲自用 Scheme 实现一个面向对象系统。用 Scheme 实现的面向对象系统，跟 Java，C++，Python 之类的语言语法相去甚远，然而它却能帮助你理解任何这些 OOP 语言里面的“面向对象”这一概念，它甚至能帮助你理解各种面向对象实现的差异。</p>\n<p>这种效果是你直接学习 OOP 语言得不到的，因为在学习 Java，C++，Python 之类语言的时候，你只是一个用户，而用 Scheme 自己动手实现了 OO 系统之后，你成为了一个创造者。</p>\n<p>类似的特性还包括类型推导，类型检查，惰性求值，如此等等。我实现过几乎所有的语言特性，所以任何语言在我的面前，都是可以被任意拆卸组装的玩具，而不再是凌驾于我之上的神圣。</p>\n<h3 id=\"总结\">总结</h3>\n<p>写了这么多，重要的话重复三遍：语言特性，语言特性，语言特性，语言特性！不管是初学者还是资深程序员，应该专注于语言特性，而不是纠结于整个的“语言品牌”。只有这样才能达到融会贯通，拿起任何语言几乎立即就会用，并且写出高质量的代码。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111469\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111469votetotal\">7</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111469\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 22 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "开发", "url_object_id": "939ee37643c72df31691e8a75739908f", "front_image_path": "full/9a8539839727cdcb8492a550ef7b35f838a85f14.jpg"}
{"title": "数据结构中各种树", "url": "http://blog.jobbole.com/111680/", "create_date": "2017/07/03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/07/bc42d6b7087d92bf57edac612206395f.jpg"], "fav_count": 9, "comment_count": 2, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/maybe2030/p/4732377.html\">Poll的笔记</a>   </div><p>数据结构中有很多树的结构，其中包括二叉树、二叉搜索树、2-3树、红黑树等等。本文中对数据结构中常见的几种树的概念和用途进行了汇总，不求严格精准，但求简单易懂。</p>\n<h1 class=\"First\"><strong>1. 二叉树</strong></h1>\n<p>二叉树是数据结构中一种重要的数据结构，也是树表家族最为基础的结构。</p>\n<p><strong>二叉树的定义：</strong>二叉树的每个结点至多只有二棵子树(不存在度大于2的结点)，二叉树的子树有左右之分，次序不能颠倒。二叉树的第i层至多有2<sup>i-1</sup>个结点；深度为k的二叉树至多有2<sup>k-1</sup>个结点；对任何一棵二叉树T，如果其终端结点数为n<sub>0</sub>，度为2的结点数为n<sub>2</sub>，则n<sub>0</sub>=n<sub>2</sub>+1。</p>\n<p><strong>二叉树的示例</strong>：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/bc42d6b7087d92bf57edac612206395f.jpg\"><img class=\"aligncenter wp-image-111682 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/bc42d6b7087d92bf57edac612206395f.jpg\" alt=\"2009050402\" width=\"390\" height=\"312\"></a></p>\n<p><strong>满二叉树和完全二叉树：</strong></p>\n<p>满二叉树：除最后一层无任何子节点外，每一层上的所有结点都有两个子结点。也可以这样理解，除叶子结点外的所有结点均有两个子结点。节点数达到最大值，所有叶子结点必须在同一层上。</p>\n<p>满二叉树的性质：</p>\n<p>1) 一颗树深度为h，最大层数为k，深度与最大层数相同，k=h;</p>\n<p>2) 叶子数为2<sup>h</sup>;</p>\n<p>3) 第k层的结点数是：2<sup>k-1</sup>;</p>\n<p>4) 总结点数是：2<sup>k-1</sup>，且总节点数一定是奇数。</p>\n<p>完全二叉树：若设二叉树的深度为h，除第 h 层外，其它各层 (1～(h-1)层) 的结点数都达到最大个数，第h层所有的结点都连续集中在最左边，这就是完全二叉树。</p>\n<p><strong>注：</strong>完全二叉树是效率很高的数据结构，堆是一种完全二叉树或者近似完全二叉树，所以效率极高，像十分常用的排序算法、Dijkstra算法、Prim算法等都要用堆才能优化，二叉排序树的效率也要借助平衡性来提高，而平衡性基于完全二叉树。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/a5952ec741b60202c7b377bfb8e8f368.png\"><img class=\"aligncenter wp-image-111683 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a5952ec741b60202c7b377bfb8e8f368.png\" alt=\"141749056837546\" width=\"534\" height=\"180\"></a></p>\n<p><strong>二叉树的性质</strong>：</p>\n<p>1) 在非空二叉树中，第i层的结点总数不超过2<sup>i-1</sup>, i&gt;=1;</p>\n<p>2) 深度为h的二叉树最多有2<sup>h</sup>-1个结点(h&gt;=1)，最少有h个结点;</p>\n<p>3) 对于任意一棵二叉树，如果其叶结点数为N<sub>0</sub>，而度数为2的结点总数为N<sub>2</sub>，则N<sub>0</sub>=N<sub>2</sub>+1;</p>\n<p>4) 具有n个结点的完全二叉树的深度为log<sub>2</sub>(n+1);</p>\n<p>5)有N个结点的完全二叉树各结点如果用顺序方式存储，则结点之间有如下关系：</p>\n<p>若I为结点编号则 如果I&gt;1，则其父结点的编号为I/2；</p>\n<p>如果2I&lt;=N，则其左儿子（即左子树的根结点）的编号为2I；若2I&gt;N，则无左儿子；</p>\n<p>如果2I+1&lt;=N，则其右儿子的结点编号为2I+1；若2I+1&gt;N，则无右儿子。</p>\n<p>6)给定N个节点，能构成h(N)种不同的二叉树，其中h(N)为卡特兰数的第N项，h(n)=C(2*n, n)/(n+1)。</p>\n<p>7)设有i个枝点，I为所有枝点的道路长度总和，J为叶的道路长度总和J=I+2<sup>i</sup>。</p>\n<h1 class=\"First\">2. 二叉查找树</h1>\n<p><strong>二叉查找树定义</strong>：又称为是二叉排序树（Binary Sort Tree）或二叉搜索树。二叉排序树或者是一棵空树，或者是具有下列性质的二叉树：</p>\n<p>1) 若左子树不空，则左子树上所有结点的值均小于它的根结点的值；</p>\n<p>2) 若右子树不空，则右子树上所有结点的值均大于或等于它的根结点的值；</p>\n<p>3) 左、右子树也分别为二叉排序树；</p>\n<p>4) 没有键值相等的节点。</p>\n<p><strong>二叉查找树的性质：</strong><strong>对二叉查找树进行中序遍历，即可得到有序的数列。</strong></p>\n<p><strong>二叉查找树的时间复杂度：<strong>它和二分查找一样，插入和查找的时间复杂度均为O(logn)，<span style=\"color: #ff0000\">但是在最坏的情况下仍然会有O(n)的时间复杂度。</span>原因在于插入和删除元素的时候，树没有保持平衡（比如，我们查找上图（b）中的“93”，我们需要进行n次查找操作）。我们追求的是在最坏的情况下仍然有较好的时间复杂度，这就是平衡查找树设计的初衷。</strong></strong></p>\n<p><span style=\"color: #ff0000\"><strong><strong>二叉查找树的高度决定了二叉查找树的查找效率。</strong></strong></span></p>\n<p><strong>二叉查找树的插入过程如下：</strong></p>\n<p>1) 若当前的二叉查找树为空，则插入的元素为根节点;</p>\n<p>2) 若插入的元素值小于根节点值，则将元素插入到左子树中;</p>\n<p>3) 若插入的元素值不小于根节点值，则将元素插入到右子树中。</p>\n<p><strong>二叉查找树的删除，分三种情况进行处理：</strong></p>\n<p>1) p为叶子节点，直接删除该节点，再修改其父节点的指针（注意分是根节点和不是根节点），如图a;</p>\n<p>2) p为单支节点（即只有左子树或右子树）。让p的子树与p的父亲节点相连，删除p即可（注意分是根节点和不是根节点），如图b;</p>\n<p>3) p的左子树和右子树均不空。找到p的后继y，因为y一定没有左子树，所以可以删除y，并让y的父亲节点成为y的右子树的父亲节点，并用y的值代替p的值；或者方法二是找到p的前驱x，x一定没有右子树，所以可以删除x，并让x的父亲节点成为y的左子树的父亲节点。如图c。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/2361a6d889a036b92d6fa44c8984d27e.png\"><img class=\"aligncenter wp-image-111684 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/2361a6d889a036b92d6fa44c8984d27e.png\" alt=\"2012032717571645\" width=\"572\" height=\"205\"></a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/05b0ae29caf51cf3aeb26e30ee6996ec.png\"><img class=\"aligncenter wp-image-111685 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/05b0ae29caf51cf3aeb26e30ee6996ec.png\" alt=\"2012032717583358\" width=\"611\" height=\"210\"></a><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/2c51f44d9bfb87f38f9bf040552b6b31.png\"><img class=\"aligncenter wp-image-111686 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/2c51f44d9bfb87f38f9bf040552b6b31.png\" alt=\"2012032717584562\" width=\"553\" height=\"148\"></a></p>\n<p>二叉树相关实现源码：</p>\n<p>插入操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983b8cdd13fd384130246\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstruct node\r\n{\r\n    int val;\r\n    pnode lchild;\r\n    pnode rchild;\r\n};\r\n\r\npnode BT = NULL;\r\n\r\n\r\n//递归方法插入节点 \r\npnode insert(pnode root, int x)\r\n{\r\n    pnode p = (pnode)malloc(LEN);\r\n    p-&gt;val = x;\r\n    p-&gt;lchild = NULL;\r\n    p-&gt;rchild = NULL;\r\n    if(root == NULL){\r\n        root = p;    \r\n    }    \r\n    else if(x &lt; root-&gt;val){\r\n        root-&gt;lchild = insert(root-&gt;lchild, x);    \r\n    }\r\n    else{\r\n        root-&gt;rchild = insert(root-&gt;rchild, x);    \r\n    }\r\n    return root;\r\n}\r\n\r\n//非递归方法插入节点 \r\nvoid insert_BST(pnode q, int x)\r\n{\r\n    pnode p = (pnode)malloc(LEN);\r\n    p-&gt;val = x;\r\n    p-&gt;lchild = NULL;\r\n    p-&gt;rchild = NULL;\r\n    if(q == NULL){\r\n        BT = p;\r\n        return ;    \r\n    }        \r\n    while(q-&gt;lchild != p &amp;&amp; q-&gt;rchild != p){\r\n        if(x &lt; q-&gt;val){\r\n            if(q-&gt;lchild){\r\n                q = q-&gt;lchild;    \r\n            }    \r\n            else{\r\n                q-&gt;lchild = p;\r\n            }        \r\n        }    \r\n        else{\r\n            if(q-&gt;rchild){\r\n                q = q-&gt;rchild;    \r\n            }    \r\n            else{\r\n                q-&gt;rchild = p;    \r\n            }\r\n        }\r\n    }\r\n    return;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd13fd384130246-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd13fd384130246-60\">60</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-1\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">pnode </span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">pnode </span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-8\"><span class=\"crayon-e\">pnode </span><span class=\"crayon-v\">BT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-10\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-11\"><span class=\"crayon-c\">//递归方法插入节点 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-12\"><span class=\"crayon-e\">pnode </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">pnode </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-13\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">malloc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LEN</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-28\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-30\"><span class=\"crayon-c\">//非递归方法插入节点 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-31\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert_BST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-32\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">malloc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LEN</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">BT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-43\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-44\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-46\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-47\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-48\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-50\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-52\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-54\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-55\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-56\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd13fd384130246-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd13fd384130246-60\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0078 seconds] -->\r\n<p>删除操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983b8cdd140a532160711\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbool delete_BST(pnode p, int x) //返回一个标志，表示是否找到被删元素 \r\n{\r\n    bool find = false;\r\n    pnode q;\r\n    p = BT;\r\n    while(p &amp;&amp; !find){  //寻找被删元素 \r\n        if(x == p-&gt;val){  //找到被删元素 \r\n            find = true;    \r\n        }    \r\n        else if(x &lt; p-&gt;val){ //沿左子树找 \r\n            q = p;\r\n            p = p-&gt;lchild;    \r\n        }\r\n        else{   //沿右子树找 \r\n            q = p;\r\n            p = p-&gt;rchild;    \r\n        }\r\n    }\r\n    if(p == NULL){   //没找到 \r\n        cout &lt;&lt; \"没有找到\" &lt;&lt; x &lt;&lt; endl;    \r\n    }\r\n    \r\n    if(p-&gt;lchild == NULL &amp;&amp; p-&gt;rchild == NULL){  //p为叶子节点 \r\n        if(p == BT){  //p为根节点 \r\n            BT = NULL;    \r\n        }\r\n        else if(q-&gt;lchild == p){   \r\n            q-&gt;lchild = NULL;\r\n        }        \r\n        else{\r\n            q-&gt;rchild = NULL;    \r\n        }\r\n        free(p);  //释放节点p \r\n    }\r\n    else if(p-&gt;lchild == NULL || p-&gt;rchild == NULL){ //p为单支子树 \r\n        if(p == BT){  //p为根节点 \r\n            if(p-&gt;lchild == NULL){\r\n                BT = p-&gt;rchild;    \r\n            }    \r\n            else{\r\n                BT = p-&gt;lchild;    \r\n            }\r\n        }    \r\n        else{\r\n            if(q-&gt;lchild == p &amp;&amp; p-&gt;lchild){ //p是q的左子树且p有左子树 \r\n                q-&gt;lchild = p-&gt;lchild;    //将p的左子树链接到q的左指针上 \r\n            }    \r\n            else if(q-&gt;lchild == p &amp;&amp; p-&gt;rchild){\r\n                q-&gt;lchild = p-&gt;rchild;    \r\n            }\r\n            else if(q-&gt;rchild == p &amp;&amp; p-&gt;lchild){\r\n                q-&gt;rchild = p-&gt;lchild;    \r\n            }\r\n            else{\r\n                q-&gt;rchild = p-&gt;rchild;\r\n            }\r\n        }\r\n        free(p);\r\n    }\r\n    else{ //p的左右子树均不为空 \r\n        pnode t = p;\r\n        pnode s = p-&gt;lchild;  //从p的左子节点开始 \r\n        while(s-&gt;rchild){  //找到p的前驱，即p左子树中值最大的节点 \r\n            t = s;   \r\n            s = s-&gt;rchild;    \r\n        }\r\n        p-&gt;val = s-&gt;val;   //把节点s的值赋给p \r\n        if(t == p){\r\n            p-&gt;lchild = s-&gt;lchild;    \r\n        }    \r\n        else{\r\n            t-&gt;rchild = s-&gt;lchild;    \r\n        }\r\n        free(s); \r\n    }\r\n    return find;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd140a532160711-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd140a532160711-77\">77</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-1\"><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_BST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回一个标志，表示是否找到被删元素 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">find</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//寻找被删元素 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//找到被删元素 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//沿左子树找 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//沿右子树找 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//没找到 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"没有找到\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-22\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//p为叶子节点 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//p为根节点 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">BT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">free</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//释放节点p </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//p为单支子树 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//p为根节点 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-38\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">BT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-40\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-41\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">BT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//p是q的左子树且p有左子树 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-46\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//将p的左子树链接到q的左指针上 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-48\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-49\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-50\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-52\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-54\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-55\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">q</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-56\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">free</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-60\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//p的左右子树均不为空 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-62\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//从p的左子节点开始 </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-63\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//找到p的前驱，即p左子树中值最大的节点 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-64\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-65\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-66\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-67\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//把节点s的值赋给p </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-68\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-69\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-70\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-71\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-72\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">t</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-73\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-74\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">free</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-75\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd140a532160711-76\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">find</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd140a532160711-77\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0122 seconds] -->\r\n<p>查找操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983b8cdd1410766484667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npnode search_BST(pnode p, int x)\r\n{\r\n    bool solve = false;\r\n    while(p &amp;&amp; !solve){\r\n        if(x == p-&gt;val){\r\n            solve = true;    \r\n        }    \r\n        else if(x &lt; p-&gt;val){\r\n            p = p-&gt;lchild;    \r\n        }\r\n        else{\r\n            p = p-&gt;rchild;    \r\n        }\r\n    }\r\n    if(p == NULL){\r\n        cout &lt;&lt; \"没有找到\" &lt;&lt; x &lt;&lt; endl;    \r\n    } \r\n    return p;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1410766484667-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1410766484667-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-1\"><span class=\"crayon-e\">pnode </span><span class=\"crayon-e\">search_BST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">solve</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">solve</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">solve</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rchild</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"没有找到\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1410766484667-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1410766484667-19\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p></p>\n<h1 class=\"First\">3. 平衡二叉树</h1>\n<p>我们知道，对于一般的二叉搜索树（Binary Search Tree），其期望高度（即为一棵平衡树时）为log<sub>2</sub>n，其各操作的时间复杂度O(log<sub>2</sub>n)同时也由此而决定。但是，在某些极端的情况下（如在插入的序列是有序的时），二叉搜索树将退化成近似链或链，此时，其操作的时间复杂度将退化成线性的，即O(n)。我们可以通过随机化建立二叉搜索树来尽量的避免这种情况，但是在进行了多次的操作之后，由于在删除时，我们总是选择将待删除节点的后继代替它本身，这样就会造成总是右边的节点数目减少，以至于树向左偏沉。这同时也会造成树的平衡性受到破坏，提高它的操作的时间复杂度。于是就有了我们下边介绍的平衡二叉树。</p>\n<p><strong>平衡二叉树定义：</strong>平衡二叉树（Balanced Binary Tree）又被称为AVL树（有别于AVL算法），且具有以下性质：它是一 棵空树或它的左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树。平衡二叉树的常用算法有红黑树、AVL树等。在平衡二叉搜索树中，我们可以看到，其高度一般都良好地维持在O(log<sub>2</sub>n)，大大降低了操作的时间复杂度。</p>\n<p>最小二叉平衡树的节点的公式如下：</p>\n<p>F(n)=F(n-1)+F(n-2)+1</p>\n<p>这个类似于一个递归的数列，可以参考Fibonacci数列，1是根节点，F(n-1)是左子树的节点数量，F(n-2)是右子树的节点数量。</p>\n<h2 class=\"First\">3.1 平衡查找树之AVL树</h2>\n<p>有关AVL树的具体实现，可以参考<a href=\"http://www.cppblog.com/cxiaojia/archive/2012/08/20/187776.html\" target=\"_blank\">C小加的博客《一步一步写平衡二叉树（AVL）》</a>。</p>\n<p><strong>AVL树定义：</strong>AVL树是最先发明的自平衡二叉查找树。AVL树得名于它的发明者 G.M. Adelson-Velsky 和 E.M. Landis，他们在 1962 年的论文 “An algorithm for the organization of information” 中发表了它。在AVL中任何节点的两个儿子子树的高度最大差别为1，所以它也被称为高度平衡树，n个结点的AVL树最大深度约1.44log<sub>2</sub>n。查找、插入和删除在平均和最坏情况下都是O(logn)。增加和删除可能需要通过一次或多次树旋转来重新平衡这个树。<strong>这个方案很好的解决了二叉查找树退化成链表的问题，把插入，查找，删除的时间复杂度最好情况和最坏情况都维持在O(logN)。但是频繁旋转会使插入和删除牺牲掉O(logN)左右的时间，不过相对二叉查找树来说，时间上稳定了很多。</strong></p>\n<p><strong>AVL树的自平衡操作——旋转：</strong></p>\n<p>AVL树最关键的也是最难的一步操作就是<strong>旋转</strong>。旋转主要是为了实现AVL树在实施了插入和删除操作以后，树重新回到平衡的方法。下面我们重点研究一下AVL树的旋转。</p>\n<p>对于一个平衡的节点，由于任意节点最多有两个儿子，因此高度不平衡时，此节点的两颗子树的高度差2.容易看出，这种不平衡出现在下面四种情况：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/bbc1d195a4adf1a9cc10bb85b0f1c2c6.jpg\"><img class=\"aligncenter wp-image-111687 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/bbc1d195a4adf1a9cc10bb85b0f1c2c6.jpg\" alt=\"2012082016021366\" width=\"785\" height=\"306\"></a></p>\n<p>1) 6节点的左子树3节点高度比右子树7节点大2，左子树3节点的左子树1节点高度大于右子树4节点，这种情况成为左左。</p>\n<p>2) 6节点的左子树2节点高度比右子树7节点大2，左子树2节点的左子树1节点高度小于右子树4节点，这种情况成为左右。</p>\n<p>3) 2节点的左子树1节点高度比右子树5节点小2，右子树5节点的左子树3节点高度大于右子树6节点，这种情况成为右左。</p>\n<p>4) 2节点的左子树1节点高度比右子树4节点小2，右子树4节点的左子树3节点高度小于右子树6节点，这种情况成为右右。</p>\n<p>从图2中可以可以看出，1和4两种情况是对称的，这两种情况的旋转算法是一致的，只需要经过一次旋转就可以达到目标，我们称之为单旋转。2和3两种情况也是对称的，这两种情况的旋转算法也是一致的，需要进行两次旋转，我们称之为双旋转。</p>\n<p><strong>单旋转</strong></p>\n<p>单旋转是针对于左左和右右这两种情况的解决方案，这两种情况是对称的，只要解决了左左这种情况，右右就很好办了。图3是左左情况的解决方案，节点k2不满足平衡特性，因为它的左子树k1比右子树Z深2层，而且k1子树中，更深的一层的是k1的左子树X子树，所以属于左左情况。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/61ee0c83b3783cb05eac2ed3528eae3b.jpg\"><img class=\"aligncenter wp-image-111688 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/61ee0c83b3783cb05eac2ed3528eae3b.jpg\" alt=\"avltree35\" width=\"530\" height=\"229\"></a></p>\n<p>为使树恢复平衡，我们把k2变成这棵树的根节点，因为k2大于k1，把k2置于k1的右子树上，而原本在k1右子树的Y大于k1，小于k2，就把Y置于k2的左子树上，这样既满足了二叉查找树的性质，又满足了平衡二叉树的性质。</p>\n<p>这样的操作只需要一部分指针改变，结果我们得到另外一颗二叉查找树，它是一棵AVL树，因为X向上一移动了一层，Y还停留在原来的层面上，Z向下移动了一层。整棵树的新高度和之前没有在左子树上插入的高度相同，插入操作使得X高度长高了。因此，由于这颗子树高度没有变化，所以通往根节点的路径就不需要继续旋转了。</p>\n<p><strong>双旋转</strong></p>\n<p>对于左右和右左这两种情况，单旋转不能使它达到一个平衡状态，要经过两次旋转。双旋转是针对于这两种情况的解决方案，同样的，这样两种情况也是对称的，只要解决了左右这种情况，右左就很好办了。图4是左右情况的解决方案，节点k3不满足平衡特性，因为它的左子树k1比右子树Z深2层，而且k1子树中，更深的一层的是k1的右子树k2子树，所以属于左右情况。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/2ad609dadbff982036a8e32c792436d7.jpg\"><img class=\"aligncenter wp-image-111690 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/2ad609dadbff982036a8e32c792436d7.jpg\" alt=\"2012082016534455\" width=\"785\" height=\"247\"></a></p>\n<p>为使树恢复平衡，我们需要进行两步，第一步，把k1作为根，进行一次右右旋转，旋转之后就变成了左左情况，所以第二步再进行一次左左旋转，最后得到了一棵以k2为根的平衡二叉树。</p>\n<p><strong>AVL树实现源码：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983b8cdd1417069860974\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//AVL树节点信息\r\ntemplate&lt;class T&gt;\r\nclass TreeNode\r\n{\r\n    public:\r\n        TreeNode():lson(NULL),rson(NULL),freq(1),hgt(0){}\r\n        T data;//值\r\n        int hgt;//高度\r\n        unsigned int freq;//频率\r\n        TreeNode* lson;//指向左儿子的地址\r\n        TreeNode* rson;//指向右儿子的地址\r\n};\r\n//AVL树类的属性和方法声明\r\ntemplate&lt;class T&gt;\r\nclass AVLTree\r\n{\r\n    private:\r\n        TreeNode&lt;T&gt;* root;//根节点\r\n        void insertpri(TreeNode&lt;T&gt;* &amp;node,T x);//插入\r\n        TreeNode&lt;T&gt;* findpri(TreeNode&lt;T&gt;* node,T x);//查找\r\n        void insubtree(TreeNode&lt;T&gt;* node);//中序遍历\r\n        void Deletepri(TreeNode&lt;T&gt;* &amp;node,T x);//删除\r\n        int height(TreeNode&lt;T&gt;* node);//求树的高度\r\n        void SingRotateLeft(TreeNode&lt;T&gt;* &amp;k2);//左左情况下的旋转\r\n        void SingRotateRight(TreeNode&lt;T&gt;* &amp;k2);//右右情况下的旋转\r\n        void DoubleRotateLR(TreeNode&lt;T&gt;* &amp;k3);//左右情况下的旋转\r\n        void DoubleRotateRL(TreeNode&lt;T&gt;* &amp;k3);//右左情况下的旋转\r\n        int Max(int cmpa,int cmpb);//求最大值\r\n\r\n    public:\r\n        AVLTree():root(NULL){}\r\n        void insert(T x);//插入接口\r\n        TreeNode&lt;T&gt;* find(T x);//查找接口\r\n        void Delete(T x);//删除接口\r\n        void traversal();//遍历接口\r\n\r\n};\r\n//计算节点的高度\r\ntemplate&lt;class T&gt;\r\nint AVLTree&lt;T&gt;::height(TreeNode&lt;T&gt;* node)\r\n{\r\n    if(node!=NULL)\r\n        return node-&gt;hgt;\r\n    return -1;\r\n}\r\n//求最大值\r\ntemplate&lt;class T&gt;\r\nint AVLTree&lt;T&gt;::Max(int cmpa,int cmpb)\r\n{\r\n    return cmpa&gt;cmpb?cmpa:cmpb;\r\n}\r\n//左左情况下的旋转\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::SingRotateLeft(TreeNode&lt;T&gt;* &amp;k2)\r\n{\r\n    TreeNode&lt;T&gt;* k1;\r\n    k1=k2-&gt;lson;\r\n    k2-&gt;lson=k1-&gt;rson;\r\n    k1-&gt;rson=k2;\r\n\r\n    k2-&gt;hgt=Max(height(k2-&gt;lson),height(k2-&gt;rson))+1;\r\n    k1-&gt;hgt=Max(height(k1-&gt;lson),k2-&gt;hgt)+1;\r\n}\r\n//右右情况下的旋转\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::SingRotateRight(TreeNode&lt;T&gt;* &amp;k2)\r\n{\r\n    TreeNode&lt;T&gt;* k1;\r\n    k1=k2-&gt;rson;\r\n    k2-&gt;rson=k1-&gt;lson;\r\n    k1-&gt;lson=k2;\r\n\r\n    k2-&gt;hgt=Max(height(k2-&gt;lson),height(k2-&gt;rson))+1;\r\n    k1-&gt;hgt=Max(height(k1-&gt;rson),k2-&gt;hgt)+1;\r\n}\r\n//左右情况的旋转\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::DoubleRotateLR(TreeNode&lt;T&gt;* &amp;k3)\r\n{\r\n    SingRotateRight(k3-&gt;lson);\r\n    SingRotateLeft(k3);\r\n}\r\n//右左情况的旋转\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::DoubleRotateRL(TreeNode&lt;T&gt;* &amp;k3)\r\n{\r\n    SingRotateLeft(k3-&gt;rson);\r\n    SingRotateRight(k3);\r\n}\r\n//插入\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::insertpri(TreeNode&lt;T&gt;* &amp;node,T x)\r\n{\r\n    if(node==NULL)//如果节点为空,就在此节点处加入x信息\r\n    {\r\n        node=new TreeNode&lt;T&gt;();\r\n        node-&gt;data=x;\r\n        return;\r\n    }\r\n    if(node-&gt;data&gt;x)//如果x小于节点的值,就继续在节点的左子树中插入x\r\n    {\r\n        insertpri(node-&gt;lson,x);\r\n        if(2==height(node-&gt;lson)-height(node-&gt;rson))\r\n            if(x&lt;node-&gt;lson-&gt;data)\r\n                SingRotateLeft(node);\r\n            else\r\n                DoubleRotateLR(node);\r\n    }\r\n    else if(node-&gt;data&lt;x)//如果x大于节点的值,就继续在节点的右子树中插入x\r\n    {\r\n        insertpri(node-&gt;rson,x);\r\n        if(2==height(node-&gt;rson)-height(node-&gt;lson))//如果高度之差为2的话就失去了平衡,需要旋转\r\n            if(x&gt;node-&gt;rson-&gt;data)\r\n                SingRotateRight(node);\r\n            else\r\n                DoubleRotateRL(node);\r\n    }\r\n    else ++(node-&gt;freq);//如果相等,就把频率加1\r\n    node-&gt;hgt=Max(height(node-&gt;lson),height(node-&gt;rson));\r\n}\r\n//插入接口\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::insert(T x)\r\n{\r\n    insertpri(root,x);\r\n}\r\n//查找\r\ntemplate&lt;class T&gt;\r\nTreeNode&lt;T&gt;* AVLTree&lt;T&gt;::findpri(TreeNode&lt;T&gt;* node,T x)\r\n{\r\n    if(node==NULL)//如果节点为空说明没找到,返回NULL\r\n    {\r\n        return NULL;\r\n    }\r\n    if(node-&gt;data&gt;x)//如果x小于节点的值,就继续在节点的左子树中查找x\r\n    {\r\n        return findpri(node-&gt;lson,x);\r\n    }\r\n    else if(node-&gt;data&lt;x)//如果x大于节点的值,就继续在节点的左子树中查找x\r\n    {\r\n        return findpri(node-&gt;rson,x);\r\n    }\r\n    else return node;//如果相等,就找到了此节点\r\n}\r\n//查找接口\r\ntemplate&lt;class T&gt;\r\nTreeNode&lt;T&gt;* AVLTree&lt;T&gt;::find(T x)\r\n{\r\n    return findpri(root,x);\r\n}\r\n//删除\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::Deletepri(TreeNode&lt;T&gt;* &amp;node,T x)\r\n{\r\n    if(node==NULL) return ;//没有找到值是x的节点\r\n    if(x &lt; node-&gt;data)\r\n    {\r\n         Deletepri(node-&gt;lson,x);//如果x小于节点的值,就继续在节点的左子树中删除x\r\n         if(2==height(node-&gt;rson)-height(node-&gt;lson))\r\n            if(node-&gt;rson-&gt;lson!=NULL&amp;&amp;(height(node-&gt;rson-&gt;lson)&gt;height(node-&gt;rson-&gt;rson)) )\r\n                DoubleRotateRL(node);\r\n            else\r\n                SingRotateRight(node);\r\n    }\r\n\r\n    else if(x &gt; node-&gt;data)\r\n    {\r\n         Deletepri(node-&gt;rson,x);//如果x大于节点的值,就继续在节点的右子树中删除x\r\n         if(2==height(node-&gt;lson)-height(node-&gt;rson))\r\n            if(node-&gt;lson-&gt;rson!=NULL&amp;&amp; (height(node-&gt;lson-&gt;rson)&gt;height(node-&gt;lson-&gt;lson) ))\r\n                DoubleRotateLR(node);\r\n            else\r\n                SingRotateLeft(node);\r\n    }\r\n\r\n    else//如果相等,此节点就是要删除的节点\r\n    {\r\n        if(node-&gt;lson&amp;&amp;node-&gt;rson)//此节点有两个儿子\r\n        {\r\n            TreeNode&lt;T&gt;* temp=node-&gt;rson;//temp指向节点的右儿子\r\n            while(temp-&gt;lson!=NULL) temp=temp-&gt;lson;//找到右子树中值最小的节点\r\n            //把右子树中最小节点的值赋值给本节点\r\n            node-&gt;data=temp-&gt;data;\r\n            node-&gt;freq=temp-&gt;freq;\r\n            Deletepri(node-&gt;rson,temp-&gt;data);//删除右子树中最小值的节点\r\n            if(2==height(node-&gt;lson)-height(node-&gt;rson))\r\n            {\r\n                if(node-&gt;lson-&gt;rson!=NULL&amp;&amp; (height(node-&gt;lson-&gt;rson)&gt;height(node-&gt;lson-&gt;lson) ))\r\n                    DoubleRotateLR(node);\r\n                else\r\n                    SingRotateLeft(node);\r\n            }\r\n        }\r\n        else//此节点有1个或0个儿子\r\n        {\r\n            TreeNode&lt;T&gt;* temp=node;\r\n            if(node-&gt;lson==NULL)//有右儿子或者没有儿子\r\n            node=node-&gt;rson;\r\n            else if(node-&gt;rson==NULL)//有左儿子\r\n            node=node-&gt;lson;\r\n            delete(temp);\r\n            temp=NULL;\r\n        }\r\n    }\r\n    if(node==NULL) return;\r\n    node-&gt;hgt=Max(height(node-&gt;lson),height(node-&gt;rson))+1;\r\n    return;\r\n}\r\n//删除接口\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::Delete(T x)\r\n{\r\n    Deletepri(root,x);\r\n}\r\n//中序遍历函数\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::insubtree(TreeNode&lt;T&gt;* node)\r\n{\r\n    if(node==NULL) return;\r\n    insubtree(node-&gt;lson);//先遍历左子树\r\n    cout&lt;&lt;node-&gt;data&lt;&lt;\" \";//输出根节点\r\n    insubtree(node-&gt;rson);//再遍历右子树\r\n}\r\n//中序遍历接口\r\ntemplate&lt;class T&gt;\r\nvoid AVLTree&lt;T&gt;::traversal()\r\n{\r\n    insubtree(root);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-148\">148</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-149\">149</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-150\">150</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-151\">151</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-152\">152</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-153\">153</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-154\">154</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-155\">155</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-156\">156</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-157\">157</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-158\">158</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-159\">159</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-160\">160</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-161\">161</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-162\">162</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-163\">163</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-164\">164</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-165\">165</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-166\">166</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-167\">167</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-168\">168</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-169\">169</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-170\">170</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-171\">171</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-172\">172</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-173\">173</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-174\">174</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-175\">175</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-176\">176</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-177\">177</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-178\">178</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-179\">179</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-180\">180</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-181\">181</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-182\">182</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-183\">183</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-184\">184</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-185\">185</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-186\">186</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-187\">187</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-188\">188</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-189\">189</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-190\">190</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-191\">191</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-192\">192</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-193\">193</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-194\">194</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-195\">195</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-196\">196</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-197\">197</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-198\">198</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-199\">199</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-200\">200</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-201\">201</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-202\">202</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-203\">203</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-204\">204</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-205\">205</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-206\">206</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-207\">207</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-208\">208</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-209\">209</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-210\">210</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-211\">211</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-212\">212</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-213\">213</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-214\">214</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-215\">215</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-216\">216</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-217\">217</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-218\">218</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-219\">219</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-220\">220</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-221\">221</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-222\">222</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-223\">223</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-224\">224</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-225\">225</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-226\">226</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-227\">227</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1417069860974-228\">228</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1417069860974-229\">229</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-1\"><span class=\"crayon-c\">//AVL树节点信息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-2\"><span class=\"crayon-e\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TreeNode</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">TreeNode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">lson</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">rson</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">freq</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">hgt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hgt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//高度</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//频率</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">TreeNode*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//指向左儿子的地址</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">TreeNode*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//指向右儿子的地址</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-13\"><span class=\"crayon-c\">//AVL树类的属性和方法声明</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-14\"><span class=\"crayon-e\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-15\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AVLTree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//根节点</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insertpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//插入</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">findpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//查找</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insubtree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//中序遍历</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Deletepri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//删除</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//求树的高度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//左左情况下的旋转</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SingRotateRight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//右右情况下的旋转</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoubleRotateLR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//左右情况下的旋转</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoubleRotateRL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//右左情况下的旋转</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmpa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmpb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//求最大值</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">AVLTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">root</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//插入接口</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//查找接口</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//删除接口</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">traversal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//遍历接口</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-36\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-37\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-38\"><span class=\"crayon-c\">//计算节点的高度</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-39\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-40\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-41\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">!=</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-45\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-46\"><span class=\"crayon-c\">//求最大值</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-47\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-48\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmpa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmpb</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-49\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmpa</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">cmpb</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">cmpa</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">cmpb</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-51\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-52\"><span class=\"crayon-c\">//左左情况下的旋转</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-53\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-54\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-55\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-57\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">k2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-60\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-63\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-64\"><span class=\"crayon-c\">//右右情况下的旋转</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-65\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-66\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">SingRotateRight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-67\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-68\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-69\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-70\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-71\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">k2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-72\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-74\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k1</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">k2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-75\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-76\"><span class=\"crayon-c\">//左右情况的旋转</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-77\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-78\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">DoubleRotateLR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-79\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-80\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SingRotateRight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k3</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-81\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-82\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-83\"><span class=\"crayon-c\">//右左情况的旋转</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-84\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-85\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">DoubleRotateRL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">k3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-86\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-87\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k3</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-88\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SingRotateRight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-89\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-90\"><span class=\"crayon-c\">//插入</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-91\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-92\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">insertpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-93\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-94\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果节点为空,就在此节点处加入x信息</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-95\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-96\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-97\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-98\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-99\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-100\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果x小于节点的值,就继续在节点的左子树中插入x</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-101\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-102\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">insertpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-103\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">==</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-104\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-105\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-106\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-107\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">DoubleRotateLR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-108\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-109\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果x大于节点的值,就继续在节点的右子树中插入x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-110\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-111\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">insertpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-112\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">==</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果高度之差为2的话就失去了平衡,需要旋转</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-113\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-114\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">SingRotateRight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-115\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-116\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">DoubleRotateRL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-117\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-118\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//如果相等,就把频率加1</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-119\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-120\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-121\"><span class=\"crayon-c\">//插入接口</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-122\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-123\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-124\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-125\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">insertpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-126\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-127\"><span class=\"crayon-c\">//查找</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-128\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-129\"><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">findpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-130\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-131\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果节点为空说明没找到,返回NULL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-132\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-133\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-134\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-135\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果x小于节点的值,就继续在节点的左子树中查找x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-136\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-137\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">findpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-138\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-139\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//如果x大于节点的值,就继续在节点的左子树中查找x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-140\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-141\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">findpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-142\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-143\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//如果相等,就找到了此节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-144\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-145\"><span class=\"crayon-c\">//查找接口</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-146\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-147\"><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-148\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-149\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">findpri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-150\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-151\"><span class=\"crayon-c\">//删除</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-152\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-153\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">Deletepri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-154\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-155\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//没有找到值是x的节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-156\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-157\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-158\"><span class=\"crayon-h\">         </span><span class=\"crayon-e\">Deletepri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//如果x小于节点的值,就继续在节点的左子树中删除x</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-159\"><span class=\"crayon-h\">         </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">==</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-160\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">!=</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-161\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">DoubleRotateRL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-162\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-163\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">SingRotateRight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-164\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-165\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-166\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-167\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-168\"><span class=\"crayon-h\">         </span><span class=\"crayon-e\">Deletepri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//如果x大于节点的值,就继续在节点的右子树中删除x</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-169\"><span class=\"crayon-h\">         </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">==</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-170\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">!=</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-171\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">DoubleRotateLR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-172\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-173\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-174\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-175\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-176\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-c\">//如果相等,此节点就是要删除的节点</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-177\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-178\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//此节点有两个儿子</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-179\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-180\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//temp指向节点的右儿子</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-181\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">!=</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//找到右子树中值最小的节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-182\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">//把右子树中最小节点的值赋值给本节点</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-183\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-184\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">freq</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-185\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Deletepri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//删除右子树中最小值的节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-186\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">==</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-187\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-188\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">!=</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-189\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">DoubleRotateLR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-190\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-191\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">SingRotateLeft</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-192\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-193\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-194\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-c\">//此节点有1个或0个儿子</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-195\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-196\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-197\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//有右儿子或者没有儿子</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-198\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-199\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//有左儿子</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-200\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-201\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-202\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">temp</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-203\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-204\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-205\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-206\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">hgt</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-207\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-208\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-209\"><span class=\"crayon-c\">//删除接口</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-210\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-211\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">Delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-212\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-213\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Deletepri</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-214\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-215\"><span class=\"crayon-c\">//中序遍历函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-216\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-217\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">insubtree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TreeNode</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-218\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-219\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">==</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-220\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">insubtree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//先遍历左子树</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-221\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//输出根节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-222\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">insubtree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rson</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//再遍历右子树</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-223\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-224\"><span class=\"crayon-c\">//中序遍历接口</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-225\"><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-226\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AVLTree</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">traversal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-227\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1417069860974-228\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">insubtree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1417069860974-229\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0338 seconds] -->\r\n<p></p>\n<h2 class=\"First\">3.2 平衡二叉树之红黑树</h2>\n<p><strong>红黑树的定义：</strong>红黑树是一种自平衡二叉查找树，是在计算机科学中用到的一种数据结构，典型的用途是实现关联数组。它是在1972年由鲁道夫·贝尔发明的，称之为”对称二叉B树”，它现代的名字是在 Leo J. Guibas 和 Robert Sedgewick 于1978年写的一篇论文中获得的。<strong>它是复杂的，但它的操作有着良好的最坏情况运行时间，并且在实践中是高效的: 它可以在O(logn)时间内做查找，插入和删除，这里的n是树中元素的数目。</strong></p>\n<p>红黑树和AVL树一样都对插入时间、删除时间和查找时间提供了最好可能的最坏情况担保。这不只是使它们在时间敏感的应用如实时应用（real time application）中有价值，而且使它们有在提供最坏情况担保的其他数据结构中作为建造板块的价值；例如，在计算几何中使用的很多数据结构都可以基于红黑树。此外，红黑树还是2-3-4树的一种等同，它们的思想是一样的，只不过红黑树是2-3-4树用二叉树的形式表示的。</p>\n<p><strong>红黑树的性质：</strong></p>\n<p>红黑树是每个节点都带有颜色属性的二叉查找树，颜色为红色或黑色。在二叉查找树强制的一般要求以外，对于任何有效的红黑树我们增加了如下的额外要求:</p>\n<p>性质1. 节点是红色或黑色。</p>\n<p>性质2. 根是黑色。</p>\n<p>性质3. 所有叶子都是黑色（叶子是NIL节点）。</p>\n<p>性质4. 每个红色节点必须有两个黑色的子节点。(从每个叶子到根的所有路径上不能有两个连续的红色节点。)</p>\n<p>性质5. 从任一节点到其每个叶子的所有简单路径都包含相同数目的黑色节点。</p>\n<p>下面是一个具体的红黑树的图例：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/9fd5e683147961431e0ecfcffbe5805b.png\"><img class=\"aligncenter wp-image-111691 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/9fd5e683147961431e0ecfcffbe5805b.png\" alt=\"450px-Red-black_tree_example.svg\" width=\"450\" height=\"217\"></a></p>\n<p>这些约束确保了红黑树的关键特性: 从根到叶子的最长的可能路径不多于最短的可能路径的两倍长。结果是这个树大致上是平衡的。因为操作比如插入、删除和查找某个值的最坏情况时间都要求与树的高度成比例，这个在高度上的理论上限允许红黑树在最坏情况下都是高效的，而不同于普通的二叉查找树。</p>\n<p>要知道为什么这些性质确保了这个结果，注意到性质4导致了路径不能有两个毗连的红色节点就足够了。最短的可能路径都是黑色节点，最长的可能路径有交替的红色和黑色节点。因为根据性质5所有最长的路径都有相同数目的黑色节点，这就表明了没有路径能多于任何其他路径的两倍长。</p>\n<p>以下内容整理自<a href=\"https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91\" target=\"_blank\">wiki百科之红黑树</a>。</p>\n<p><strong>红黑树的自平衡操作：</strong></p>\n<p>因为每一个红黑树也是一个特化的二叉查找树，因此红黑树上的只读操作与普通二叉查找树上的只读操作相同。然而，在红黑树上进行插入操作和删除操作会导致不再符合红黑树的性质。恢复红黑树的性质需要少量(O(logn))的颜色变更(实际是非常快速的)和不超过三次树旋转(对于插入操作是两次)。虽然插入和删除很复杂，但操作时间仍可以保持为O(logn) 次。</p>\n<p><strong>我们首先以二叉查找树的方法增加节点并标记它为红色。如果设为黑色，就会导致根到叶子的路径上有一条路上，多一个额外的黑节点，这个是很难调整的（违背性质5）。</strong>但是设为红色节点后，可能会导致出现两个连续红色节点的冲突，那么可以通过颜色调换（color flips）和树旋转来调整。下面要进行什么操作取决于其他临近节点的颜色。同人类的家族树中一样，我们将使用术语叔父节点来指一个节点的父节点的兄弟节点。注意:</p>\n<ul>\n<li>性质1和性质3总是保持着。</li>\n<li>性质4只在增加红色节点、重绘黑色节点为红色，或做旋转时受到威胁。</li>\n<li>性质5只在增加黑色节点、重绘红色节点为黑色，或做旋转时受到威胁。</li>\n</ul>\n<p><strong>插入操作：</strong></p>\n<p>假设，将要插入的节点标为<strong>N</strong>，N的父节点标为<strong>P</strong>，N的祖父节点标为<strong>G</strong>，N的叔父节点标为<strong>U</strong>。在图中展示的任何颜色要么是由它所处情形这些所作的假定，要么是假定所暗含的。</p>\n<p><strong>情形1: </strong>该树为空树，直接插入根结点的位置，违反性质1，把节点颜色有红改为黑即可。</p>\n<p><strong>情形2:</strong> 插入节点N的父节点P为黑色，不违反任何性质，无需做任何修改。在这种情形下，树仍是有效的。性质5也未受到威胁，尽管新节点N有两个黑色叶子子节点；但由于新节点N是红色，通过它的每个子节点的路径就都有同通过它所取代的黑色的叶子的路径同样数目的黑色节点，所以依然满足这个性质。</p>\n<p>注： 情形1很简单，情形2中P为黑色，一切安然无事，但P为红就不一样了，下边是P为红的各种情况，也是真正难懂的地方。</p>\n<p><strong>情形3: </strong>如果父节点P和叔父节点U二者都是红色，(此时新插入节点N做为P的左子节点或右子节点都属于情形3,这里右图仅显示N做为P左子的情形)则我们可以将它们两个重绘为黑色并重绘祖父节点G为红色(用来保持性质4)。现在我们的新节点N有了一个黑色的父节点P。因为通过父节点P或叔父节点U的任何路径都必定通过祖父节点G，在这些路径上的黑节点数目没有改变。但是，红色的祖父节点G的父节点也有可能是红色的，这就违反了性质4。为了解决这个问题，我们在祖父节点G上递归地进行上述情形的整个过程（把G当成是新加入的节点进行各种情形的检查）。比如，G为根节点，那我们就直接将G变为黑色（情形1）；如果G不是根节点，而它的父节点为黑色，那符合所有的性质，直接插入即可（情形2）；如果G不是根节点，而它的父节点为红色，则递归上述过程（情形3）。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/dc3747336812e9055f958c56ade89eb8.png\"><img class=\"aligncenter wp-image-111692 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/dc3747336812e9055f958c56ade89eb8.png\" alt=\"2011120116425251\" width=\"300\" height=\"139\"></a></p>\n<p><strong>情形4:</strong> 父节点P是红色而叔父节点U是黑色或缺少，新节点N是其父节点的左子节点，而父节点P又是其父节点G的左子节点。在这种情形下，我们进行针对祖父节点G的一次右旋转; 在旋转产生的树中，以前的父节点P现在是新节点N和以前的祖父节点G的父节点。我们知道以前的祖父节点G是黑色，否则父节点P就不可能是红色(如果P和G都是红色就违反了性质4，所以G必须是黑色)。我们切换以前的父节点P和祖父节点G的颜色，结果的树满足性质4。性质5也仍然保持满足，因为通过这三个节点中任何一个的所有路径以前都通过祖父节点G，现在它们都通过以前的父节点P。在各自的情形下，这都是三个节点中唯一的黑色节点。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/4986c959603100e41cba2669d9e3ce0c.png\"><img class=\"aligncenter wp-image-111693 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/4986c959603100e41cba2669d9e3ce0c.png\" alt=\"Red-black_tree_insert_case_5\" width=\"310\" height=\"138\"></a></p>\n<p><strong>情形5:</strong> 父节点P是红色而叔父节点U是黑色或缺少，并且新节点N是其父节点P的右子节点而父节点P又是其父节点的左子节点。在这种情形下，我们进行一次左旋转调换新节点和其父节点的角色; 接着，我们按<strong>情形4</strong>处理以前的父节点P以解决仍然失效的性质4。注意这个改变会导致某些路径通过它们以前不通过的新节点N（比如图中1号叶子节点）或不通过节点P（比如图中3号叶子节点），但由于这两个节点都是红色的，所以性质5仍有效。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/9cfbf62dfdefe5891347de95a976758f.png\"><img class=\"aligncenter wp-image-111694 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/9cfbf62dfdefe5891347de95a976758f.png\" alt=\"Red-black_tree_insert_case_5\" width=\"283\" height=\"138\"></a></p>\n<p><strong>注: 插入实际上是原地算法，因为上述所有调用都使用了尾部递归。</strong></p>\n<p><strong>删除操作：</strong></p>\n<p><strong>如果需要删除的节点有两个儿子，那么问题可以被转化成删除另一个只有一个儿子的节点的问题</strong>。对于二叉查找树，在删除带有两个非叶子儿子的节点的时候，我们找到要么在它的左子树中的最大元素、要么在它的右子树中的最小元素，并把它的值转移到要删除的节点中。我们接着删除我们从中复制出值的那个节点，它必定有少于两个非叶子的儿子。因为只是复制了一个值，不违反任何性质，这就把问题简化为如何删除最多有一个儿子的节点的问题。它不关心这个节点是最初要删除的节点还是我们从中复制出值的那个节点。</p>\n<p><strong>我们只需要讨论删除只有一个儿子的节点</strong>(如果它两个儿子都为空，即均为叶子，我们任意将其中一个看作它的儿子)。如果我们删除一个红色节点（此时该节点的儿子将都为叶子节点），它的父亲和儿子一定是黑色的。所以我们可以简单的用它的黑色儿子替换它，并不会破坏性质3和性质4。通过被删除节点的所有路径只是少了一个红色节点，这样可以继续保证性质5。另一种简单情况是在被删除节点是黑色而它的儿子是红色的时候。如果只是去除这个黑色节点，用它的红色儿子顶替上来的话，会破坏性质5，但是如果我们重绘它的儿子为黑色，则曾经通过它的所有路径将通过它的黑色儿子，这样可以继续保持性质5。</p>\n<p><strong>需要进一步讨论的是在要删除的节点和它的儿子二者都是黑色的时候</strong>，这是一种复杂的情况。我们首先把要删除的节点替换为它的儿子。出于方便，称呼这个儿子为<strong>N</strong>(在新的位置上)，称呼它的兄弟(它父亲的另一个儿子)为<strong>S</strong>。在下面的示意图中，我们还是使用<strong>P</strong>称呼N的父亲，<strong>S<sub>L</sub></strong>称呼S的左儿子，<strong>S<sub>R</sub></strong>称呼S的右儿子。</p>\n<p>如果N和它初始的父亲是黑色，则删除它的父亲导致通过N的路径都比不通过它的路径少了一个黑色节点。因为这违反了性质5，树需要被重新平衡。有几种情形需要考虑:</p>\n<p><strong>情形1:</strong> N是新的根。在这种情形下，我们就做完了。我们从所有路径去除了一个黑色节点，而新根是黑色的，所以性质都保持着。</p>\n<p><strong>注意</strong>: 在情形2、5和6下，我们假定N是它父亲的左儿子。如果它是右儿子，则在这些情形下的左和右应当对调。</p>\n<p><strong>情形2:</strong> S是红色。在这种情形下我们在N的父亲上做左旋转，把红色兄弟转换成N的祖父，我们接着对调N的父亲和祖父的颜色。完成这两个操作后，尽管所有路径上黑色节点的数目没有改变，但现在N有了一个黑色的兄弟和一个红色的父亲（它的新兄弟是黑色因为它是红色S的一个儿子），所以我们可以接下去按<strong>情形4</strong>、<strong>情形5</strong>或<strong>情形6</strong>来处理。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/ce86b0e24e64c35067f5d087dc4c90ae.png\"><img class=\"aligncenter wp-image-111695 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ce86b0e24e64c35067f5d087dc4c90ae.png\" alt=\"Red-black_tree_insert_case_5\" width=\"298\" height=\"136\"></a></p>\n<p><strong>情形3:</strong> N的父亲、S和S的儿子都是黑色的。在这种情形下，我们简单的重绘S为红色。结果是通过S的所有路径，它们就是以前<em>不</em>通过N的那些路径，都少了一个黑色节点。因为删除N的初始的父亲使通过N的所有路径少了一个黑色节点，这使事情都平衡了起来。但是，通过P的所有路径现在比不通过P的路径少了一个黑色节点，所以仍然违反性质5。要修正这个问题，我们要从<strong>情形1</strong>开始，在P上做重新平衡处理。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/30759b4136b3cd56ba31eb8d06a434d2.png\"><img class=\"aligncenter wp-image-111696 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/30759b4136b3cd56ba31eb8d06a434d2.png\" alt=\"Red-black_tree_insert_case_5\" width=\"313\" height=\"132\"></a></p>\n<p><strong>情形4:</strong> S和S的儿子都是黑色，但是N的父亲是红色。在这种情形下，我们简单的交换N的兄弟和父亲的颜色。这不影响不通过N的路径的黑色节点的数目，但是它在通过N的路径上对黑色节点数目增加了一，添补了在这些路径上删除的黑色节点。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/61bda9c9a89a3f9ea5f01ed990070a39.png\"><img class=\"aligncenter wp-image-111697 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/61bda9c9a89a3f9ea5f01ed990070a39.png\" alt=\"Red-black_tree_insert_case_5\" width=\"313\" height=\"132\"></a></p>\n<p><strong>情形5:</strong> S是黑色，S的左儿子是红色，S的右儿子是黑色，而N是它父亲的左儿子。在这种情形下我们在S上做右旋转，这样S的左儿子成为S的父亲和N的新兄弟。我们接着交换S和它的新父亲的颜色。所有路径仍有同样数目的黑色节点，但是现在N有了一个黑色兄弟，他的右儿子是红色的，所以我们进入了<strong>情形6</strong>。N和它的父亲都不受这个变换的影响。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/9f411d70951995007ad2a59fb747d160.png\"><img class=\"aligncenter wp-image-111698 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/9f411d70951995007ad2a59fb747d160.png\" alt=\"Red-black_tree_insert_case_5\" width=\"247\" height=\"133\"></a></p>\n<p> </p>\n<p><strong>情形6:</strong> S是黑色，S的右儿子是红色，而N是它父亲的左儿子。在这种情形下我们在N的父亲上做左旋转，这样S成为N的父亲（P）和S的右儿子的父亲。我们接着交换N的父亲和S的颜色，并使S的右儿子为黑色。子树在它的根上的仍是同样的颜色，所以性质3没有被违反。但是，N现在增加了一个黑色祖先: 要么N的父亲变成黑色，要么它是黑色而S被增加为一个黑色祖父。所以，通过N的路径都增加了一个黑色节点。</p>\n<p>此时，如果一个路径不通过N，则有两种可能性:</p>\n<ul>\n<li>它通过N的新兄弟。那么它以前和现在都必定通过S和N的父亲，而它们只是交换了颜色。所以路径保持了同样数目的黑色节点。</li>\n<li>它通过N的新叔父，S的右儿子。那么它以前通过S、S的父亲和S的右儿子，但是现在只通过S，它被假定为它以前的父亲的颜色，和S的右儿子，它被从红色改变为黑色。合成效果是这个路径通过了同样数目的黑色节点。</li>\n</ul>\n<p>在任何情况下，在这些路径上的黑色节点数目都没有改变。所以我们恢复了性质4。在示意图中的白色节点可以是红色或黑色，但是在变换前后都必须指定相同的颜色。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/c0ea423eef5e175e0ba92e43ad17270d.png\"><img class=\"aligncenter wp-image-111699 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/c0ea423eef5e175e0ba92e43ad17270d.png\" alt=\"Red-black_tree_insert_case_5\" width=\"299\" height=\"143\"></a></p>\n<p><strong>红黑树实现源码：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983b8cdd1430541927491\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#define BLACK 1\r\n#define RED 0\r\n\r\nusing namespace std;\r\n\r\nclass bst {\r\nprivate:\r\n\r\n    struct Node {\r\n        int value;\r\n        bool color;\r\n        Node *leftTree, *rightTree, *parent;\r\n\r\n        Node() {\r\n            color = RED;\r\n            leftTree = NULL;\r\n            rightTree = NULL;\r\n            parent = NULL;\r\n            value = 0;\r\n        }\r\n\r\n        Node* grandparent() {\r\n            if (parent == NULL) {\r\n                return NULL;\r\n            }\r\n            return parent-&gt;parent;\r\n        }\r\n\r\n        Node* uncle() {\r\n            if (grandparent() == NULL) {\r\n                return NULL;\r\n            }\r\n            if (parent == grandparent()-&gt;rightTree)\r\n                return grandparent()-&gt;leftTree;\r\n            else\r\n                return grandparent()-&gt;rightTree;\r\n        }\r\n\r\n        Node* sibling() {\r\n            if (parent-&gt;leftTree == this)\r\n                return parent-&gt;rightTree;\r\n            else\r\n                return parent-&gt;leftTree;\r\n        }\r\n    };\r\n\r\n    void rotate_right(Node *p) {\r\n        Node *gp = p-&gt;grandparent();\r\n        Node *fa = p-&gt;parent;\r\n        Node *y = p-&gt;rightTree;\r\n\r\n        fa-&gt;leftTree = y;\r\n\r\n        if (y != NIL)\r\n            y-&gt;parent = fa;\r\n        p-&gt;rightTree = fa;\r\n        fa-&gt;parent = p;\r\n\r\n        if (root == fa)\r\n            root = p;\r\n        p-&gt;parent = gp;\r\n\r\n        if (gp != NULL) {\r\n            if (gp-&gt;leftTree == fa)\r\n                gp-&gt;leftTree = p;\r\n            else\r\n                gp-&gt;rightTree = p;\r\n        }\r\n\r\n    }\r\n\r\n    void rotate_left(Node *p) {\r\n        if (p-&gt;parent == NULL) {\r\n            root = p;\r\n            return;\r\n        }\r\n        Node *gp = p-&gt;grandparent();\r\n        Node *fa = p-&gt;parent;\r\n        Node *y = p-&gt;leftTree;\r\n\r\n        fa-&gt;rightTree = y;\r\n\r\n        if (y != NIL)\r\n            y-&gt;parent = fa;\r\n        p-&gt;leftTree = fa;\r\n        fa-&gt;parent = p;\r\n\r\n        if (root == fa)\r\n            root = p;\r\n        p-&gt;parent = gp;\r\n\r\n        if (gp != NULL) {\r\n            if (gp-&gt;leftTree == fa)\r\n                gp-&gt;leftTree = p;\r\n            else\r\n                gp-&gt;rightTree = p;\r\n        }\r\n    }\r\n\r\n    void inorder(Node *p) {\r\n        if (p == NIL)\r\n            return;\r\n\r\n        if (p-&gt;leftTree)\r\n            inorder(p-&gt;leftTree);\r\n\r\n        cout &lt;&lt; p-&gt;value &lt;&lt; \" \";\r\n                \r\n        if (p-&gt;rightTree)\r\n            inorder(p-&gt;rightTree);\r\n    }\r\n\r\n    string outputColor(bool color) {\r\n        return color ? \"BLACK\" : \"RED\";\r\n    }\r\n\r\n    Node* getSmallestChild(Node *p) {\r\n        if (p-&gt;leftTree == NIL)\r\n            return p;\r\n        return getSmallestChild(p-&gt;leftTree);\r\n    }\r\n\r\n    bool delete_child(Node *p, int data) {\r\n        if (p-&gt;value &gt; data) {\r\n            if (p-&gt;leftTree == NIL) {\r\n                return false;\r\n            }\r\n            return delete_child(p-&gt;leftTree, data);\r\n        } else if (p-&gt;value &lt; data) {\r\n            if (p-&gt;rightTree == NIL) {\r\n                return false;\r\n            }\r\n            return delete_child(p-&gt;rightTree, data);\r\n        } else if (p-&gt;value == data) {\r\n            if (p-&gt;rightTree == NIL) {\r\n                delete_one_child(p);\r\n                return true;\r\n            }\r\n            Node *smallest = getSmallestChild(p-&gt;rightTree);\r\n            swap(p-&gt;value, smallest-&gt;value);\r\n            delete_one_child(smallest);\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    void delete_one_child(Node *p) {\r\n        Node *child = p-&gt;leftTree == NIL ? p-&gt;rightTree : p-&gt;leftTree;\r\n        if (p-&gt;parent == NULL &amp;&amp; p-&gt;leftTree == NIL &amp;&amp; p-&gt;rightTree == NIL) {\r\n            p = NULL;\r\n            root = p;\r\n            return;\r\n        }\r\n        \r\n        if (p-&gt;parent == NULL) {\r\n            delete  p;\r\n            child-&gt;parent = NULL;\r\n            root = child;\r\n            root-&gt;color = BLACK;\r\n            return;\r\n        }\r\n        \r\n        if (p-&gt;parent-&gt;leftTree == p) {\r\n            p-&gt;parent-&gt;leftTree = child;\r\n        } else {\r\n            p-&gt;parent-&gt;rightTree = child;\r\n        }\r\n        child-&gt;parent = p-&gt;parent;\r\n\r\n        if (p-&gt;color == BLACK) {\r\n            if (child-&gt;color == RED) {\r\n                child-&gt;color = BLACK;\r\n            } else\r\n                delete_case(child);\r\n        }\r\n\r\n        delete p;\r\n    }\r\n\r\n    void delete_case(Node *p) {\r\n        if (p-&gt;parent == NULL) {\r\n            p-&gt;color = BLACK;\r\n            return;\r\n        }\r\n        if (p-&gt;sibling()-&gt;color == RED) {\r\n            p-&gt;parent-&gt;color = RED;\r\n            p-&gt;sibling()-&gt;color = BLACK;\r\n            if (p == p-&gt;parent-&gt;leftTree)\r\n                rotate_left(p-&gt;sibling());\r\n            else\r\n                rotate_right(p-&gt;sibling());\r\n        }\r\n        if (p-&gt;parent-&gt;color == BLACK &amp;&amp; p-&gt;sibling()-&gt;color == BLACK\r\n                &amp;&amp; p-&gt;sibling()-&gt;leftTree-&gt;color == BLACK &amp;&amp; p-&gt;sibling()-&gt;rightTree-&gt;color == BLACK) {\r\n            p-&gt;sibling()-&gt;color = RED;\r\n            delete_case(p-&gt;parent);\r\n        } else if (p-&gt;parent-&gt;color == RED &amp;&amp; p-&gt;sibling()-&gt;color == BLACK\r\n                &amp;&amp; p-&gt;sibling()-&gt;leftTree-&gt;color == BLACK &amp;&amp; p-&gt;sibling()-&gt;rightTree-&gt;color == BLACK) {\r\n            p-&gt;sibling()-&gt;color = RED;\r\n            p-&gt;parent-&gt;color = BLACK;\r\n        } else {\r\n            if (p-&gt;sibling()-&gt;color == BLACK) {\r\n                if (p == p-&gt;parent-&gt;leftTree &amp;&amp; p-&gt;sibling()-&gt;leftTree-&gt;color == RED\r\n                        &amp;&amp; p-&gt;sibling()-&gt;rightTree-&gt;color == BLACK) {\r\n                    p-&gt;sibling()-&gt;color = RED;\r\n                    p-&gt;sibling()-&gt;leftTree-&gt;color = BLACK;\r\n                    rotate_right(p-&gt;sibling()-&gt;leftTree);\r\n                } else if (p == p-&gt;parent-&gt;rightTree &amp;&amp; p-&gt;sibling()-&gt;leftTree-&gt;color == BLACK\r\n                        &amp;&amp; p-&gt;sibling()-&gt;rightTree-&gt;color == RED) {\r\n                    p-&gt;sibling()-&gt;color = RED;\r\n                    p-&gt;sibling()-&gt;rightTree-&gt;color = BLACK;\r\n                    rotate_left(p-&gt;sibling()-&gt;rightTree);\r\n                }\r\n            }\r\n            p-&gt;sibling()-&gt;color = p-&gt;parent-&gt;color;\r\n            p-&gt;parent-&gt;color = BLACK;\r\n            if (p == p-&gt;parent-&gt;leftTree) {\r\n                p-&gt;sibling()-&gt;rightTree-&gt;color = BLACK;\r\n                rotate_left(p-&gt;sibling());\r\n            } else {\r\n                p-&gt;sibling()-&gt;leftTree-&gt;color = BLACK;\r\n                rotate_right(p-&gt;sibling());\r\n            }\r\n        }\r\n    }\r\n\r\n    void insert(Node *p, int data) {\r\n        if (p-&gt;value &gt;= data) {\r\n            if (p-&gt;leftTree != NIL)\r\n                insert(p-&gt;leftTree, data);\r\n            else {\r\n                Node *tmp = new Node();\r\n                tmp-&gt;value = data;\r\n                tmp-&gt;leftTree = tmp-&gt;rightTree = NIL;\r\n                tmp-&gt;parent = p;\r\n                p-&gt;leftTree = tmp;\r\n                insert_case(tmp);\r\n            }\r\n        } else {\r\n            if (p-&gt;rightTree != NIL)\r\n                insert(p-&gt;rightTree, data);\r\n            else {\r\n                Node *tmp = new Node();\r\n                tmp-&gt;value = data;\r\n                tmp-&gt;leftTree = tmp-&gt;rightTree = NIL;\r\n                tmp-&gt;parent = p;\r\n                p-&gt;rightTree = tmp;\r\n                insert_case(tmp);\r\n            }\r\n        }\r\n    }\r\n\r\n    void insert_case(Node *p) {\r\n        if (p-&gt;parent == NULL) {\r\n            root = p;\r\n            p-&gt;color = BLACK;\r\n            return;\r\n        }\r\n        if (p-&gt;parent-&gt;color == RED) {\r\n            if (p-&gt;uncle()-&gt;color == RED) {\r\n                p-&gt;parent-&gt;color = p-&gt;uncle()-&gt;color = BLACK;\r\n                p-&gt;grandparent()-&gt;color = RED;\r\n                insert_case(p-&gt;grandparent());\r\n            } else {\r\n                if (p-&gt;parent-&gt;rightTree == p &amp;&amp; p-&gt;grandparent()-&gt;leftTree == p-&gt;parent) {\r\n                    rotate_left(p);\r\n                    rotate_right(p);\r\n                    p-&gt;color = BLACK;\r\n                    p-&gt;leftTree-&gt;color = p-&gt;rightTree-&gt;color = RED;\r\n                } else if (p-&gt;parent-&gt;leftTree == p &amp;&amp; p-&gt;grandparent()-&gt;rightTree == p-&gt;parent) {\r\n                    rotate_right(p);\r\n                    rotate_left(p);\r\n                    p-&gt;color = BLACK;\r\n                    p-&gt;leftTree-&gt;color = p-&gt;rightTree-&gt;color = RED;\r\n                } else if (p-&gt;parent-&gt;leftTree == p &amp;&amp; p-&gt;grandparent()-&gt;leftTree == p-&gt;parent) {\r\n                    p-&gt;parent-&gt;color = BLACK;\r\n                    p-&gt;grandparent()-&gt;color = RED;\r\n                    rotate_right(p-&gt;parent);\r\n                } else if (p-&gt;parent-&gt;rightTree == p &amp;&amp; p-&gt;grandparent()-&gt;rightTree == p-&gt;parent) {\r\n                    p-&gt;parent-&gt;color = BLACK;\r\n                    p-&gt;grandparent()-&gt;color = RED;\r\n                    rotate_left(p-&gt;parent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    void DeleteTree(Node *p) {\r\n        if (!p || p == NIL) {\r\n            return;\r\n        }\r\n        DeleteTree(p-&gt;leftTree);\r\n        DeleteTree(p-&gt;rightTree);\r\n        delete p;\r\n    }\r\npublic:\r\n\r\n    bst() {\r\n        NIL = new Node();\r\n        NIL-&gt;color = BLACK;\r\n        root = NULL;\r\n    }\r\n\r\n    ~bst() {\r\n        if (root)\r\n            DeleteTree(root);\r\n        delete NIL;\r\n    }\r\n\r\n    void inorder() {\r\n        if (root == NULL)\r\n            return;\r\n        inorder(root);\r\n        cout &lt;&lt; endl;\r\n    }\r\n\r\n    void insert(int x) {\r\n        if (root == NULL) {\r\n            root = new Node();\r\n            root-&gt;color = BLACK;\r\n            root-&gt;leftTree = root-&gt;rightTree = NIL;\r\n            root-&gt;value = x;\r\n        } else {\r\n            insert(root, x);\r\n        }\r\n    }\r\n\r\n    bool delete_value(int data) {\r\n        return delete_child(root, data);\r\n    }\r\nprivate:\r\n    Node *root, *NIL;\r\n};</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-148\">148</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-149\">149</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-150\">150</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-151\">151</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-152\">152</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-153\">153</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-154\">154</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-155\">155</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-156\">156</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-157\">157</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-158\">158</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-159\">159</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-160\">160</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-161\">161</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-162\">162</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-163\">163</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-164\">164</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-165\">165</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-166\">166</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-167\">167</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-168\">168</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-169\">169</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-170\">170</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-171\">171</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-172\">172</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-173\">173</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-174\">174</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-175\">175</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-176\">176</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-177\">177</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-178\">178</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-179\">179</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-180\">180</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-181\">181</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-182\">182</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-183\">183</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-184\">184</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-185\">185</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-186\">186</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-187\">187</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-188\">188</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-189\">189</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-190\">190</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-191\">191</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-192\">192</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-193\">193</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-194\">194</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-195\">195</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-196\">196</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-197\">197</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-198\">198</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-199\">199</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-200\">200</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-201\">201</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-202\">202</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-203\">203</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-204\">204</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-205\">205</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-206\">206</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-207\">207</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-208\">208</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-209\">209</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-210\">210</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-211\">211</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-212\">212</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-213\">213</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-214\">214</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-215\">215</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-216\">216</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-217\">217</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-218\">218</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-219\">219</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-220\">220</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-221\">221</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-222\">222</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-223\">223</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-224\">224</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-225\">225</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-226\">226</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-227\">227</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-228\">228</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-229\">229</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-230\">230</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-231\">231</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-232\">232</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-233\">233</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-234\">234</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-235\">235</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-236\">236</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-237\">237</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-238\">238</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-239\">239</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-240\">240</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-241\">241</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-242\">242</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-243\">243</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-244\">244</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-245\">245</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-246\">246</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-247\">247</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-248\">248</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-249\">249</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-250\">250</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-251\">251</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-252\">252</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-253\">253</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-254\">254</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-255\">255</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-256\">256</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-257\">257</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-258\">258</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-259\">259</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-260\">260</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-261\">261</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-262\">262</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-263\">263</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-264\">264</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-265\">265</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-266\">266</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-267\">267</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-268\">268</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-269\">269</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-270\">270</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-271\">271</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-272\">272</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-273\">273</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-274\">274</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-275\">275</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-276\">276</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-277\">277</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-278\">278</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-279\">279</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-280\">280</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-281\">281</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-282\">282</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-283\">283</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-284\">284</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-285\">285</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-286\">286</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-287\">287</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-288\">288</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-289\">289</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-290\">290</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-291\">291</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-292\">292</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-293\">293</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-294\">294</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-295\">295</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-296\">296</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-297\">297</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-298\">298</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-299\">299</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-300\">300</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-301\">301</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-302\">302</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-303\">303</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-304\">304</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-305\">305</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-306\">306</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-307\">307</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-308\">308</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-309\">309</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-310\">310</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-311\">311</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-312\">312</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-313\">313</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-314\">314</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-315\">315</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-316\">316</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-317\">317</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-318\">318</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-319\">319</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-320\">320</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-321\">321</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-322\">322</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-323\">323</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-324\">324</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-325\">325</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-326\">326</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-327\">327</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-328\">328</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-329\">329</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-330\">330</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-331\">331</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983b8cdd1430541927491-332\">332</div><div class=\"crayon-num\" data-line=\"crayon-5983b8cdd1430541927491-333\">333</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-1\"><span class=\"crayon-p\">#define BLACK 1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-2\"><span class=\"crayon-p\">#define RED 0</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-4\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-6\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bst</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-7\"><span class=\"crayon-m\">private</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-24\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-28\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">uncle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-31\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-34\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-36\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-38\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-40\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-41\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-43\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-46\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">gp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">fa</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-50\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">fa</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-53\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-55\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-56\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">fa</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-58\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-60\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-62\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-63\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-64\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-65\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">gp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-66\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-67\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">gp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-68\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-69\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-70\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-71\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-72\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-73\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-74\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-75\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-76\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-77\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">gp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-78\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">fa</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-79\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-80\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-81\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">fa</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-82\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-83\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-84\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-85\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-86\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">fa</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-87\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-88\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-89\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-90\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-91\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-92\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-93\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fa</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-94\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">gp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-95\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-96\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">gp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-97\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-98\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-99\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-100\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inorder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-101\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-102\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-103\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-104\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-105\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">inorder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-106\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-107\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-108\"><span class=\"crayon-h\">                </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-109\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-110\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">inorder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-111\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-112\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-113\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">outputColor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-114\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"BLACK\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"RED\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-115\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-116\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-117\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">Node*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSmallestChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-118\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-119\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-120\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSmallestChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-121\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-122\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-123\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-124\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-125\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-126\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-127\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-128\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-129\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-130\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-131\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-132\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-133\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-134\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-135\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-136\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">delete_one_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-137\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-138\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-139\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">smallest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSmallestChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-140\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smallest</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-141\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">delete_one_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">smallest</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-142\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-143\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-144\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-145\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-146\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-147\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_one_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-148\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">NIL</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-149\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-150\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-151\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-152\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-153\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-154\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-155\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-156\"><span class=\"crayon-h\">            </span><span class=\"crayon-i\">delete</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-157\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-158\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-159\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-160\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-161\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-162\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-163\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-164\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-165\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-166\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-167\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-168\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-169\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-170\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-171\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-172\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-173\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-174\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">delete_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-175\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-176\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-177\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">delete</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-178\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-179\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-180\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-181\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-182\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-183\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-184\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-185\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-186\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-187\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-188\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-189\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-190\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-191\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-192\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-193\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-194\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-195\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-196\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">delete_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-197\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-198\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-199\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-200\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-201\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-202\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-203\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-204\"><span class=\"crayon-h\">                        </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-205\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-206\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-207\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-208\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-209\"><span class=\"crayon-h\">                        </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-210\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-211\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-212\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-213\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-214\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-215\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-216\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-217\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-218\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-219\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-220\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-221\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-222\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">sibling</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-223\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-224\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-225\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-226\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-227\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-228\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-229\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-230\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-231\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-232\"><span class=\"crayon-h\">                </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-233\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-234\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-235\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-236\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-237\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">insert_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-238\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-239\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-240\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-241\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-242\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-243\"><span class=\"crayon-h\">                </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-244\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-245\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-246\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-247\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-248\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">insert_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-249\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-250\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-251\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-252\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-253\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-254\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-255\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-256\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-257\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-258\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-259\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-260\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">uncle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-261\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">uncle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-262\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-263\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">insert_case</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-264\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-265\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-266\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-267\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-268\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-269\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-270\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-271\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-272\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-273\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-274\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-275\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-276\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-277\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-278\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_right</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-279\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-280\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-281\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">grandparent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RED</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-282\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">rotate_left</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-r\">parent</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-283\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-284\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-285\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-286\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-287\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-288\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DeleteTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-289\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-290\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-291\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-292\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">DeleteTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-293\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">DeleteTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-294\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">delete</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-295\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-296\"><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-297\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-298\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">bst</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-299\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-300\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-301\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-302\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-303\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-304\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">~</span><span class=\"crayon-e\">bst</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-305\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-306\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">DeleteTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-307\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">delete </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-308\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-309\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-310\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inorder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-311\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-312\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-313\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">inorder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-314\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-315\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-316\"> </div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-317\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-318\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-319\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-320\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BLACK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-321\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">leftTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">rightTree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-322\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-323\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-324\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-325\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-326\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-327\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-328\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_value</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-329\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_child</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-330\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-331\"><span class=\"crayon-m\">private</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983b8cdd1430541927491-332\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">Node *</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">NIL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983b8cdd1430541927491-333\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0514 seconds] -->\r\n<p></p>\n<h1 class=\"First\">4. B树</h1>\n<p>B树也是一种用于查找的平衡树，但是它不是二叉树。</p>\n<p><strong>B树的定义：</strong>B树（<span class=\"LangWithName\"><span lang=\"en\" xml:lang=\"en\">B-tree）是一种树状数据结构，能够用来存储排序后的数据。这种数据结构能够让查找数据、循序存取、插入数据及删除的动作，都在对数时间内完成。B树，概括来说是一个一般化的二叉查找树，可以拥有多于2个子节点。与自平衡二叉查找树不同，B-树为系统最优化大块数据的读和写操作。B-tree算法减少定位记录时所经历的中间过程，从而加快存取速度。这种数据结构常被应用在数据库和文件系统的实作上。</span></span></p>\n<p>在B树中查找给定关键字的方法是，首先把根结点取来，在根结点所包含的关键字K1,…,Kn查找给定的关键字（可用顺序查找或二分查找法），若找到等于给定值的关键字，则查找成功；否则，一定可以确定要查找的关键字在Ki与Ki+1之间，Pi为指向子树根节点的指针，此时取指针Pi所指的结点继续查找，直至找到，或指针Pi为空时查找失败。</p>\n<p>B树作为一种多路搜索树（并不是二叉的）：</p>\n<p>1) 定义任意非叶子结点最多只有M个儿子；且M&gt;2；</p>\n<p>2) 根结点的儿子数为[2, M]；</p>\n<p>3) 除根结点以外的非叶子结点的儿子数为[M/2, M]；</p>\n<p>4) 每个结点存放至少M/2-1（取上整）和至多M-1个关键字；（至少2个关键字）</p>\n<p>5) 非叶子结点的关键字个数=指向儿子的指针个数-1；</p>\n<p>6) 非叶子结点的关键字：K[1], K[2], …, K[M-1]；且K[i] &lt; K[i+1]；</p>\n<p>7) 非叶子结点的指针：P[1], P[2], …, P[M]；其中P[1]指向关键字小于K[1]的子树，P[M]指向关键字大于K[M-1]的子树，其它P[i]指向关键字属于(K[i-1], K[i])的子树；</p>\n<p>8) 所有叶子结点位于同一层；</p>\n<p>如下图为一个M=3的B树示例：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/0178191b698ab75a98fa1d0bb03cc51f.jpg\"><img class=\"aligncenter wp-image-111700 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0178191b698ab75a98fa1d0bb03cc51f.jpg\" alt=\"4\" width=\"624\" height=\"268\"></a></p>\n<p>B树创建的示意图：</p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fh5p12mz57g20qm06d4qq.gif\" width=\"958\" height=\"229\"></p>\n<h1 class=\"First\">5. B+树</h1>\n<p>B+树是B树的变体，也是一种多路搜索树：</p>\n<p>1) 其定义基本与B-树相同，除了：</p>\n<p>2) 非叶子结点的子树指针与关键字个数相同；</p>\n<p>3) 非叶子结点的子树指针P[i]，指向关键字值属于[K[i], K[i+1])的子树（B-树是开区间）；</p>\n<p>4) 为所有叶子结点增加一个链指针；</p>\n<p>5) 所有关键字都在叶子结点出现；</p>\n<p>下图为M=3的B+树的示意图：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/0972ef809f286cc29cd2d94687b2ef2d.jpg\"><img class=\"aligncenter wp-image-111701 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0972ef809f286cc29cd2d94687b2ef2d.jpg\" alt=\"4\" width=\"569\" height=\"345\"></a></p>\n<p>B+树的搜索与B树也基本相同，区别是B+树只有达到叶子结点才命中（B树可以在非叶子结点命中），其性能也等价于在关键字全集做一次二分查找；</p>\n<p><strong>B+的性质：</strong></p>\n<p>1.所有关键字都出现在叶子结点的链表中（稠密索引），且链表中的关键字恰好是有序的；</p>\n<p>2.不可能在非叶子结点命中；</p>\n<p>3.非叶子结点相当于是叶子结点的索引（稀疏索引），叶子结点相当于是存储（关键字）数据的数据层；</p>\n<p>4.更适合文件索引系统。</p>\n<p>下面为一个B+树创建的示意图：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fh5p2ef94jg20rz05i7wi.gif\" width=\"1007\" height=\"198\"></p>\n<h1 class=\"First\">6. B*树</h1>\n<p>B*树是B+树的变体，在B+树的非根和非叶子结点再增加指向兄弟的指针，将结点的最低利用率从1/2提高到2/3。</p>\n<p>B*树如下图所示：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/eb5835f421e029240105ccb8e80279ee.jpg\"><img class=\"aligncenter wp-image-111702 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/eb5835f421e029240105ccb8e80279ee.jpg\" alt=\"4\" width=\"569\" height=\"345\"></a></p>\n<p>B*树定义了非叶子结点关键字个数至少为(2/3)*M，即块的最低使用率为2/3（代替B+树的1/2）；</p>\n<p>B+树的分裂：当一个结点满时，分配一个新的结点，并将原结点中1/2的数据复制到新结点，最后在父结点中增加新结点的指针；B+树的分裂只影响原结点和父结点，而不会影响兄弟结点，所以它不需要指向兄弟的指针；</p>\n<p>B*树的分裂：当一个结点满时，如果它的下一个兄弟结点未满，那么将一部分数据移到兄弟结点中，再在原结点插入关键字，最后修改父结点中兄弟结点的关键字（因为兄弟结点的关键字范围改变了）；如果兄弟也满了，则在原结点与兄弟结点之间增加新结点，并各复制1/3的数据到新结点，最后在父结点增加新结点的指针；</p>\n<p>所以，B*树分配新结点的概率比B+树要低，空间使用率更高。</p>\n<h1 class=\"First\">7. Trie树</h1>\n<p>Tire树称为字典树，又称单词查找树，Trie树，是一种树形结构，是一种哈希树的变种。典型应用是用于统计，排序和保存大量的字符串（但不仅限于字符串），所以经常被搜索引擎系统用于文本词频统计。<strong>它的优点是：利用字符串的公共前缀来减少查询时间，最大限度地减少无谓的字符串比较，查询效率比哈希树高。</strong></p>\n<div class=\"para\"><strong>Tire树的三个基本性质：</strong></div>\n<div class=\"para\">1) 根节点不包含字符，除根节点外每一个节点都只包含一个字符；</div>\n<div class=\"para\">2) 从根节点到某一节点，路径上经过的字符连接起来，为该节点对应的字符串；</div>\n<div class=\"para\">3) 每个节点的所有子节点包含的字符都不相同。</div>\n<p><strong>Tire树的应用：</strong></p>\n<p>1) <span class=\"headline-content\">串的快速检索</span></p>\n<p class=\"para\">给出N个单词组成的熟词表，以及一篇全用小写英文书写的文章，请你按最早出现的顺序写出所有不在熟词表中的生词。在这道题中，我们可以用数组枚举，用哈希，用字典树，先把熟词建一棵树，然后读入文章进行比较，这种方法效率是比较高的。</p>\n<p class=\"para\"><span class=\"headline-content\">2) “串”排序</span></p>\n<p class=\"para\">给定N个互不相同的仅由一个单词构成的英文名，让你将他们按字典序从小到大输出。用字典树进行排序，采用数组的方式创建字典树，这棵树的每个结点的所有儿子很显然地按照其字母大小排序。对这棵树进行先序遍历即可。</p>\n<p class=\"para\"><span class=\"headline-content\">3) 最长公共前缀</span></p>\n<p class=\"para\">对所有串建立字典树，对于两个串的最长公共前缀的长度即他们所在的结点的公共祖先个数，于是，问题就转化为求公共祖先的问题。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111680\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111680votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111680\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "02798e0da54694b76c5f84ea9e994105", "front_image_path": "full/6032d7dc1233f95d17343e58eeaff17e6a49cb23.jpg"}
{"title": "漫画算法：什么是跳跃表？", "url": "http://blog.jobbole.com/111731/", "create_date": "2017/07/04", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/07/daab64eb4fff66513ac482d07e5ae054.jpeg"], "fav_count": 10, "comment_count": 5, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/bjweimengshu\">玻璃猫</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>这是发生在很多年以前的故事……</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/daab64eb4fff66513ac482d07e5ae054.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/890d2a8f840ed95165dcd3df24ed584c.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/1ec995966632cc86d75a2511bba11c5c.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/b0c602dc9acb987c129f35169341b74d.jpeg\"></p>\n<p>几天以前……</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/53f3319b898ce41a545b29d930946a2a.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/5f1e257214c48a4d8246b9395bb0f0df.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/10dd099feb00060dad6b1339e0db8799.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/45606dfe47cc5586318007d1970f26e5.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0716a40761dbfdbf797543bb24b58945.jpeg\"></p>\n<p>几天之后……</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/5f5785668595f59e8ba4778cae9f2d6a.jpeg\"></p>\n<p>拍卖行的商品总数量有几十万件，对应数据库商品表的几十万条记录。</p>\n<p>如果是按照商品名称精确查询还好办，可以直接从数据库查出来，最多也就上百条记录。</p>\n<p>如果是没有商品名称的全量查询怎么办？总不可能把数据库里的所有记录全查出来吧，而且还要支持不同字段的排序。</p>\n<p>所以，只能提前在内存中存储有序的全量商品集合，每一种排序方式都保存成独立的集合，每次请求的时候按照请求的排序种类，返回对应的集合。</p>\n<p>比如按价格字段排序的集合：</p>\n<p>比如按等级字段排序的集合：</p>\n<p>需要注意的是，当时还没有Redis这样的内存数据库，所以小灰只能自己实现一套合适的数据结构来存储。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/8eadcb96909cbebc38292974d5216fab.jpeg\"></p>\n<p>拍卖行商品列表是线性的，最容易表达线性结构的自然是数组和链表。可是，无论是数组还是链表，在插入新商品的时候，都会存在性能问题。</p>\n<p>按照商品等级排序的集合为例，如果使用数组，插入新商品的方式如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/af7f12cccfbda80b967d515acebe79d9.jpeg\"></p>\n<p>如果要插入一个等级是3的商品，首先要知道这个商品应该插入的位置。使用二分查找可以最快定位，这一步时间复杂度是O（logN）。</p>\n<p>插入过程中，原数组中所有大于3的商品都要右移，这一步时间复杂度是O（N）。所以总体时间复杂度是O（N）。</p>\n<p>如果使用链表，插入新商品的方式如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/1bce6be23668647edf9eff28d305c84f.jpeg\"></p>\n<p>如果要插入一个等级是3的商品，首先要知道这个商品应该插入的位置。链表无法使用二分查找，只能和原链表中的节点逐一比较大小来确定位置。这一步的时间复杂度是O（N）。</p>\n<p>插入的过程倒是很容易，直接改变节点指针的目标，时间复杂度O（1）。因此总体的时间复杂度也是O（N）。</p>\n<p>这对于拥有几十万商品的集合来说，这两种方法显然都太慢了。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e3be5ef6ac109306ee1dd169fb6b8df3.jpeg\"></p>\n<p>——————————————</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/00e8f84563ba3fc4e926f4b8b2f5fe7a.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e795edb90cf7d598d733592920657a97.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/d3cd2a28c4e3e48550d33f7fe4a47fd0.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/02717bbe18ec7d1034580481ffa22e7e.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/9bfe1887ff9177a8c0f303de054c79fe.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/377693e7b3f37892f42e4e144f92c362.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0b9b3c90dc0681f0af4963d783dff24d.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/15ece5c25170a528131c4e7803c8e0e8.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a58d35069f85e181659f2c8dc98cffbc.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/325af9d7f350486e58b41b32bd254227.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/c708e4a0c267b5e9f3a37ad309e6c3e8.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/fa5f0684ada4d509f3e978c104f576ac.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/4d469cbe0d0afb9bb7cf2c99f266a5f9.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/d972154799e05c43dc61c56cbc182203.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e0ef1f5c4cbfa110713984f06904c97a.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/bb33df3e70571a35b0d38cfa2aa0f719.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/c66bd9b6ba634f5df05dfb4931201217.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/757e77b87645239013108a7eac7cac78.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a502d32bad14a5943b78e5ec283eb6a3.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ea99ed67b7cdb47d04c3703f12a64bc4.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e98cfa966bb1cfa58a5e8a11505a3e0f.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/6e5972f05c028476a0b2eb43850a1432.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ea50cbc49ca84c72b94cb693d121c017.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/3063e527ca511c457824b146b3047fb2.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/ad1e060829476ef9de94d33ea246009d.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/f0fed037f81a07b51108a6d6468e4235.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/6f7628b9803eaae385222da353b34b83.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0b69b19d022c8a75aa2d83fca3d10066.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/a327ac84038bdf376496a07a5d61d23d.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/98b8caa7a5b7da9aaf7999a7f502fd92.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/df485893afb0b40cfec65ce19233faa6.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0c38e0ee3659932960bbc9b3c310fab8.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/dedddf4bf8ad251e479ce73ef0f628c9.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/4b8a95bfc81b232d79b2c8056ca454ec.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/4f6bafe8717d30780a0bc7ae1110c37d.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/9e92dc231f4069da54a71fa6be3bd12e.jpeg\"></p>\n<p>新节点和各层索引节点逐一比较，确定原链表的插入位置。O（logN）</p>\n<p>把索引插入到原链表。O（1）</p>\n<p>利用抛硬币的随机方式，决定新节点是否提升为上一级索引。结果为“正”则提升并继续抛硬币，结果为“负”则停止。O（logN）</p>\n<p>总体上，跳跃表插入操作的时间复杂度是O（logN），而这种数据结构所占空间是2N，既空间复杂度是 O（N）。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/95b14789cf228b85159be05aa93cbaa4.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0a64ff5e6453328bf1360416339c0adb.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/0da2ce061fbca4790c93b0139e66d289.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/86a6084f88fa592dd304e890b72409eb.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/7c32aa5ab5f2c936078f16840eabf1b2.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/41d9de8c654dc43b0f1703b0e29c6590.jpeg\"></p>\n<p>自上而下，查找第一次出现节点的索引，并逐层找到每一层对应的节点。O（logN）</p>\n<p>删除每一层查找到的节点，如果该层只剩下1个节点，删除整个一层（原链表除外）。O（logN）</p>\n<p>总体上，跳跃表删除操作的时间复杂度是O（logN）。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/24f060f88decdf946d1069ce4c82f57d.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/e7566dee2274eb9bfcefcc13c1a7494c.jpeg\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/869228a1933d8e4a9e8ec81afc0603d5.jpeg\"></p>\n<p>小灰和大黄并不知道，他们的这一解决方案和若干年后Redis当中的Sorted-set不谋而合。而Sorted-set这种有序集合，正是对于跳跃表的改进和应用。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/2df4a3ede6e684f78858dfde0e7b118f.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111731\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111731votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111731\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/bjweimengshu\">玻璃猫</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/bjweimengshu\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/7ce4028f2cece3294efcb3e5caa73af1.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            互联网公司的码农一枚，喜欢算法和面向对象设计。个人微信号：13522239721 个人订阅号：dreamsee321欢迎一起交流讨论！        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/bjweimengshu\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/bjweimengshu/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/bjweimengshu/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 94</a> · <a title=\"个人微信：bjweimengshu\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "趣文小说", "url_object_id": "a7e761864e16693a072a866a8afdabb1", "front_image_path": "full/27823440373381b04421fc70634750dfcfca3b30.jpg"}
{"title": "程序员生涯第一生存法则", "url": "http://blog.jobbole.com/111627/", "create_date": "2017/07/04", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/08/programmer-developer-at-work.jpg"], "fav_count": 10, "comment_count": 3, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s/deP25x394QP0lSItHFWs4Q\">世相微语</a>   </div><p><strong>程序员的职业生涯，第一生存法则是什么？</strong></p>\n<p>追求理想、兴趣与爱好？ 不免有点奢侈。坚守道德、信仰与纯粹？ 也许太高尚了。</p>\n<p>平衡生活与工作、兼顾家庭与公司、妥善处理人际关系、熟练掌握沟通能力与谈判能力、扩大社交圈、耐得住寂寞、熬得了夜、活到老充电充到老、懂得取舍与妥协、低调做人高调做事… <strong>本文暂不打算灌输这类心灵鸡汤。</strong></p>\n<p>打开格局、扩大视野、开阔眼界、看准趋势、远见卓识，成为华尔街的宽客、CEO、CTO、首席科学家、首席架构师… 不幸的是，<strong>90%的量产程序员穷极一生，也注定无缘赖此生存，因为这个领域，天赋与机遇缺一不可。</strong></p>\n<p>数据结构、设计模式、算法架构、模型抽象、操作系统原理、编译器原理、概率统计、数论、代数、几何、微分… 相信我，<strong>90%的量产程序员编程10年，赖此生存的时间也不超过10天。</strong></p>\n<hr>\n<p>那程序员生涯的第一生存法则是什么？</p>\n<p><strong>很简单，拥抱开源，拥抱变化。</strong><strong>远离远离开源的公司，远离技术落伍许久的团队。</strong></p>\n<p><strong>职业生涯，无论做什么，第一要务是生存，而且应该是越过越舒适的生存。</strong><strong>譬如律师、医生，程序员亦是如此。</strong></p>\n<p>程序员，到 34 岁了，被公司直接或变相辞退了，是挺悲催的。</p>\n<p>但更悲催的是，离开这里，居然无法找到（至少）和之前同水平待遇的工作…</p>\n<hr>\n<p><strong>原因何在？</strong></p>\n<p>因为不少程序员都固执的认为自己所在的公司、所在的部门、所在的团队会基业长青，自己只需要埋头苦干，耕耘好自己的一亩三分地就能安享太平。</p>\n<p><strong>可现实是，你的工作并不是你想象的那样不可替代，你的业务代码也许一个初出茅庐的毕业生就可以接手，你的团队、部门、甚至公司也可能会在你想象不到的时刻宣布解散。</strong></p>\n<p>如果你的工作只是基于公司内部的闭源框架或陈旧的架构体系，调用一下接口，写写业务代码，修复一下bug，离开这里，还剩多少竞争力呢？</p>\n<p>试想一下，同样是业务系统开发，一个基于Spring（称得上Java第一开源框架）、Spark（大数据开源框架）、Kafka（消息中间件）开发的程序员，和一个基于Spriii、Spaaa、Kafff（泛指公司内部专用的框架）开发的程序员，能力相当，走出这家公司谁更吃香？</p>\n<p>再试想一下，同样是应用开发，一个玩转 Spring、Struts、Hibernate（Java开源老三样）的程序员，和一个玩转 Spring、SpringMVC、Mybatis （Java开源新三样）或 Spring Boot 的程序员，水平相当，出去面试谁更可受欢迎？</p>\n<p><strong>即使只是一颗螺丝钉，也要做一颗技术领先，在外界受欢迎的螺丝钉。去哪都能如鱼得水、畅快优游。</strong></p>\n<p><strong>这也是90%的普通程序员，首要应该思考的问题。</strong></p>\n<p>当然，这不是让你心猿意马，而是要时刻保持危机感，否则一不小心就走入了职场死胡同。</p>\n<hr>\n<p><strong>职场上，最好的生存保障是，走出这家公司，我依然能过得很好，或更好。</strong></p>\n<p>公司实行成本优化，开始清退 34+ 的程序员了？挺好，对面那家公司正想双薪挖人。</p>\n<p>项目市场反馈不行，团队面临解散？没事，另外团队的 Leader 前几日刚找我聊了，正希望我加入。</p>\n<p>Salesforce 来推销他们的 SaaS（企业软件即服务）服务了，IT部门又可以优化几个人员了。正好，那家18薪出国游的公司正在招人，技术要求很匹配…</p>\n<hr>\n<p><strong>在一家远离开源的公司，或技术落伍许久的团队，即使你是首席架构、技术总监，熟练掌握公司或团队内部的各种框架，配置和接口倒背如流，还能一一填埋这些框架的各种坑，那又如何？</strong></p>\n<p><strong>35岁了，换了一家公司，也许你又归零成了小白，因为别人不玩你这一套。</strong></p>\n<p>诺基亚塞班系统的专家，别说去微软了，即使去诺西（诺基亚西门子通信的简称），很多都得从头再来。</p>\n<p>百度 Pyramid（细节自行百度）项目组的大拿，还不如一个精通 Hadoop 配置的工程师更有市场。</p>\n<p>SAP、Oracle EBS 开发的资深工程师，选择公司的余地远比不上一个初级 React 工程师。</p>\n<p>之前参加过一些创业项目的路演，遇到过一个项目，创始人是两位博士，号称研发了最先进的深度学习算法，用于医学扫描成像的癌症诊断。</p>\n<p>但是，TensorFlow（谷歌）、CNTK（微软）等深度学习开源框架的图像识别算法，在癌症检测方面也许可以碾压小创业团队所谓的绝门秘笈。挺替他们的投资人担心的…</p>\n<hr>\n<p><strong>目前为止，只说了 90% 的普通程序员，那还有 10% 精英程序员呢？</strong></p>\n<p><strong>毫无疑问，精英程序员更应该拥抱开源，因为那才是实现个人价值，提升个人影响力的最佳途径。</strong></p>\n<p>如果 Spring 没有开源，就不可能获得如此广泛的应用，Rod Johnson（Spring 之父）的影响力也会大打折扣。</p>\n<p>如果 Lucene、Hadoop 没有开源，很多人可能都不知道 Doug Cutting（Lucene、Hadoop 之父）为何许人也。</p>\n<p>如果 Linux、Git 没有开源，也许就没有 Linus Torvalds（Linux、Git 之父）的享誉世界。更重要的是，这个世界可能会被更多的蝗虫入侵。</p>\n<p><em>注：“突然间，到处都是微软的产品了，被蝗虫入侵了似的。我并不是说蝗虫是坏蛋，我喜欢所有的动物和昆虫。” —— 摘自 Linus Torvalds 语录：</em></p>\n<p><strong>诚然，如上的大神毕竟凤毛麟角。但大牛级别的程序员走向开源，带来的个人影响力、声誉、技术伙伴、收入、成就感等，都是实实在在的。</strong></p>\n<hr>\n<p><strong>说了这么多，也许你也挺无奈的，因为你所在的项目所用的技术体系，刚好是公司专有且闭源的，那怎么办？</strong></p>\n<p>你可以默默的把这篇文章转给你们技术领导看看，看他有没有这个思想觉悟。</p>\n<p>如果领导悟性不够，半晌没有回应，你可以提点他一下：无论实习码农，还是技术大牛，现在优秀的人才都拥抱开源去了，我们再这样下去，会招不到优秀的人才的…</p>\n<hr>\n<p><strong>如果非常不幸，你从事的是银行、基金、保险、电信、电力、石油等领域的业务，而且还是古董级别的项目，领导说稳定才是第一位的。那你也有三条路可以走：</strong></p>\n<p>1、祈祷自己早日实现财务自由（据年初的胡润报告，一线城市财富自由门槛是 2.9亿）</p>\n<p>2、祈祷所在的公司（部门）能够基业长青</p>\n<p>3、更新一下简历，准备跳槽吧~</p>\n<p><strong>那这种古董级别的项目怎么办？总得有人维护吧？</strong></p>\n<p><strong>加薪！加薪！加薪！不能给予锦绣未来，就给予更猛烈的薪水吧！</strong></p>\n<hr>\n<p><strong>最后，即使是第一生存法则，也不是金科玉律。因为世上总存在一些奇葩的人，码农这个群体也不例外。</strong></p>\n<p>譬如我找人，最关注的还是逻辑思考能力。写一个新算法，学一门新语言，用一套新框架，不过几周的事情，何必那么纠结。</p>\n<p>不过，玩过 Tensorflow 图像识别与目标检测，跑过 ResNet、Inception 等网络的优先…</p>\n<hr>\n<p><strong>题外话</strong></p>\n<p>本文通篇都是从务实的角度来谈开源的好处，事物都有两面性，那开源的坏处在哪里？</p>\n<p>其实前面也提到了一点，TensorFlow、CNTK 等开源框架的算法，完全可以碾压大多数人工智能创业团队所研发的所谓独门秘诀，特别是通用算法领域。</p>\n<p><strong>也就是说，不少创业团队、研究院、实验室里，一门心思研究底层算法（包括图像识别、语音识别、翻译、NLP等前沿领域）造轮子的精英程序员、研究员可能会因此荒废多年的心血…</strong></p>\n<p>譬如，两个月前，百度推出阿波罗计划，将自家的自动驾驶平台开放。这同时意味着，国内自动驾驶领域的不少创业团队可能会面临被洗牌、解散。如果今后谷歌也来这么一出，行业震荡可想而知。</p>\n<p>前些日子，还听我一位在某大厂研究院视觉识别组的同学说：谷歌物体检测与图像识别的API一开放，他们视觉组辛苦了3、4年的研发心血又白费了…</p>\n<p><strong>可开源是人类社会进化的最优选择，因为只有开源，才能实现人类顶级智慧的充分共享与协作。</strong>除了谷歌、脸书，连一贯封闭的微软、苹果两大巨头都已走向开放。</p>\n<p><strong>开源大潮，浩浩荡荡，顺之者势如破竹，逆之者举步维艰。</strong></p>\n<p>也许自然规律如此，人类宿命如此吧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111627\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111627votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111627\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "a6d7be3180bc17350825a84d5e402c60", "front_image_path": "full/bb38d11fb4038702790e0370ed966c50f186ff40.jpg"}
{"title": "人人都能读懂的设计模式（1）：创建型模式", "url": "http://blog.jobbole.com/111799/", "create_date": "2017/07/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/01/31cb3a52c5acdbdd13fd045f07cabb23.jpg"], "fav_count": 11, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/justin_ygg\">Justin(李加庆)</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://github.com/kamranahmedse/design-patterns-for-humans\">kamranahmedse</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><h3>简介</h3>\n<p>设计模式用于解决反复出现的问题，是解决特定问题的指导方针。设计模式不是在应用中引用的类、package 或者库，而是在某些特定场景下解决特定问题的指导方针。</p>\n<p>设计模式用于解决反复出现的问题，是解决某些特定问题的指导方针。</p>\n<p>维基百科中这样描述设计模式：</p>\n<blockquote><p>在软件工程中，设计模式是针对软件设计中普遍存在（反复出现）的各种问题，所提出的可复用型解决方案。设计模式并不直接完成代码的编写，而是描述在不同情况下如何解决问题。</p></blockquote>\n<h3>注意</h3>\n<ul>\n<li>设计模式并非解决所有问题的银弹。</li>\n<li>不要强制使用设计模式，否则结果可能适得其反。谨记：设计模式是用来解决问题的，而不是来寻找问题的，不要过度思考。</li>\n<li>如果在对的地方对的时机使用设计模式，它会是你的救世主。反之，将会一团糟。</li>\n</ul>\n<p>另注：下面的示例代码是用 PHP7 实现的，因为概念是一样的，所以语言并不会阻碍你理解设计模式。其他语言版本的实现正在进行中。</p>\n<h3>设计模式分类</h3>\n<ul>\n<li>创建型模式</li>\n<li>结构型模式</li>\n<li>行为型模式</li>\n</ul>\n<h3>创建型模式</h3>\n<h4>概述</h4>\n<p>创建型模式专注于如何初始化对象 。</p>\n<h4>维基百科</h4>\n<p>在软件工程中，创建型模式是处理对象创建的设计模式，试图根据实际情况使用合适的方式创建对象。基本的对象创建方式可能会导致设计上的问题，或增加设计的复杂度。创建型模式通过以某种方式控制对象的创建来解决这些问题。</p>\n<p><strong>分类</strong></p>\n<ul>\n<li>简单工厂模式</li>\n<li>工厂方法模式</li>\n<li>抽象工厂模式</li>\n<li>生成器模式</li>\n<li>原型模式</li>\n<li>单例模式</li>\n</ul>\n<h3>🏠 简单工厂模式</h3>\n<h4>现实生活示例</h4>\n<p>想象一下，你正在建造一座房子而且需要几扇房门，如果每次需要房门的时候，不是用工厂制造的房门，而是穿上木匠服，然后开始自己制造房门，将会搞得一团糟。</p>\n<h4>概述</h4>\n<p>简单工厂模式只是为客户端创建实例，而不将任何实例化逻辑暴露给客户端。</p>\n<h4>维基百科</h4>\n<p>在面向对象程序设计中，工厂通常是一个用来创建其他对象的对象。通常来讲，工厂是指某个功能或方法，此功能或方法返回不同类型的对象或者类的某个方法调用，返回的东西看起来是「新的」。</p>\n<p><strong>程序示例</strong></p>\n<p>首先是<code>房门</code>的接口和实现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b52f103651552\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">PHP</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Door\r\n{\r\n    public function getWidth(): float;\r\n    public function getHeight(): float;\r\n}\r\n\r\nclass WoodenDoor implements Door\r\n{\r\n    protected $width;\r\n    protected $height;\r\n\r\n    public function __construct(float $width, float $height)\r\n    {\r\n        $this-&gt;width = $width;\r\n        $this-&gt;height = $height;\r\n    }\r\n\r\n    public function getWidth(): float\r\n    {\r\n        return $this-&gt;width;\r\n    }\r\n\r\n    public function getHeight(): float\r\n    {\r\n        return $this-&gt;height;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b52f103651552-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b52f103651552-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getWidth</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getHeight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-7\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WoodenDoor</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$width</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$height</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$height</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">$this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-i\">width</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$width</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">$this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-i\">height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$height</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getWidth</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-i\">width</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-22\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getHeight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-i\">height</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b52f103651552-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b52f103651552-27\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p>然后是生产房门的工厂</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b53d236042829\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass DoorFactory\r\n{\r\n    public static function makeDoor($width, $height): Door\r\n    {\r\n        return new WoodenDoor($width, $height);\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b53d236042829-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b53d236042829-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b53d236042829-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b53d236042829-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b53d236042829-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b53d236042829-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b53d236042829-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b53d236042829-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFactory</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b53d236042829-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b53d236042829-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b53d236042829-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b53d236042829-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WoodenDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b53d236042829-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b53d236042829-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b541805902779\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$door = DoorFactory::makeDoor(100, 200);\r\necho 'Width: ' . $door-&gt;getWidth();\r\necho 'Height: ' . $door-&gt;getHeight();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b541805902779-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b541805902779-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b541805902779-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b541805902779-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DoorFactory</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b541805902779-2\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Width: '</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getWidth</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b541805902779-3\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Height: '</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getHeight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><strong>何时使用？</strong></p>\n<p>如果创建对象不仅仅是一些变量的初始化，还涉及某些逻辑，那么将其封装到一个专用工厂中取代随处使用的重复代码是有意义的。</p>\n<h3>🏭 工厂方法模式</h3>\n<h4>现实生活示例</h4>\n<p>考虑招聘经理的情况。一个人不可能应付所有职位的面试，对于空缺职位，招聘经理必须委派不同的人去面试。</p>\n<h4>概述</h4>\n<p>工厂方法模式提供了一种将实例化逻辑委托给子类的方法。</p>\n<h4>维基百科</h4>\n<p>在基于类的编程中，工厂方法模式是一种使用了工厂方法的创建型设计模式，在不指定对象具体类型的情况下，处理创建对象的问题。创建对象不是通过调用构造器而是通过调用工厂方法（在接口中指定工厂方法并在子类中实现或者在基类中实现，随意在派生类中重写）来完成。</p>\n<p><strong>程序示例</strong></p>\n<p>以上述招聘经理为例，首先给出一个面试官接口及实现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b545451836132\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Interviewer\r\n{\r\n    public function askQuestions();\r\n}\r\n\r\nclass Developer implements Interviewer\r\n{\r\n    public function askQuestions()\r\n    {\r\n        echo 'Asking about design patterns!';\r\n    }\r\n}\r\n\r\nclass CommunityExecutive implements Interviewer\r\n{\r\n    public function askQuestions()\r\n    {\r\n        echo 'Asking about community building';\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b545451836132-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b545451836132-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interviewer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">askQuestions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-6\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Developer</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interviewer</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">askQuestions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Asking about design patterns!'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-14\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CommunityExecutive</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interviewer</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-15\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">askQuestions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Asking about community building'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b545451836132-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b545451836132-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>然后创建 <code>HiringManager</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b54b513745464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nabstract class HiringManager\r\n{\r\n\r\n    // Factory method\r\n    abstract public function makeInterviewer(): Interviewer;\r\n\r\n    public function takeInterview()\r\n    {\r\n        $interviewer = $this-&gt;makeInterviewer();\r\n        $interviewer-&gt;askQuestions();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b54b513745464-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b54b513745464-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b54b513745464-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b54b513745464-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b54b513745464-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b54b513745464-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b54b513745464-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b54b513745464-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b54b513745464-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b54b513745464-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b54b513745464-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b54b513745464-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b54b513745464-1\"><span class=\"crayon-m\">abstract</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HiringManager</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b54b513745464-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b54b513745464-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b54b513745464-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// Factory method</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b54b513745464-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">abstract</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeInterviewer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Interviewer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b54b513745464-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b54b513745464-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">takeInterview</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b54b513745464-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b54b513745464-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">interviewer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">makeInterviewer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b54b513745464-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">interviewer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">askQuestions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b54b513745464-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b54b513745464-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>现在，任何子类都可以继承 <code>HiringManager</code> 并委派相应的<code>面试官</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b551740702160\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass DevelopmentManager extends HiringManager\r\n{\r\n    public function makeInterviewer(): Interviewer\r\n    {\r\n        return new Developer();\r\n    }\r\n}\r\n\r\nclass MarketingManager extends HiringManager\r\n{\r\n    public function makeInterviewer(): Interviewer\r\n    {\r\n        return new CommunityExecutive();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b551740702160-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b551740702160-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DevelopmentManager</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HiringManager</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeInterviewer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interviewer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Developer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-9\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MarketingManager</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HiringManager</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-10\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeInterviewer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interviewer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CommunityExecutive</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b551740702160-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b551740702160-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b557008180461\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$devManager = new DevelopmentManager();\r\n$devManager-&gt;takeInterview(); // Output: Asking about design patterns\r\n\r\n$marketingManager = new MarketingManager();\r\n$marketingManager-&gt;takeInterview(); // Output: Asking about community building.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b557008180461-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b557008180461-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b557008180461-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b557008180461-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b557008180461-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b557008180461-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">devManager</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DevelopmentManager</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b557008180461-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">devManager</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">takeInterview</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Output: Asking about design patterns</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b557008180461-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b557008180461-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">marketingManager</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MarketingManager</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b557008180461-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">marketingManager</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">takeInterview</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Output: Asking about community building.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p><strong>何时使用？</strong></p>\n<p>类中的一些常见处理需要在运行时动态决定所需的子类，换句话说，当客户端不知道可能需要的确切子类时，使用工厂方法模式。</p>\n<h3>🔨 抽象工厂模式</h3>\n<h4>现实生活示例</h4>\n<p>扩展一下<code>简单工厂模式</code>中的房门例子。基于所需，你可能需要从木门店获取木门，从铁门店获取铁门或者从相关的门店获取 PVC 门。进一步讲，你可能需要不同种类的专家来安装房门，比如木匠安装木门，焊接工安装铁门等等。正如你所料，房门有了依赖，木门需要木匠，铁门需要焊接工。</p>\n<h4>概述</h4>\n<p>一组工厂的工厂：将相关或者互相依赖的单个工厂聚集在一起，而不指定这些工厂的具体类。</p>\n<h4>维基百科</h4>\n<p>抽象工厂模式提供了一种方式，这种方式可以封装一组具有共同主题的个体工厂，而不指定这些工厂的具体类。</p>\n<p><strong>编程示例</strong></p>\n<p>以上述房门为例，首先给出 <code>Door</code> 接口和一些实现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b55f749754502\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface Door\r\n{\r\n    public function getDescription();\r\n}\r\n\r\nclass WoodenDoor implements Door\r\n{\r\n    public function getDescription()\r\n    {\r\n        echo 'I am a wooden door';\r\n    }\r\n}\r\n\r\nclass IronDoor implements Door\r\n{\r\n    public function getDescription()\r\n    {\r\n        echo 'I am an iron door';\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b55f749754502-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b55f749754502-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-6\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WoodenDoor</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am a wooden door'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-14\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IronDoor</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-15\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am an iron door'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b55f749754502-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b55f749754502-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>然后根据每种房门类型给出对应的安装专家</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b569055439059\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface DoorFittingExpert\r\n{\r\n    public function getDescription();\r\n}\r\n\r\nclass Welder implements DoorFittingExpert\r\n{\r\n    public function getDescription()\r\n    {\r\n        echo 'I can only fit iron doors';\r\n    }\r\n}\r\n\r\nclass Carpenter implements DoorFittingExpert\r\n{\r\n    public function getDescription()\r\n    {\r\n        echo 'I can only fit wooden doors';\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b569055439059-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b569055439059-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFittingExpert</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-6\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Welder</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFittingExpert</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I can only fit iron doors'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-14\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Carpenter</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFittingExpert</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-15\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I can only fit wooden doors'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b569055439059-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b569055439059-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>现在抽象工厂可以将相关的对象组建在一起，也就是说，木门工厂会生成木门并提供木门安装专家，铁门工厂会生产铁门并提供铁门安装专家。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b57b361719432\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface DoorFactory\r\n{\r\n    public function makeDoor(): Door;\r\n    public function makeFittingExpert(): DoorFittingExpert;\r\n}\r\n\r\n// Wooden factory to return carpenter and wooden door\r\nclass WoodenDoorFactory implements DoorFactory\r\n{\r\n    public function makeDoor(): Door\r\n    {\r\n        return new WoodenDoor();\r\n    }\r\n\r\n    public function makeFittingExpert(): DoorFittingExpert\r\n    {\r\n        return new Carpenter();\r\n    }\r\n}\r\n\r\n// Iron door factory to get iron door and the relevant fitting expert\r\nclass IronDoorFactory implements DoorFactory\r\n{\r\n    public function makeDoor(): Door\r\n    {\r\n        return new IronDoor();\r\n    }\r\n\r\n    public function makeFittingExpert(): DoorFittingExpert\r\n    {\r\n        return new Welder();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b57b361719432-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b57b361719432-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFactory</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Door</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeFittingExpert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DoorFittingExpert</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-7\"><span class=\"crayon-c\">// Wooden factory to return carpenter and wooden door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-8\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WoodenDoorFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFactory</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-9\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WoodenDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-14\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeFittingExpert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFittingExpert</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Carpenter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-19\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-20\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-21\"><span class=\"crayon-c\">// Iron door factory to get iron door and the relevant fitting expert</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-22\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IronDoorFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFactory</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-23\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Door</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IronDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-28\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeFittingExpert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DoorFittingExpert</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Welder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b57b361719432-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b57b361719432-33\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b580424113860\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$woodenFactory = new WoodenDoorFactory();\r\n\r\n$door = $woodenFactory-&gt;makeDoor();\r\n$expert = $woodenFactory-&gt;makeFittingExpert();\r\n\r\n$door-&gt;getDescription();  // Output: I am a wooden door\r\n$expert-&gt;getDescription(); // Output: I can only fit wooden doors\r\n\r\n// Same for Iron Factory\r\n$ironFactory = new IronDoorFactory();\r\n\r\n$door = $ironFactory-&gt;makeDoor();\r\n$expert = $ironFactory-&gt;makeFittingExpert();\r\n\r\n$door-&gt;getDescription();  // Output: I am an iron door\r\n$expert-&gt;getDescription(); // Output: I can only fit iron doors</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b580424113860-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b580424113860-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">woodenFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WoodenDoorFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-2\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">woodenFactory</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">expert</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">woodenFactory</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">makeFittingExpert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// Output: I am a wooden door</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">expert</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Output: I can only fit wooden doors</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-9\"><span class=\"crayon-c\">// Same for Iron Factory</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-10\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">ironFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IronDoorFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-12\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">ironFactory</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">makeDoor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-13\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">expert</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">ironFactory</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">makeFittingExpert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-14\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b580424113860-15\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">door</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// Output: I am an iron door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b580424113860-16\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">expert</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getDescription</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Output: I can only fit iron doors</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>正如你看到的，木门工厂将<code>木匠</code>和<code>木门</code>封装在一起，同样地，铁门工厂将<code>铁门</code>和<code>焊接工</code>封装在一起。这样就可以帮助我们确保，对于每一扇生产出来的门，都能搭配正确的安装工。</p>\n<p><strong>何时使用？</strong></p>\n<p>当存在相关的依赖并涉及到稍复杂的创建逻辑时，使用抽象工厂模式。</p>\n<h3>👷 生成器模式</h3>\n<h4>现实生活示例</h4>\n<p>想象一下你在 Hardee’s 餐厅点了某个套餐，比如「大 Hardee 套餐」，然后工作人员会正常出餐，这是简单工厂模式。但是在很多情况下，创建逻辑可能涉及到更多步骤。比如，你想要一个定制的 <code>Subway</code> 套餐，对于你的汉堡如何制作有几个选项可供选择，比如你想要什么类型的酱汁？你想要什么奶酪？ 在这种情况下，建造者模式便可以派上用场。</p>\n<h4>概述</h4>\n<p>允许创建不同风格的对象，同时避免构造器污染。当创建多种风格的对象时或者创建对象时涉及很多步骤，可以使用生成器模式。</p>\n<h4>维基百科</h4>\n<p>生成器模式是一种对象创建软件设计模式，其目的是找到重叠构造器反面模式的解决方案。</p>\n<p>既然提到了，那我就补充一下什么是<code>重叠构造器反面模式</code>。 我们时不时地会看到如下构造函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b584298898554\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic function __construct($size, $cheese = true, $pepperoni = true, $tomato = false, $lettuce = true)\r\n{\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b584298898554-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b584298898554-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b584298898554-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b584298898554-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cheese</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">pepperoni</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">tomato</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">lettuce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b584298898554-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b584298898554-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>正如你看到的，构造器参数的数量可能会迅速失控，并且参数的排列可能让人难以理解。 如果将来要添加更多选项，此参数列表可能会不断增长，这被称为<code>重叠构造器反面模式</code>。</p>\n<p><strong>程序示例</strong></p>\n<p>理想之选是使用生成器模式，首先给出<code>汉堡类</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b58b719977789\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Burger\r\n{\r\n    protected $size;\r\n\r\n    protected $cheese = false;\r\n    protected $pepperoni = false;\r\n    protected $lettuce = false;\r\n    protected $tomato = false;\r\n\r\n    public function __construct(BurgerBuilder $builder)\r\n    {\r\n        $this-&gt;size = $builder-&gt;size;\r\n        $this-&gt;cheese = $builder-&gt;cheese;\r\n        $this-&gt;pepperoni = $builder-&gt;pepperoni;\r\n        $this-&gt;lettuce = $builder-&gt;lettuce;\r\n        $this-&gt;tomato = $builder-&gt;tomato;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58b719977789-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58b719977789-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Burger</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cheese</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">pepperoni</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">lettuce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">tomato</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">BurgerBuilder</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">builder</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">builder</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">cheese</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">builder</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">cheese</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">pepperoni</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">builder</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">pepperoni</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lettuce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">builder</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lettuce</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">tomato</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">builder</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">tomato</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58b719977789-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58b719977789-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>然后是 <code>builder</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b58f853723629\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass BurgerBuilder\r\n{\r\n    public $size;\r\n\r\n    public $cheese = false;\r\n    public $pepperoni = false;\r\n    public $lettuce = false;\r\n    public $tomato = false;\r\n\r\n    public function __construct(int $size)\r\n    {\r\n        $this-&gt;size = $size;\r\n    }\r\n\r\n    public function addPepperoni()\r\n    {\r\n        $this-&gt;pepperoni = true;\r\n        return $this;\r\n    }\r\n\r\n    public function addLettuce()\r\n    {\r\n        $this-&gt;lettuce = true;\r\n        return $this;\r\n    }\r\n\r\n    public function addCheese()\r\n    {\r\n        $this-&gt;cheese = true;\r\n        return $this;\r\n    }\r\n\r\n    public function addTomato()\r\n    {\r\n        $this-&gt;tomato = true;\r\n        return $this;\r\n    }\r\n\r\n    public function build(): Burger\r\n    {\r\n        return new Burger($this);\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b58f853723629-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b58f853723629-43\">43</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BurgerBuilder</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cheese</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">pepperoni</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">lettuce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">tomato</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-14\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addPepperoni</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">pepperoni</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-20\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addLettuce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lettuce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-26\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addCheese</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">cheese</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-32\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addTomato</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">tomato</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-38\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Burger</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Burger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b58f853723629-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b58f853723629-43\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0046 seconds] -->\r\n<p>这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b592130094337\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$burger = (new BurgerBuilder(14))\r\n                    -&gt;addPepperoni()\r\n                    -&gt;addLettuce()\r\n                    -&gt;addTomato()\r\n                    -&gt;build();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b592130094337-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b592130094337-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b592130094337-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b592130094337-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b592130094337-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b592130094337-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">burger</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BurgerBuilder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b592130094337-2\"><span class=\"crayon-h\">                    </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">addPepperoni</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b592130094337-3\"><span class=\"crayon-h\">                    </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">addLettuce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b592130094337-4\"><span class=\"crayon-h\">                    </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">addTomato</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b592130094337-5\"><span class=\"crayon-h\">                    </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><strong>何时使用？</strong></p>\n<p>当需要构建不同风格的对象，同时需要避免构造器重叠时使用生成器模式。与工厂模式的主要区别在于：当创建过程一步到位时，使用工厂模式，而当创建过程需要多个步骤时，使用生成器模式。</p>\n<h3>🐑 原型模式</h3>\n<h4>现实生活示例</h4>\n<p>还记得多莉吗？那只克隆羊。这里不深入细节，关键点在于克隆。</p>\n<h4>概述</h4>\n<p>基于现有对象通过克隆创建对象。</p>\n<h4>维基百科</h4>\n<p>在软件开发过程中，原型模式是一种创建型设计模式。当要创建的对象类型由原型实例确定时，将通过克隆原型实例生成新对象。</p>\n<p>简言之，原型模式允许你创建现有对象的副本并根据需要进行修改，而不是从头开始创建对象并进行设置。</p>\n<p><strong>编程示例</strong></p>\n<p>使用 PHP 的 <code>clone</code> 方法可以轻松实现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b596205730490\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Sheep\r\n{\r\n    protected $name;\r\n    protected $category;\r\n\r\n    public function __construct(string $name, string $category = 'Mountain Sheep')\r\n    {\r\n        $this-&gt;name = $name;\r\n        $this-&gt;category = $category;\r\n    }\r\n\r\n    public function setName(string $name)\r\n    {\r\n        $this-&gt;name = $name;\r\n    }\r\n\r\n    public function getName()\r\n    {\r\n        return $this-&gt;name;\r\n    }\r\n\r\n    public function setCategory(string $category)\r\n    {\r\n        $this-&gt;category = $category;\r\n    }\r\n\r\n    public function getCategory()\r\n    {\r\n        return $this-&gt;category;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b596205730490-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b596205730490-31\">31</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Sheep</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">category</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Mountain Sheep'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">category</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-16\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">category</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-26\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b596205730490-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b596205730490-31\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>可以像下面这样克隆</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b59c187373735\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$original = new Sheep('Jolly');\r\necho $original-&gt;getName(); // Jolly\r\necho $original-&gt;getCategory(); // Mountain Sheep\r\n\r\n// Clone and modify what is required\r\n$cloned = clone $original;\r\n$cloned-&gt;setName('Dolly');\r\necho $cloned-&gt;getName(); // Dolly\r\necho $cloned-&gt;getCategory(); // Mountain sheep</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b59c187373735-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b59c187373735-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b59c187373735-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b59c187373735-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b59c187373735-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b59c187373735-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b59c187373735-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b59c187373735-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b59c187373735-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b59c187373735-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">original</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Sheep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Jolly'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b59c187373735-2\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">original</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Jolly</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b59c187373735-3\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">original</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Mountain Sheep</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b59c187373735-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b59c187373735-5\"><span class=\"crayon-c\">// Clone and modify what is required</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b59c187373735-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cloned</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">original</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b59c187373735-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cloned</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">setName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Dolly'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b59c187373735-8\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cloned</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Dolly</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b59c187373735-9\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cloned</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Mountain sheep</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>此外，你可以使用魔术方法 <code>**clone</code> 来修改克隆行为。</p>\n<p><strong>何时使用</strong></p>\n<p>当需要创建一个与已有对象类似的对象，或者当创建对象的成本比克隆更高时，使用原型模式。</p>\n<h3>💍 单例模式</h3>\n<h4>现实生活示例</h4>\n<p>一个国家同一时间只能有一位总统。只要使命召唤，这个总统就必须采取行动。 这里的总统就是一个单例。</p>\n<h4>概述</h4>\n<p>确保特定类的对象只被创建一次。</p>\n<h4>维基百科</h4>\n<p>在软件工程中，单例模式是一种软件设计模式，用来限制类初始化为对象。当恰恰只需要一个对象来协调整个系统的功能时，单例模式非常有用。</p>\n<p>实际上，单例模式被认为是反模式，应该避免过度使用。 单例模式并非不好，可能有时候很有用，但应谨慎使用，因为它在你的应用程序中引入了全局状态，一处更改可能会影响其他地方，并且可能会变得很难调试。 另外不好的一点是单例模式会使代码紧耦合，单例也很难mock。</p>\n<p><strong>编程示例</strong></p>\n<p>要创建一个单例，需要将构造函数设为 <code>private</code>，禁用克隆，禁用扩展名，并创建静态变量来容纳实例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b5a1563601522\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfinal class President\r\n{\r\n    private static $instance;\r\n\r\n    private function __construct()\r\n    {\r\n        // Hide the constructor\r\n    }\r\n\r\n    public static function getInstance(): President\r\n    {\r\n        if (!self::$instance) {\r\n            self::$instance = new self();\r\n        }\r\n\r\n        return self::$instance;\r\n    }\r\n\r\n    private function __clone()\r\n    {\r\n        // Disable cloning\r\n    }\r\n\r\n    private function __wakeup()\r\n    {\r\n        // Disable unserialize\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a1563601522-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a1563601522-28\">28</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-1\"><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">President</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">instance</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__construct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// Hide the constructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">President</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-r\">self</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">instance</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">instance</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">instance</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-18\"> </div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__clone</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// Disable cloning</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__wakeup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// Disable unserialize</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a1563601522-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a1563601522-28\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>这样使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0990b5a4065563953\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$president1 = President::getInstance();\r\n$president2 = President::getInstance();\r\n\r\nvar_dump($president1 === $president2); // true</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a4065563953-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a4065563953-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0990b5a4065563953-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0990b5a4065563953-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0990b5a4065563953-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">president1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">President</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">getInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a4065563953-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">president2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">President</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">getInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0990b5a4065563953-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0990b5a4065563953-4\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">president1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">president2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// true</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/a9e67955472c1afcad111aa202984192.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111799\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111799votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111799\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 11 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/justin_ygg\">Justin(李加庆)</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/justin_ygg\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/4302cabf679254e36d325f1d9185b6c72.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Python工程师一枚，对go、docker感兴趣，还在成长ing~~        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/justin_ygg\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/justin_ygg/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/justin_ygg/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "f9e2bacb3eaf303d2c4a39b8317c2d02", "front_image_path": "full/2ed5ba686d5170c3536e6941aa4b63289b7ee0ba.jpg"}
{"title": "Linux - 请允许我静静地后台运行", "url": "http://blog.jobbole.com/111850/", "create_date": "2017/07/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "fav_count": 11, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/zhenbianshu/p/7152327.html\">枕边书</a>   </div><h3 id=\"toc_0\">前言</h3>\n<p>常在 linux 下玩耍的开发者肯定会经常遇到需要对进程调度的情况，在 windows 中点击 <code>最小化</code> 去干别的就 OK 了，那么在 linux 下怎么办呢。</p>\n<p>可能有的小伙伴会说，再开一个终端窗口不就好了么。可是开很多窗口管理会很不方便，还有万一手贱点了x，或者长时间不操作，远程终端断开了连接，进程停止了，再次打开，又是一番折腾。</p>\n<p>今天来介绍几个命令，帮大家系统地梳理一下 linux 的进程调度，并附上一些自己的使用心得和踩过的坑。</p>\n<h3 id=\"toc_1\">名词</h3>\n<p>在此之前，我们必须（当然也不是必须，但了解原理有利于理解和解决错误）先弄懂几个名词。</p>\n<h4 id=\"toc_2\">进程组</h4>\n<p>进程组是一个或多个进程的集合，进程组方便了对多个进程的控制，在进程数较多的情况下，向进程组发送信号就行了。</p>\n<p>它的 ID 由它的组长进程的进程 ID 决定。组长进程创建了进程组，但它并不能决定进程组的存活时间，只要进程组内还有一个进程存在，进程就存在，与组长进程是否已终止无关。</p>\n<h4 id=\"toc_3\">会话</h4>\n<p>会话(session)是一个或多个进程组的集合，它开始于用户登陆终端，结束于用户退出登陆。其义如其名，就是指用户与系统的一次对话的全程。</p>\n<p>会话包括控制进程（与终端建立连接的领头进程），一个前台进程组和任意后台进程组。一个会话只能有一个控制终端，通常是登录到其上的终端设备或伪终端设备，产生在控制终端上的输入和信号将发送给会话的前台进程组中的所有进程。</p>\n<h4 id=\"toc_4\">控制终端</h4>\n<p>每当我们使用终端工具打开一个本地或远程 shell，我们便打开了一个控制终端，通过 <code>ps</code> 命令可以查看到 command 为 <code>ttyn</code> 的就是它对应的进程了，同时它对应 linux <code>/dev/</code> 目录下的一个文件。</p>\n<h4 id=\"toc_5\">作业</h4>\n<p>作业的概念与进程组类似，同样由一个或多个进程组成，它分为前台作业和后台作业，一个会话会有一个前台作业和多个后台作业，与进程组不同的是，作业内的某个进程产生的子进程并不属于这个作业。</p>\n<h4 id=\"toc_6\">类比</h4>\n<p>以上几个概念可以类比为我们一次通过 QQ 聊天的全程，控制终端就是 QQ软件，关闭了此软件代表着聊天结束。聊天时发送的每一条信息都是一个进程，作业或进程组就是我们在聊的某一件事，它由很多条相互的信息构成。而会话则是我们指我们从开始聊天到结束聊天的全过程，可能会聊很多个事。</p>\n<p>它们之间的相关图如下所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/799c79770f8239cea9ebad6ddab63472.png\" alt=\"\"></p>\n<h3 id=\"toc_7\">后台执行</h3>\n<p>我们每次在终端窗口执行命令的时候，进程总会一直占用着终端，走到进程结束，这段时间内，我们在终端的输入是没有用的。而且，当终端窗口关闭或网络连接失败后，再次打开终端，会发现进程已经中断了。这是因为用户注销或者网络断开时，<code>SIGHUP</code>信号会被发送到会话所属的子进程，而此 <code>SIGHUP</code> 的默认处理方式是终止收到该信号的进程。所以若程序中没有捕捉该信号，当终端关闭后，会话所属进程就会退出。</p>\n<p>我们要实现后台执行的目的，实际上是要完成如下两个目标：</p>\n<ul>\n<li>使进程让出前台终端，让我们可以继续通过终端与系统进行交互。</li>\n<li>使进程不再受终端关闭的影响，即系统在终端关闭后不再向进程发送 <code>SIGHUP</code> 信号或即使发送了信号程序也不会退出。</li>\n</ul>\n<p>以下的命令就围绕着这两个目标来实现。</p>\n<h4 id=\"toc_8\">&amp;</h4>\n<p>首先是我们最经常遇到的符号 <code>&amp;</code>，将它附在命令后面可以使进程在后台执行，不会占用前台界面。它实际上是在会话中开启了一个后台作业，对作业的操作我们后面再说。</p>\n<p>但我们会发现，如果此时终端被关闭后，进程还是会退出。这是因为，<code>&amp;</code> 符号只有让进程让出前台终端的功能，无法让进程不受 <code>SIGHUP</code> 信号的影响。</p>\n<h4 id=\"toc_9\">nohup</h4>\n<p><code>nohup</code> 应该是另外一个我们常用的命令了，它的作用如其字面意思，使进程不受 <code>SIGHUP</code> 信号的影响。但我们在使用 <code>nohup php test.php</code> 后会发现，进程还会一直占用前台终端，但即使终端被关闭或连接断开了，程序还是会执行，另外我们会发现在当前文件夹下多了个名为 <code>nohup.out</code> 的文件。</p>\n<p>这是因为 nohup 的功能仅仅是让进程不受 <code>SIGHUP</code> 信号的影响，并不会让出前台终端，而且它还会在命令执行目录下建立 <code>nohup.out</code> 用以存储进程的输出。如果进程不需要输出，且不想让 nohup 创建文件，可以将标准输出和标准错误输出重定向。</p>\n<p>我们常将 <code>nohup</code> 和 <code>&amp;</code> 搭配到一块使用，执行命令如下 <code>nohup command &gt;/dev/null 2&gt;&amp;1 &amp;</code> 这样，就可以放心的等待进程运行结果了。</p>\n<h4 id=\"toc_10\">setsid</h4>\n<p>setsid 是另一个让进程在后台执行的命令，它的作用是让进程打开一个新的会话并运行进程，使用方式为 <code>setsid command</code>。</p>\n<p>根据上面的概念我们得知终端关闭后进程退出是因为会话首进程向进程发送了 <code>SIGHUP</code> 信号，setsid 就厉害了，它直接打开一个新的会话来执行命令，那么原会话的终端的状态就再也不会影响到此进程了。</p>\n<p>我们使用 <code>pstree</code> 来查看使用 <code>setsid</code> 和 <code>nohup ... &amp;</code> 两种命令来运行进程时的进程树状态。</p>\n<ul>\n<li><code>nohup php test.php &amp;</code></li>\n</ul>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0991ee98912434297\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npstree -a |grep -C 6 test\r\n  |-sshd\r\n  |   `-sshd\r\n  |       `-sshd\r\n  |           `-bash\r\n  |               `-sudo -s\r\n  |                   `-bash\r\n  |                       |-grep -C 6 test\r\n  |                       |-php test.php\r\n  |                       `-pstree -a</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0991ee98912434297-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991ee98912434297-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991ee98912434297-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991ee98912434297-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991ee98912434297-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991ee98912434297-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991ee98912434297-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991ee98912434297-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991ee98912434297-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991ee98912434297-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0991ee98912434297-1\"><span class=\"crayon-v\">pstree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991ee98912434297-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sshd</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991ee98912434297-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sshd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991ee98912434297-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sshd</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991ee98912434297-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">           </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991ee98912434297-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991ee98912434297-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">                   </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991ee98912434297-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">                       </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991ee98912434297-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">                       </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">php </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991ee98912434297-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">                       </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pstree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n\n</div>\n<p>我是用 ssh 远程登陆的机器，所以 test.php 进程是挂在 sshd 进程下的。正常情况下，一旦 sshd 进程结束，则 test.php也无法幸免。</p>\n<ul>\n<li><code>setsid php test.php</code></li>\n</ul>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0991eea5139272310\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npstree -a |grep -C 6 test \r\n  |-{nscd}\r\n  |-php test.php\r\n  |-php-fpm\r\n --\r\n  |-sshd\r\n  |   `-sshd</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0991eea5139272310-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eea5139272310-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eea5139272310-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eea5139272310-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eea5139272310-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eea5139272310-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eea5139272310-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0991eea5139272310-1\"><span class=\"crayon-v\">pstree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eea5139272310-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">nscd</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eea5139272310-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">php </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eea5139272310-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fpm</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eea5139272310-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eea5139272310-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sshd</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eea5139272310-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sshd</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p>使用了 setsid 后，test.php 进程已经与 sshd 进程同级，属于 init 进程的子进程了。</p>\n<p>但是 setsid 并没有为进程分配一个输出终端，所以进程还是会输出到当前终端上。</p>\n<h5 id=\"toc_11\">setsid的坑</h5>\n<p>另外，setsid 有个略坑的地方： 在终端中直接使用 <code>setsid command</code> 运行进程时，终端前台并不会被影响，command 会在后台默默运行。而在 shell 脚本中，我们会发现运行 setsid 的进程会一直阻塞住，直到 command 进程执行结束。</p>\n<p>这是因为，setsid 在其是进程组长时会 <code>fork()</code> 一个进程，但它不会 <code>wait()</code> 它的子进程，而是立刻退出，所以在终端内直接使用 setsid 时，setsid 作为进程组长不会占用终端界面。</p>\n<p>而在 shell 脚本内，setsid 不是进程组长，它不会 <code>fork()</code> 子进程，而是由 bash 来<code>fork()</code> 一个子进程，而 bash 会 <code>wait()</code> 子进程，所以表现得像 setsid 在 <code>wait()</code> 子进程一样。</p>\n<p>要解决这个问题，有两个办法：</p>\n<ul>\n<li>使用上面介绍的 <code>&amp;</code>符号，使 setsid 强行到后台执行。</li>\n<li>使用 <code>.</code> 或 <code>source</code> 命令由终端执行 setsid；</li>\n</ul>\n<h4 id=\"toc_12\">其他</h4>\n<p>除了上面介绍的命令，还有 screen 和 tmux 等会话工具，他们都有自己的一套规范，也比较复杂，掌握本文的命令已经足够你驰骋 linux 进程控制了。当然有想了解新知识的可以查询学习一下，应该会比基础命令好用。</p>\n<h3 id=\"toc_13\">作业命令</h3>\n<p>使用上面的后台执行命令时可能还会遇到一些小状况：</p>\n<ul>\n<li>被我们放在后台的进程执行时间过长，而我们又忘记使用 nohup 命令，那么终端一旦断开，进程又需要被重新执行。</li>\n<li>我们直接开启了某个进程，又想在不中断进程的情况下让它让出前台终端；</li>\n</ul>\n<p>这些都要牵涉到今天的第二个模块–作业；</p>\n<p>我们在终端里运行的命令都可以理解为一个作业，有的占用前台终端，有的在后台默默执行，下面的命令就是为了调度这些作业。</p>\n<h4 id=\"toc_14\">jobs</h4>\n<p>jobs 是作业的基础命令，用它可以查看正在运行的作业的信息，其输出如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0991eead143547557\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njobs\r\n[1]-  Running                 php test.php &amp;\r\n[2]+  Stopped                 php test.php</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0991eead143547557-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eead143547557-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eead143547557-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0991eead143547557-1\"><span class=\"crayon-i\">jobs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eead143547557-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Running                 </span><span class=\"crayon-e\">php </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">php</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eead143547557-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Stopped                 </span><span class=\"crayon-e\">php </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">php</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n<p>前面<code>[ ]</code>内的数字是作业 ID，也是后面我们要操作作业的标识，然后是作业状态和命令。</p>\n<h4 id=\"toc_15\">ctrl+z</h4>\n<p><code>ctrl+z</code> 严格来说并是作业命令，它只是向当前进程发送一个 <code>SIGSTOP</code> 信号，促使进程进入暂停(stopped)状态，此状态下，进程状态会被系统保存，此进程会被放置到作业队列中去，而让出进程终端。</p>\n<p>使用它，我们可以暂停正在占用终端的进程而不停止它，从而让我们使用终端命令来操作此进程。</p>\n<h4 id=\"toc_16\">bg</h4>\n<p>bg是 <code>backgroud</code> 的缩写，顾名思义，<code>bg %id</code> 把作业放到后台进程中执行。</p>\n<p>结合 <code>ctrl+z</code> 和 <code>bg</code> 命令，我们可以解决上面提出的第一个问题，不停止地将正在占用终端的进程放到后台执行。</p>\n<h4 id=\"toc_17\">fg</h4>\n<p>fg 与 bg 相对，使用它可以把作业放到前台来执行。</p>\n<h4 id=\"toc_18\">disown</h4>\n<p>disown 用来将作业从作业列表中移除，即使它 <code>不属于</code> 会话，这样终端关闭后不再向此作业发送 <code>SIGHUP</code> 信号，以阻止终端对进程的影响。</p>\n<p>使用 disown 我们可以解决上面提出的第二个问题，不重新执行将一个没使用 nohup 命令的进程不受终端关闭影响。</p>\n<h3 id=\"toc_19\">守护进程</h3>\n<p>以上介绍的都是一些临时进程的处理，后台运行的进程的最终方法是将进程变成守护进程。</p>\n<h4 id=\"toc_20\">守护进程</h4>\n<blockquote><p>守护进程(daemon)是生存期较长的一种进程，一般在系统启动时启动，系统关闭时停止，没有控制终端，也不会输出。如我们的服务器、fpm 等进程就是以守护进程的形式存在的。</p></blockquote>\n<h4 id=\"toc_21\">创建过程</h4>\n<p>要创建一个守护进程，步骤为：</p>\n<p>必选项</p>\n<ol>\n<li><code>fork</code> 子进程，退出父进程，子进程作为孤儿进程被 init 进程收养；</li>\n<li>使用 <code>setsid</code>, 打开新会话，进程成为会话组长，正式脱离终端控制；</li>\n<li>设置信号处理（特别是子进程退出处理）；可选项：</li>\n<li>使用 <code>chdir</code> 改变进程工作目录，一般到根目录下，防止占用可卸载文件系统；</li>\n<li>用 <code>umask</code> 重设文件权限掩码，不再继承父进程的文件权限设置；</li>\n<li>关闭父进程打开的文件描述符；</li>\n</ol>\n<h4 id=\"toc_22\">代码</h4>\n<p>以下是 php 创建守护进程的伪代码，另外我的另一篇博客 <a href=\"http://www.cnblogs.com/zhenbianshu/p/5676822.html\">初探PHP多进程</a> 也稍微介绍了一些相关内容：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983a0991eeb3741324418\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$pid = pcntl_fork();\r\nif ($pid &gt; 0) {\r\n    exit; // 父进程直接退出\r\n} elseif ($pid &lt; 0) {\r\n throw_error(); // 进程创建失败\r\n}\r\n\r\nposix_setsid(); // setsid成为会话领导进程\r\nchdir($dir); // 切换目录\r\numask(0); // 重置文件权限mask\r\nclose_fd(); // 关闭父进程的文件描述符\r\npcntl_signal($signal, $func); // 注册信号处理函数\r\n\r\nwhile (true) {\r\n do_job(); // 处理进程任务\r\n pcntl_signal_dispatch(); // 分发信号处理\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983a0991eeb3741324418-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5983a0991eeb3741324418-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pcntl_fork</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-2\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">exit</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 父进程直接退出</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-4\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">elseif</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throw_error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 进程创建失败</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-8\"><span class=\"crayon-e\">posix_setsid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// setsid成为会话领导进程</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-9\"><span class=\"crayon-e\">chdir</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">dir</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 切换目录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-10\"><span class=\"crayon-e\">umask</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 重置文件权限mask</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-11\"><span class=\"crayon-e\">close_fd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 关闭父进程的文件描述符</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-12\"><span class=\"crayon-e\">pcntl_signal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">signal</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 注册信号处理函数</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-14\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">do_job</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 处理进程任务</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983a0991eeb3741324418-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pcntl_signal_dispatch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 分发信号处理</span></div><div class=\"crayon-line\" id=\"crayon-5983a0991eeb3741324418-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n\n</div>\n<h3 id=\"toc_23\">总结</h3>\n<p>linux 是开发者的基础技能，而进程的调度更是我们常用的功能，希望读完本文的同学们能有所收获。</p>\n<p>又有大半个月没发博客了，最近鼓捣着重构代码，经常会在一个点上纠结半天，不知不觉就加了个班。而且这个是个没法精确度量工作量和目标的活儿，优化没有尽头嘛。不过由于要更多地考虑一下代码的抽象、效率和扩展，对自己也是个挑战，算是乐在其中吧~</p>\n<p>最近可能会考虑写一个守护进程和 cron 进程调度器，嗯，希望给我算到工作量里，哈哈~想写的太多了，只怨自己还不够强大。。。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111850\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111850votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111850\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 11 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "a5b15948fdca33a7e5a22f9c857c1ff3", "front_image_path": "full/d3d1a5ad957de059084690efae6fdfaa3527e1c3.jpg"}
{"title": "如何理解并正确使用 MySQL 索引", "url": "http://blog.jobbole.com/111845/", "create_date": "2017/07/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "fav_count": 8, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/feinik/blog/1305784\">FEINIK</a>   </div><h1>1、概述</h1>\n<div>\n<p>索引是存储引擎用于快速查找记录的一种数据结构，通过合理的使用数据库索引可以大大提高系统的访问性能，接下来主要介绍在MySql数据库中索引类型，以及如何创建出更加合理且高效的索引技巧。</p>\n<blockquote><p>注：这里主要针对的是InnoDB存储引擎的B+Tree索引数据结构</p></blockquote>\n<h1>2、索引的优点</h1>\n<p>1、大大减轻了服务器需要扫描的数据量，从而提高了数据的检索速度</p>\n<p>2、帮助服务器避免排序和临时表</p>\n<p>3、可以将随机I/O变为顺序I/O</p>\n<h1>3、索引的创建</h1>\n<p><strong>3.1、主键索引</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0ba113407360\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE 'table_name' ADD PRIMARY KEY 'index_name' ('column');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0ba113407360-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0ba113407360-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'table_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'column'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><strong>3.2、唯一索引</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0c4641697669\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE 'table_name' ADD UNIQUE 'index_name' ('column');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0c4641697669-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0c4641697669-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'table_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-i\">UNIQUE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'column'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><strong>3.3、普通索引</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0c8082937661\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE 'table_name' ADD INDEX 'index_name' ('column');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0c8082937661-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0c8082937661-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'table_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-i\">INDEX</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'column'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><strong>3.4、全文索引</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0cc344217336\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE 'table_name' ADD FULLTEXT 'index_name' ('column');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0cc344217336-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0cc344217336-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'table_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-i\">FULLTEXT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'column'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><strong>3.5、组合索引</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0cf000121315\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE 'table_name' ADD INDEX 'index_name' ('column1', 'column2', ...);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0cf000121315-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0cf000121315-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'table_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-i\">INDEX</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index_name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'column1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'column2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h1>4、B+Tree的索引规则</h1>\n<p>创建一个测试的用户表</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0d2559444232\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDROP TABLE IF EXISTS user_test;\r\nCREATE TABLE user_test(\r\n\tid int AUTO_INCREMENT PRIMARY KEY,\r\n\tuser_name varchar(30) NOT NULL,\r\n\tsex bit(1) NOT NULL DEFAULT b'1',\r\n\tcity varchar(50) NOT NULL,\r\n\tage int NOT NULL\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0d2559444232-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0d2559444232-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0d2559444232-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0d2559444232-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0d2559444232-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0d2559444232-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0d2559444232-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0d2559444232-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0d2559444232-1\"><span class=\"crayon-e\">DROP </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS </span><span class=\"crayon-v\">user_test</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0d2559444232-2\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_test</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5983cf484a0d2559444232-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">id </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-v\">KEY</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0d2559444232-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">user_name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5983cf484a0d2559444232-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">sex </span><span class=\"crayon-e\">bit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'1'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0d2559444232-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">city </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5983cf484a0d2559444232-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">age </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0d2559444232-8\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>创建一个组合索引： ALTER TABLE user_test ADD INDEX idx_user(user_name , city , age);</p>\n<h2>4.1、索引有效的查询</h2>\n<h3><strong>4.1.1、全值匹配</strong></h3>\n<p>全值匹配指的是和索引中的所有列进行匹配，如：以上面创建的索引为例，在where条件后可同时查询（user_name，city，age）为条件的数据。</p>\n<blockquote><p>注：与where后查询条件的顺序无关，这里是很多同学容易误解的一个地方</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0d8462044601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE user_name = 'feinik' AND age = 26 AND city = '广州';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0d8462044601-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0d8462044601-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'广州'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3><strong>4.1.2、匹配最左前缀</strong></h3>\n<p>匹配最左前缀是指优先匹配最左索引列，如：上面创建的索引可用于查询条件为：（user_name ）、（user_name, city）、（user_name , city , age）</p>\n<blockquote><p>注：满足最左前缀查询条件的顺序与索引列的顺序无关，如：（city, user_name）、（age, city, user_name）</p></blockquote>\n<h3><strong>4.1.3、匹配列前缀</strong></h3>\n<p>指匹配列值的开头部分，如：查询用户名以feinik开头的所有用户</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0dc438815302\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE user_name LIKE 'feinik%';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0dc438815302-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0dc438815302-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">user_name </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik%'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3><strong>4.1.4、匹配范围值</strong></h3>\n<p>如：查询用户名以feinik开头的所有用户，这里使用了索引的第一列</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0df370237402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE user_name LIKE 'feinik%';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0df370237402-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0df370237402-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">user_name </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik%'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h2>4.2、索引的限制</h2>\n<p>1、where查询条件中不包含索引列中的最左索引列，则无法使用到索引查询，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0e2137248058\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE city = '广州';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0e2137248058-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0e2137248058-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">city</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'广州'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>或</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0e5779468614\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE age= 26;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0e5779468614-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0e5779468614-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">age</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">26</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>或</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0e8503440928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE city = '广州' AND age = '26';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0e8503440928-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0e8503440928-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">city</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'广州'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'26'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>2、即使where的查询条件是最左索引列，也无法使用索引查询用户名以feinik结尾的用户</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0eb466114608\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE user_name like '%feinik';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0eb466114608-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0eb466114608-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">user_name </span><span class=\"crayon-i\">like</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%feinik'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>3、如果where查询条件中有某个列的范围查询，则其右边的所有列都无法使用索引优化查询，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0ee502236294\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM user_test WHERE user_name = 'feinik' AND city LIKE '广州%' AND age = 26;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0ee502236294-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0ee502236294-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">city </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'广州%'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">26</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h1>5、高效的索引策略</h1>\n<h2>5.1、索引列不能是表达式的一部分，也不能作为函数的参数，否则无法使用索引查询。</h2>\n<p>SELECT * FROM user_test WHERE user_name = concat(user_name, ‘fei’);</p>\n<h2>5.2、前缀索引</h2>\n<p>有时候需要索引很长的字符列，这会增加索引的存储空间以及降低索引的效率，一种策略是可以使用哈希索引，还有一种就是可以使用前缀索引，前缀索引是选择字符列的前n个字符作为索引，这样可以大大节约索引空间，从而提高索引效率。</p>\n<h3><strong>5.2.1、前缀索引的选择性</strong></h3>\n<p>前缀索引要选择足够长的前缀以保证高的选择性，同时又不能太长，我们可以通过以下方式来计算出合适的前缀索引的选择长度值：</p>\n<p>（1）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0f2727410738\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT COUNT(DISTINCT index_column)/COUNT(*) FROM table_name; -- index_column代表要添加前缀索引的列</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f2727410738-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0f2727410738-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">DISTINCT </span><span class=\"crayon-v\">index_column</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">table_name</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">_</span>column代表要添加前缀索引的列</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<blockquote><p>注：通过以上方式来计算出前缀索引的选择性比值，比值越高说明索引的效率也就越高效。</p></blockquote>\n<p>（2）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0f7780040068\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT\r\n\r\nCOUNT(DISTINCT LEFT(index_column,1))/COUNT(*),\r\n\r\nCOUNT(DISTINCT LEFT(index_column,2))/COUNT(*),\r\n\r\nCOUNT(DISTINCT LEFT(index_column,3))/COUNT(*)\r\n\r\n...\r\n\r\nFROM table_name;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f7780040068-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0f7780040068-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f7780040068-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0f7780040068-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f7780040068-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0f7780040068-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f7780040068-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0f7780040068-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f7780040068-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a0f7780040068-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0f7780040068-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0f7780040068-1\"><span class=\"crayon-e\">SELECT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0f7780040068-2\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a0f7780040068-3\"><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">DISTINCT </span><span class=\"crayon-e\">LEFT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index_column</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0f7780040068-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a0f7780040068-5\"><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">DISTINCT </span><span class=\"crayon-e\">LEFT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index_column</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0f7780040068-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a0f7780040068-7\"><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">DISTINCT </span><span class=\"crayon-e\">LEFT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index_column</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0f7780040068-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a0f7780040068-9\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a0f7780040068-10\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a0f7780040068-11\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">table_name</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<blockquote><p>注：通过以上语句逐步找到最接近于（1）中的前缀索引的选择性比值，那么就可以使用对应的字符截取长度来做前缀索引了</p></blockquote>\n<h3>5.2.2、前缀索引的创建</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0fb236881688\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE table_name ADD INDEX index_name (index_column(length));</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0fb236881688-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0fb236881688-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">table_name </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-e\">INDEX </span><span class=\"crayon-e\">index_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">index_column</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3>5.2.3、使用前缀索引的注意点</h3>\n<p>前缀索引是一种能使索引更小，更快的有效办法，但是MySql无法使用前缀索引做ORDER BY 和 GROUP BY以及使用前缀索引做覆盖扫描。</p>\n<h2>5.3、选择合适的索引列顺序</h2>\n<p>在组合索引的创建中索引列的顺序非常重要，正确的索引顺序依赖于使用该索引的查询方式，对于组合索引的索引顺序可以通过经验法则来帮助我们完成：将选择性最高的列放到索引最前列，该法则与前缀索引的选择性方法一致，但并不是说所有的组合索引的顺序都使用该法则就能确定，还需要根据具体的查询场景来确定具体的索引顺序。</p>\n<h2>5.4 聚集索引与非聚集索引</h2>\n<p><strong>1、聚集索引</strong></p>\n<p>聚集索引决定数据在物理磁盘上的物理排序，一个表只能有一个聚集索引，如果定义了主键，那么InnoDB会通过主键来聚集数据，如果没有定义主键，InnoDB会选择一个唯一的非空索引代替，如果没有唯一的非空索引，InnoDB会隐式定义一个主键来作为聚集索引。</p>\n<p>聚集索引可以很大程度的提高访问速度，因为聚集索引将索引和行数据保存在了同一个B-Tree中，所以找到了索引也就相应的找到了对应的行数据，但在使用聚集索引的时候需注意避免随机的聚集索引（一般指主键值不连续，且分布范围不均匀），如使用UUID来作为聚集索引性能会很差，因为UUID值的不连续会导致增加很多的索引碎片和随机I/O，最终导致查询的性能急剧下降。</p>\n<p><strong>2、非聚集索引</strong></p>\n<p>与聚集索引不同的是非聚集索引并不决定数据在磁盘上的物理排序，且在B-Tree中包含索引但不包含行数据，行数据只是通过保存在B-Tree中的索引对应的指针来指向行数据，如：上面在（user_name，city, age）上建立的索引就是非聚集索引。</p>\n<h2>5.5、覆盖索引</h2>\n<p>如果一个索引（如：组合索引）中包含所有要查询的字段的值，那么就称之为覆盖索引，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a0ff106773020\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age FROM user_test WHERE user_name = 'feinik' AND age &gt; 25;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a0ff106773020-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a0ff106773020-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>因为要查询的字段（user_name, city, age）都包含在组合索引的索引列中，所以就使用了覆盖索引查询，查看是否使用了覆盖索引可以通过执行计划中的Extra中的值为Using index则证明使用了覆盖索引，覆盖索引可以极大的提高访问性能。</p>\n<h2>5.6、如何使用索引来排序</h2>\n<p>在排序操作中如果能使用到索引来排序，那么可以极大的提高排序的速度，要使用索引来排序需要满足以下两点即可。</p>\n<ul>\n<li>1、ORDER BY子句后的列顺序要与组合索引的列顺序一致，且所有排序列的排序方向（正序/倒序）需一致</li>\n<li>2、所查询的字段值需要包含在索引列中，及满足覆盖索引</li>\n</ul>\n<p><strong>通过例子来具体分析</strong></p>\n<p>在user_test表上创建一个组合索引</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a103194380337\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE user_test ADD INDEX index_user(user_name , city , age);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a103194380337-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a103194380337-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-e\">INDEX </span><span class=\"crayon-e\">index_user</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>name<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">city</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>可以使用到索引排序的案例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a108741912639\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1、SELECT user_name, city, age FROM user_test ORDER BY user_name;\r\n\r\n2、SELECT user_name, city, age FROM user_test ORDER BY user_name, city;\r\n\r\n3、SELECT user_name, city, age FROM user_test ORDER BY user_name DESC, city DESC;\r\n\r\n4、SELECT user_name, city, age FROM user_test WHERE user_name = 'feinik' ORDER BY city;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a108741912639-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a108741912639-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a108741912639-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a108741912639-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a108741912639-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a108741912639-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a108741912639-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a108741912639-1\"><span class=\"crayon-cn\">1</span>、<span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a108741912639-2\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a108741912639-3\"><span class=\"crayon-cn\">2</span>、<span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a108741912639-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a108741912639-5\"><span class=\"crayon-cn\">3</span>、<span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">user_name </span><span class=\"crayon-v\">DESC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">city </span><span class=\"crayon-v\">DESC</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a108741912639-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a108741912639-7\"><span class=\"crayon-cn\">4</span>、<span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<blockquote><p>注：第4点比较特殊一点，如果where查询条件为索引列的第一列，且为常量条件，那么也可以使用到索引</p></blockquote>\n<p>无法使用索引排序的案例</p>\n<p>1、sex不在索引列中</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a10c419856956\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age FROM user_test ORDER BY user_name, sex;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a10c419856956-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a10c419856956-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sex</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>2、排序列的方向不一致</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a10f860886481\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age FROM user_test ORDER BY user_name ASC, city DESC;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a10f860886481-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a10f860886481-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">user_name </span><span class=\"crayon-v\">ASC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">city </span><span class=\"crayon-v\">DESC</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>3、所要查询的字段列sex没有包含在索引列中</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a112329611588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age, sex FROM user_test ORDER BY user_name;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a112329611588-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a112329611588-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sex </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>4、where查询条件后的user_name为范围查询，所以无法使用到索引的其他列</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a115158559166\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age FROM user_test WHERE user_name LIKE 'feinik%' ORDER BY city;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a115158559166-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a115158559166-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">user_test </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">user_name </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'feinik%'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>5、多表连接查询时，只有当ORDER BY后的排序字段都是第一个表中的索引列（需要满足以上索引排序的两个规则）时，方可使用索引排序。如：再创建一个用户的扩展表user_test_ext，并建立uid的索引。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a118554724559\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDROP TABLE IF EXISTS user_test_ext;\r\n\r\nCREATE TABLE user_test_ext(\r\n\r\n    id int AUTO_INCREMENT PRIMARY KEY,\r\n\r\n    uid int NOT NULL,\r\n\r\n    u_password VARCHAR(64) NOT NULL\r\n\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r\n\r\nALTER TABLE user_test_ext ADD INDEX index_user_ext(uid);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a118554724559-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a118554724559-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a118554724559-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a118554724559-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a118554724559-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983cf484a118554724559-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983cf484a118554724559-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-1\"><span class=\"crayon-e\">DROP </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS </span><span class=\"crayon-v\">user_test_ext</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a118554724559-2\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-3\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_test_ext</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a118554724559-4\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">id </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-v\">KEY</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a118554724559-6\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uid </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a118554724559-8\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">u_password </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a118554724559-10\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-11\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983cf484a118554724559-12\"> </div><div class=\"crayon-line\" id=\"crayon-5983cf484a118554724559-13\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_test_ext </span><span class=\"crayon-e\">ADD </span><span class=\"crayon-e\">INDEX </span><span class=\"crayon-e\">index_user_ext</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>走索引排序</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a11c065575973\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age FROM user_test u LEFT JOIN user_test_ext ue ON u.id = ue.uid ORDER BY u.user_name;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a11c065575973-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a11c065575973-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>test<span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LEFT </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">user_test_ext </span><span class=\"crayon-e\">ue </span><span class=\"crayon-i\">ON</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">uid </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-i\">BY</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>不走索引排序</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983cf484a11f252963951\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT user_name, city, age FROM user_test u LEFT JOIN user_test_ext ue ON u.id = ue.uid ORDER BY ue.uid;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983cf484a11f252963951-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983cf484a11f252963951-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">user_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>test<span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LEFT </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">user_test_ext </span><span class=\"crayon-e\">ue </span><span class=\"crayon-i\">ON</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">uid </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">ue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1>6、总结</h1>\n<p>本文主要讲了B+Tree树结构的索引规则，不同索引的创建，以及如何正确的创建出高效的索引技巧来尽可能的提高查询速度，当然了关于索引的使用技巧不单单只有这些，关于索引的更多技巧还需平时不断的积累相关经验。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111845\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111845votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111845\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "cf623c10941d938ad5c7aceb01b0e9f3", "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg"}
{"title": "DB 分库分表的基本思想和切分策略", "url": "http://blog.jobbole.com/111855/", "create_date": "2017/07/15", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "fav_count": 6, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://blog.csdn.net/bluishglc/article/details/6161475\">Laurence的技术博客</a>   </div><p>本文着重介绍sharding的基本思想和理论上的切分策略，关于更加细致的实施策略和参考事例请参考我的另一篇博文：<a href=\"http://blog.jobbole.com/111860/\" target=\"_blank\">DB 分库分表（1）： 拆分实施策略和示例演示 </a></p>\n<p><strong>一、基本思想</strong></p>\n<p>Sharding的基本思想就要把一个数据库切分成多个部分放到不同的数据库(server)上，从而缓解单一数据库的性能问题。不太严格的讲，对于海量数据的数据库，如果是因为表多而数据多，这时候适合使用垂直切分，即把关系紧密（比如同一模块）的表切分出来放在一个server上。如果表并不多，但每张表的数据非常多，这时候适合水平切分，即把表的数据按某种规则（比如按ID散列）切分到多个数据库(server)上。当然，现实中更多是这两种情况混杂在一起，这时候需要根据实际情况做出选择，也可能会综合使用垂直与水平切分，从而将原有数据库切分成类似矩阵一样可以无限扩充的数据库(server)阵列。下面分别详细地介绍一下垂直切分和水平切分.</p>\n<p>垂直切分的最大特点就是规则简单，实施也更为方便，尤其适合各业务之间的耦合度非常低，相互影响很小，业务逻辑非常清晰的系统。在这种系统中，可以很容易做到将不同业务模块所使用的表分拆到不同的数据库中。根据不同的表来进行拆分，对应用程序的影响也更小，拆分规则也会比较简单清晰。（这也就是所谓的”share nothing”）。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/2ce8c1ca0a46de6603bda931b3e3160b.jpg\" alt=\"\"></p>\n<p>水平切分于垂直切分相比，相对来说稍微复杂一些。因为要将同一个表中的不同数据拆分到不同的数据库中，对于应用程序来说，拆分规则本身就较根据表名来拆分更为复杂，后期的数据维护也会更为复杂一些。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/100ee97139152eb7b822efab51d05dbf.jpg\" alt=\"\"></p>\n<p>让我们从普遍的情况来考虑数据的切分：一方面，一个库的所有表通常不可能由某一张表全部串联起来，这句话暗含的意思是，水平切分几乎都是针对一小搓一小搓（实际上就是垂直切分出来的块）关系紧密的表进行的，而不可能是针对所有表进行的。另一方面，一些负载非常高的系统，即使仅仅只是单个表都无法通过单台数据库主机来承担其负载，这意味着单单是垂直切分也不能完全解决问明。因此多数系统会将垂直切分和水平切分联合使用，先对系统做垂直切分，再针对每一小搓表的情况选择性地做水平切分。从而将整个数据库切分成一个分布式矩阵。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/f54969b3b128512a0464502cd1300aad.jpg\" alt=\"\"></p>\n<p><strong>二、切分策略</strong></p>\n<p>如前面所提到的，切分是按先垂直切分再水平切分的步骤进行的。垂直切分的结果正好为水平切分做好了铺垫。垂直切分的思路就是分析表间的聚合关系，把关系紧密的表放在一起。多数情况下可能是同一个模块，或者是同一“聚集”。这里的“聚集”正是领域驱动设计里所说的聚集。在垂直切分出的表聚集内，找出“根元素”（这里的“根元素”就是领域驱动设计里的“聚合根”），按“根元素”进行水平切分，也就是从“根元素”开始，把所有和它直接与间接关联的数据放入一个shard里。这样出现跨shard关联的可能性就非常的小。应用程序就不必打断既有的表间关联。比如：对于社交网站，几乎所有数据最终都会关联到某个用户上，基于用户进行切分就是最好的选择。再比如论坛系统，用户和论坛两个模块应该在垂直切分时被分在了两个shard里，对于论坛模块来说，Forum显然是聚合根，因此按Forum进行水平切分，把Forum里所有的帖子和回帖都随Forum放在一个shard里是很自然的。</p>\n<p>对于共享数据数据，如果是只读的字典表，每个shard里维护一份应该是一个不错的选择，这样不必打断关联关系。如果是一般数据间的跨节点的关联，就必须打断。</p>\n<p><strong>      需要特别说明的是：当同时进行垂直和水平切分时，切分策略会发生一些微妙的变化。比如：在只考虑垂直切分的时候，被划分到一起的表之间可以保持任意的关联关系，因此你可以按“功能模块”划分表格，但是一旦引入水平切分之后，表间关联关系就会受到很大的制约，通常只能允许一个主表（以该表ID进行散列的表）和其多个次表之间保留关联关系，也就是说：当同时进行垂直和水平切分时，在垂直方向上的切分将不再以“功能模块”进行划分，而是需要更加细粒度的垂直切分，而这个粒度与领域驱动设计中的“聚合”概念不谋而合，甚至可以说是完全一致，每个shard的主表正是一个聚合中的聚合根！这样切分下来你会发现数据库分被切分地过于分散了（shard的数量会比较多，但是shard里的表却不多），为了避免管理过多的数据源，充分利用每一个数据库服务器的资源，可以考虑将业务上相近，并且<strong><strong>具有相近数据增长速率（主表数据量在同一数量级上）的</strong></strong>两个或多个shard放到同一个数据源里，每个shard依然是独立的，它们有各自的主表，并使用各自主表ID进行散列，不同的只是它们的散列取模（即节点数量）必需是一致的。</strong></p>\n<p>1.事务问题：<br>\n解决事务问题目前有两种可行的方案：分布式事务和通过应用程序与数据库共同控制实现事务下面对两套方案进行一个简单的对比。<br>\n方案一：使用分布式事务<br>\n优点：交由数据库管理，简单有效<br>\n缺点：性能代价高，特别是shard越来越多时<br>\n方案二：由应用程序和数据库共同控制<br>\n原理：将一个跨多个数据库的分布式事务分拆成多个仅处于单个数据库上面的小事务，并通过应用程序来总控各个小事务。<br>\n优点：性能上有优势<br>\n缺点：需要应用程序在事务控制上做灵活设计。如果使用了spring的事务管理，改动起来会面临一定的困难。</p>\n<p>2.跨节点Join的问题<br>\n只要是进行切分，跨节点Join的问题是不可避免的。但是良好的设计和切分却可以减少此类情况的发生。解决这一问题的普遍做法是分两次查询实现。在第一次查询的结果集中找出关联数据的id,根据这些id发起第二次请求得到关联数据。</p>\n<p>3.跨节点的count,order by,group by以及聚合函数问题<br>\n这些是一类问题，因为它们都需要基于全部数据集合进行计算。多数的代理都不会自动处理合并工作。解决方案：与解决跨节点join问题的类似，分别在各个节点上得到结果后在应用程序端进行合并。和join不同的是每个结点的查询可以并行执行，因此很多时候它的速度要比单一大表快很多。但如果结果集很大，对应用程序内存的消耗是一个问题。</p>\n<p><strong>关于垂直切分Vertical Sharding的粒度</strong></p>\n<p>垂直切分的粒度指的是在做垂直切分时允许几级的关联表放在一个shard里．这个问题对应用程序和sharding实现有着很大的影响．</p>\n<p>关联打断地越多，则受影响的join操作越多，应用程序为此做出的妥协就越大，但单表的路由会越简单，与业务的关联性会越小，就越容易使用统一机制处理．在此方向上的极端方案是：打断所有连接，每张表都配有路由规则，可以使用统一机制或框架自动处理．比如amoeba这样的框架，它的路由能且仅能通过SQL的特征（比如某个表的id）进行路由．</p>\n<p>反之，若关联打断地越少，则join操作的受到的限制就小，应用程序需要做出的妥协就越小，但是表的路由就会变复杂，与业务的关联性就越大，就越难使用统一机制处理，需要针对每个数据请求单独实现路由．在此方向上的极端方案是：所有表都在一个shard里，也就是没有垂直切分，这样就没有关联被打断．当然这是非常极端的，除非整个数据库很简单，表的数量很少．</p>\n<p>实际的粒度掌控需要结合“业务紧密程度”和“表格数据量”两个因素综合考虑，一般来说：</p>\n<ul>\n<li>若划归到一起的表格关系紧密，且数据量并不大，增速也非常缓慢，则适宜放在一个shard里，不需要再进行水平切分;</li>\n</ul>\n<ul>\n<li>若划归到一起的表格数据量巨大且增速迅猛，则势必要在垂直切分的基础上再进行水平切分，水平切分就意味着原单一shard会被细分成多个更小的shard，每一个shard存在一个主表（即会以该表ID进行散列的表）和多个相之相关的关联表。</li>\n</ul>\n<p>总之，垂直切分的粒度在两个相反的方向上呈现优势与劣势并存并相互博弈的局面．架构师需要做的是结合项目的实际情况在两者之间取得收益最大化的平衡．</p>\n<p>参考资料：</p>\n<p>《MySQL性能调优与架构设计》</p>\n<p>注：本文图片摘自《MySQL性能调优与架构设计》一书</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111855\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111855votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111855\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "7aa6fa98cd3ee2601bef9126f83c34d6", "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg"}
{"title": "一步步实现 Redis 搜索引擎", "url": "http://blog.jobbole.com/111480/", "create_date": "2017/06/19", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/08/redis-logo.png"], "fav_count": 6, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md\">jasonGeng88</a>   </div><div>\n<h2>场景</h2>\n</div>\n<p>大家如果是做后端开发的，想必都实现过列表查询的接口，当然有的查询条件很简单，一条 SQL 就搞定了，但有的查询条件极其复杂，再加上库表中设计的各种不合理，导致查询接口特别难写，然后加班什么的就不用说了（<em>不知各位有没有这种感受呢~</em>）。</p>\n<p>下面以一个例子开始，这是某购物网站的搜索条件，如果让你实现这样的一个搜索接口，你会如何实现？（<em>当然你说借助搜索引擎，像 Elasticsearch 之类的，你完全可以实现。但我这里想说的是，如果要你自己实现呢？</em>）</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_01.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_01.png\" alt=\"\"></a></p>\n<p>从上图中可以看出，搜索总共分为6大类，每大类中又分了各个子类。这中间，各大类条件之间是取的交集，各子类中有单选、多选、以及自定义的情况，最终输出符合条件的结果集。</p>\n<p>好了，既然需求很明确了，我们就开始来实现。</p>\n<h2><a id=\"user-content-实现1\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%AE%9E%E7%8E%B01\"></a>实现1</h2>\n<p>率先登场是小A同学，他是写 SQL 方面的“专家”。小A信心满满的说：“不就是一个查询接口吗？看着条件很多，但凭着我丰富的 SQL 经验，这点还是难不倒我的。”</p>\n<p>于是乎就写出了下面这段代码（这里以 MYSQL 为例）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983caef8406d924944491\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect ... from table_1\r\nleft join table_2\r\nleft join table_3\r\nleft join (select ... from table_x where ...) tmp_1\r\n...\r\nwhere ...\r\norder by ...\r\nlimit m,n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983caef8406d924944491-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef8406d924944491-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983caef8406d924944491-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef8406d924944491-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983caef8406d924944491-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef8406d924944491-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983caef8406d924944491-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef8406d924944491-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983caef8406d924944491-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">table_1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef8406d924944491-2\"><span class=\"crayon-e\">left </span><span class=\"crayon-e\">join </span><span class=\"crayon-e\">table_2</span></div><div class=\"crayon-line\" id=\"crayon-5983caef8406d924944491-3\"><span class=\"crayon-e\">left </span><span class=\"crayon-e\">join </span><span class=\"crayon-e\">table_3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef8406d924944491-4\"><span class=\"crayon-e\">left </span><span class=\"crayon-e\">join</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">table_x </span><span class=\"crayon-i\">where</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">_</span>1</div><div class=\"crayon-line\" id=\"crayon-5983caef8406d924944491-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef8406d924944491-6\"><span class=\"crayon-i\">where</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5983caef8406d924944491-7\"><span class=\"crayon-e\">order </span><span class=\"crayon-i\">by</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef8406d924944491-8\"><span class=\"crayon-i\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>代码在测试环境跑了一把，结果好像都匹配上了，于是准备上预发。这一上预发，问题就开始暴露出来。预发为了尽可能的逼真线上环境，所以数据量自然而然要比测试大的多。所以这么一个复杂的 SQL，它的执行效率可想而知。测试同学果断把小A的代码给打了回来。</p>\n<h2><a id=\"user-content-实现2\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%AE%9E%E7%8E%B02\"></a>实现2</h2>\n<p>总结了小A失败的教训，小B开始对SQL进行了优化，先是通过了<code>explain</code>关键字进行SQL性能分析，对该加索引的地方都加上了索引。同时将一条复杂SQL拆分成了多条SQL，计算结果在程序内存中进行计算。</p>\n<p>伪代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983caef84078338013167\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$result_1 = query('select ... from table_1 where ...');\r\n$result_2 = query('select ... from table_2 where ...');\r\n$result_3 = query('select ... from table_3 where ...');\r\n...\r\n\r\n$result = array_intersect($result_1, $result_2, $result_3, ...);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983caef84078338013167-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef84078338013167-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983caef84078338013167-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef84078338013167-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983caef84078338013167-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983caef84078338013167-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983caef84078338013167-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'select ... from table_1 where ...'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef84078338013167-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'select ... from table_2 where ...'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5983caef84078338013167-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'select ... from table_3 where ...'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef84078338013167-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5983caef84078338013167-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983caef84078338013167-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">array_intersect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这种方案从性能上明显比第一种要好很多，可是在功能验收的时候，产品经理还是觉得查询速度不够快。小B自己也知道，每次查询都会向数据库查询多次，而且有些历史原因，部分条件是做不到单表查询的，所以查询等待的时间是避免不了的。</p>\n<h2><a id=\"user-content-实现3\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%AE%9E%E7%8E%B03\"></a>实现3</h2>\n<p>小C从上面的方案中看到了优化的空间。他发现小B在思路上是没问题的，将复杂条件拆分，计算各个子维度的结果集，最后将所有的子结果集进行一个汇总合并，得到最终想要的结果。</p>\n<p>于是他突发奇想，能否事先将各个子维度的结果集给缓存起来，这要查询的时候直接去取想要的子集，而不用每次去查库计算。</p>\n<p>这里小C采用 <a href=\"https://redis.io/\">Redis</a> 来存储缓存数据，用它的主要原因是，它提供了多种数据结构，并且在 Redis 中进行集合的交并集操作是一件很容易的事情。</p>\n<p>具体方案，如图所示：</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_02.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_02.png\" alt=\"\"></a></p>\n<p>这里每个条件都事先将计算好的结果集ID存入对应的key中，选用的数据结构是集合（Set）。查询操作包括：</p>\n<ul>\n<li>子类单选：直接根据条件 key，获取对应结果集；</li>\n<li>子类多选：根据多个条件 Key，进行并集操作，获取对应结果集；</li>\n<li>最终结果：将获取的所有子类结果集进行交集操作，得到最终结果；</li>\n</ul>\n<p><em><strong>这其实就是所谓的<a href=\"https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95\">反向索引</a>。</strong></em></p>\n<p>这里会发现，漏了一个价格的条件。从需求中可知，价格条件是个区间，并且是无穷举的。所以上述的这种穷举条件的 Key-Value 方式是做不到的。这里我们采用 Redis 的另一种数据结构进行实现，有序集合（Sorted Set）：</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_03.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_03.png\" alt=\"\"></a></p>\n<p>将所有商品加入 Key 为价格的有序集合中，值为商品ID，每个值对应的分数为商品价格的数值。这样在 Redis 的有序集合中就可以通过<code>ZRANGEBYSCORE</code>命令，根据分数（价格）区间，获取相应结果集。</p>\n<p>至此，方案三的优化已全部结束，将数据的查询与计算通过缓存的手段，进行了分离。在每次查找时，只需要简单的查找 Redis 几次就能得出结果。查询速度上符合了验收的要求。</p>\n<h2><a id=\"user-content-扩展\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%89%A9%E5%B1%95\"></a>扩展</h2>\n<h3><a id=\"user-content-分页\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%88%86%E9%A1%B5\"></a>分页</h3>\n<p>这里你或许发现了一个严重的功能缺陷，列表查询怎么能没有分页。是的，我们马上来看 Redis 是如何实现分页的。</p>\n<p>分页主要涉及排序，这里简单起见，就以创建时间为例。</p>\n<p>如图所示：</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_04.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_04.png\" alt=\"\"></a></p>\n<p>图中蓝色部分是以创建时间为分值的商品有序集合，蓝色下方的结果集即为条件计算而得的结果，通过<code>ZINTERSTORE</code>命令，赋结果集权重为0，商品时间结果为1，取交集而得的结果集赋予创建时间分值的新有序集合。对新结果集的操作即能得到分页所需的各个数据：</p>\n<ul>\n<li>页面总数为：<code>ZCOUNT</code>命令</li>\n<li>当前页内容：<code>ZRANGE</code>命令</li>\n<li>若以倒序排列：<code>ZREVRANGE</code>命令</li>\n</ul>\n<h3><a id=\"user-content-数据更新\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0\"></a>数据更新</h3>\n<p>关于索引数据更新的问题，有两种方式来进行。一种是通过商品数据的修改，来即时触发更新操作，一种是通过定时脚本来进行批量更新。这里要注意的是，关于索引内容的更新，如果暴力的删除 Key，再重新设置 Key。因为 Redis 中两个操作不会是原子性进行的，所以中间可能存在空白间隙，建议采用仅移除集合中失效元素，添加新元素的方式进行。</p>\n<h3><a id=\"user-content-性能优化\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96\"></a>性能优化</h3>\n<p>Redis 是内存级操作，所以单次的查询会很快。但是如果我们的实现中会进行多次的 Redis 操作，Redis 的多次连接时间可能是不必要时间消耗。通过使用<code>MULTI</code>命令，开启一个事务，将 Redis 的多次操作放在一个事务中，最后通过<code>EXEC</code>来进行原子性执行（<em><strong>注意：这里所谓的事务，只是将多个操作在一次连接中执行，如果执行过程中遇到失败，是不会回滚的</strong></em>）。</p>\n<h2><a id=\"user-content-总结\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%80%BB%E7%BB%93\"></a>总结</h2>\n<p>这里只是一个采用 Redis 优化查询搜索的一个简单 Demo，和现有的开源搜索引擎相比，它更轻量，学习成本也相应低些。其次，它的一些思想与开源搜索引擎是类似的，如果再加上词语解析，也可以实现类似全文检索的功能。</p>\n<p>最后，未完，待续。。。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111480\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111480votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111480\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "42369d324412b391499279a170e4ca36", "front_image_path": "full/0a03ec3e1ce1b668b8db0234731fac4915b1064d.jpg"}
{"title": "让程序员跨界做设计，脑洞开的万万想不到", "url": "http://blog.jobbole.com/111518/", "create_date": "2017/06/19", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/7a91ae8776d0953ac776284a7d92e861.jpg"], "fav_count": 1, "comment_count": 7, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.oschina.net/news/85952/th-worst-volume-control-design-contest\">开源中国社区/王练</a>   </div><p>如果程序员来做设计，世界会变成什么样子？</p>\n<p>著名社交新闻网站 Reddit 最近举办了一个“最糟糕音量键设计大赛”，起因是一个程序员在 Reddit 晒出了自己设计的一款“不同寻常”的音量控制键，并号召大家加入到设计当中来。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fgqlqodsdlg20d407s40w.gif\" width=\"472\" height=\"280\"></p>\n<p>程序员们分别按照自己的想法，重新设计了电脑的音量大小按键，比如这样的：</p>\n<blockquote><p>我也不知道音量大小是多少，全都是凭运气来调整的，想要改音量的时候就 roll 一下</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqoib21g20dy06z76y.gif\" width=\"502\" height=\"251\"></p>\n<blockquote><p>快把音量调到50！等等，等等，我再晃一下，刚刚晃过了…</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fgqlqpgt5fg20ir06wqv5.gif\" width=\"675\" height=\"248\"></p>\n<p>愤怒的小鸟？</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqpwtikg20dw06y41h.gif\" width=\"500\" height=\"250\"></p>\n<p>单身几十年的手速终于排上用场了</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fgqlqqzjgeg20fm0dg7wh.gif\" width=\"562\" height=\"484\"></p>\n<p>学渣的末日</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqra6u8g20dm02yglm.gif\" width=\"490\" height=\"106\"></p>\n<p>论“鼠标手”是怎么炼成的</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fgqlqrtsxyg20ie0aemzf.gif\" width=\"662\" height=\"374\"></p>\n<p>给我一天时间，我能画个蒙娜丽莎出来</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqs8ecsg20go0ctdqu.gif\" width=\"600\" height=\"461\"></p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111518\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111518votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111518\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "趣文小说", "url_object_id": "28c734bfc805d9104aada552c0c94048", "front_image_path": "full/e4ef10899dd499cd91f9102bff717ea3d2311bfc.jpg"}
{"title": "自学的程序员如何找到好工作？", "url": "http://blog.jobbole.com/111497/", "create_date": "2017/06/19", "front_image_url": ["http://wx1.sinaimg.cn/large/7cc829d3gy1fgqaiwbj8uj20nj0d3757.jpg"], "fav_count": 19, "comment_count": 7, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://brianknapp.me/how-do-self-taught-developers-actually-get-jobs/\">Brian Knapp</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：2016 年有位年轻的程序员在 Quora 上提问求助：</p>\n<blockquote><p>我今年 17 岁，从 14 岁开始编程。我主要关注 Java 语言，并在 AP 计算机科学这门课上拿了 5 分。我相当精通 Java（比如语法、主要类、GUI/JFrame 等），HTML5 和 CSS3 也不错。我感觉自己缺乏很多有用的技能，来帮助我在人才市场上推销自己（比如数据库的工作原理，以及我应该使用哪些工具），我很好奇其他人是如何学习这些东西的。我打算去大学拿一个软件开发的学位，但我开始感到有点沮丧，觉得读大学的目的就是为了工作。现在有哪些我应该上的课程，或者应该做的事情吗？</p></blockquote>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fgqaiwbj8uj20nj0d3757.jpg\" width=\"620\" height=\"345\"></p>\n<h3>下面是 Brain Knapp 的回答分享︰</h3>\n<p>我认为你的看法错了。你觉得你需要上课，让别人来教你，告诉你答案。从根本上讲，自学的程序员能够做不一样的事情。</p>\n<p>自学的程序员和自学的吉他手有很多共同点。我不知道你是否玩过吉他，所以我将向你解释如何自学吉他。</p>\n<p>首先，这一切的开始是由于某人与某个吉他手产生了共鸣。大多数突然想要自学吉他的人，是想要成为另一个吉他手。之后，他们下定决心——“我也可以成为一个吉他手 ”，于是去了当地的乐器店，买了一把二手吉他（因为二手吉他更便宜，但也很酷）。</p>\n<p>接下来可能会有两种情况，要不买一本“吉他入门”或类似的书籍开始自学，要不打开 YouTube，开始学习如何弹奏自己喜爱的歌。那些尝试学习弹奏喜欢的歌的自学者，往往学得更好。</p>\n<p>当年轻的吉他手主动地学习某首歌时，他们往往需要观看视频、打印曲谱、练习和弦等等。然后，根据拿到的视频和曲谱，他们会坐下来尝试重新演绎歌曲。</p>\n<p>经过数小时的练习，不断重复和弦、独奏、节拍等，他们将能够以自己的形式表演那首歌。它不再是原来那首歌，但也够酷。</p>\n<p>然后，他们会拿起另一首歌，重复这个过程。一路走来，他们不断学习节拍、技术以及其他的东西，甚至都没有意识到学习的内容。在知道专业名词和理论前，他们已经懂得如何操作。</p>\n<p><span style=\"color: #000000\">最终，弹吉他变成了一种“直觉”，学习一首新歌也变得习以为常且不再痛苦。吉他的“语言”变得像你我说话那样容易。</span></p>\n<p>这一切的发生，背后是数千小时的艰苦练习。即使每天只练习一小时，也需要耗费数年。</p>\n<p><strong>那么，这和自学的程序员有什么关系呢？</strong></p>\n<p><span style=\"color: #000000\">事实上，真正成就自学的程序员的，就是他们会自己创建东西，很多东西。</span>要成为一个具有卓越技能的出色程序员，你必须创建东西，写代码。</p>\n<p>上课学习理论知识固然是好的，但很多教授不能跳出条条框框的束缚，以自己的方式编程。就算他们努力尝试，也做不出别人愿意用的应用程序。</p>\n<p>这并不是说他们不了解教授的知识，而是说，作为一名教授，他们掌握的技能是研究和理论性理解，而不是写代码和为客户提供价值。</p>\n<p><strong>你看到区别了吗？</strong></p>\n<p>我合作过的最好的程序员，他们的工作方式就是做东西，做很多东西，并且几乎一直这样。</p>\n<p>例如，现在几乎每个人都使用 WordPress。在 WordPress 出现很久之前，我就用 PHP 和 MySQL 创建了 3 到 5 个不同的内容管理系统。我写过游戏、移动应用程序、框架，还有 SAAS 应用程序。</p>\n<p>没人付钱让我做这些事情。我做这些事纯粹是出于好玩、学习或好奇的目的。</p>\n<p>我已经好几年都没有上过课了，即使上了，我也不觉得这会对我的事业有任何帮助。然而，如果我决定坐下来，从头开始创建我自己的计算机语言或操作系统，我打赌我一定能在过程中学到很多有趣的东西。</p>\n<p>是的，我可以带着那些想法上课，但在创建东西，犯下错误，以及真正“体会到”这一切的经历中，相比读一本书或听一次讲座，我能收获更多。</p>\n<p>因此，我给你的建议（如果你做到了，相比没有做的那些人而言，会带给你巨大的优势），就是：</p>\n<p><strong><span style=\"color: #ff0000\">解决一个你想解决的问题</span>。</strong>创建一个用于某件事的软件，解决一些你本人或他人想要通过软件解决的问题。每天为这个软件写代码，晚上写，周末也写，每天都写。即使你每天只花了 15 分钟写代码，也没关系。</p>\n<p>最终，你将得到一个能用的软件，这很不错。</p>\n<p><span style=\"color: #ff0000\"><strong>然后，你再重复这一过程。做一个其他的东西。不断地做。花费大量的时间，通过创建更多的东西来提升你的技能。</strong></span></p>\n<p>做东西的同时，注意在你的网站上保存工作，并将其放在一个作品集中。每次你结束了一个项目，就将它上传到 Hacker News、Reddit 或其他什么网站，并发条关于它的博文。</p>\n<p>你现在仅仅 17 岁，当你 20 岁的时候，你已经轻松地将两千多小时用于锻炼技能，你的个人作品集中也有了大概十到二十多个软件，你学习到的经验是那些仅仅上课的人无法比拟的。</p>\n<p>更重要的是，你已经清楚地告诉别人，你能够独立地写代码，解决问题并给世界带来一些新东西。这是最难能可贵的一点，也是公司在不断追求的一点。</p>\n<p><span style=\"color: #ff0000\"><strong>一旦你找到了工作，请继续在业余时间创建东西，并提升你的工作技能</strong></span>。你的提升速度将比你的同事更快，因为他们在下班回家后看电视，而不是学习、成长或创建东西。他们拿到了薪水就回家享受去了。</p>\n<p>你做的越多，你学的也越多；你学的越多，你的价值就越高；你的价值越高，你就越容易找到工作，你的工资也就更高，这是一个良性循环。</p>\n<p>所以，去做些东西出来。现在就开始写代码吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111497\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111497votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111497\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 19 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 29</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "开发", "url_object_id": "d8f9f8f08d6737cb4a3e4987ebbc04cb", "front_image_path": "full/47088ef57f09c838c2a3bc97ec1b49801c291a32.jpg"}
{"title": "我是如何开始踏上 bash 脚本编程之路的？", "url": "http://blog.jobbole.com/111509/", "create_date": "2017/06/19", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "fav_count": 1, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/5/how-i-learned-bash-scripting\">Sandra Mccann</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8617-1.html\">Linux中国/xllc</a>   </div><p>我前几天写了一个脚本。对于一些人来说，这句话听起来没什么了不起的。而对于另一些人来说，这句话意义重大。要知道，我不是一个程序员，而是一个作家。</p>\n<h3 id=\"toc_1\">我需要解决什么？</h3>\n<p>我的问题相当简单：我需要将工程文件进行分类。这些文件可以从一个网站 URL 以 .zip 的格式下载。当我正手工将它们拷贝到我的电脑桌面，并移动到一个已按照我文件分类的需要进行了结构化的目录时，一位作家同事给我提了建议：<em>“不就是写个脚本的事吗？”</em></p>\n<p>我心想：<em>“就写个脚本？”</em>——说得好像这是世界上最容易做的事情一样。</p>\n<h3 id=\"toc_2\">Google 是如何解救我的？</h3>\n<p>同事的问题促使我思考，并且经过思考后，我进行了 Google 搜索。</p>\n<p><strong>Linux 上使用的是什么脚本编程语言？</strong></p>\n<p>这是我第一个 Google 搜索的准则。也许很多人心里会想：“她太笨了！”是的，我很笨。不过，这的确使我走上了一条解决问题的道路。最常见的搜索结果是 Bash 。嗯，我听说过 Bash 。呃，我要分类的文件中有一个里面就有 Bash，那无处不在的 <code>#!/bin/bash</code> 。我重新看了下那个文件，我知道它的用途，因为我需要将它分类。</p>\n<p>这引导我进行了下一个 Google 搜索。</p>\n<p><strong>如何从一个 URL 下载 zip 文件？</strong></p>\n<p>那确实是我的基本任务。我有一个带有 .zip 文件的 URL ，它包含有所有我需要分类的文件，所以我寻求万能的 Google 的帮助。搜索到的精华内容和其它一些结果引导我使用 Curl 。但最重要的是：我不仅找到了 Curl ，其中一条置顶的搜索结果还展示了一个使用 Curl 去下载并解压 .zip 文件的 Bash 脚本。这超出了我本来想寻求的答案，但那也使我意识到在 Google 搜索具体的请求可以得到我写这个脚本需要的信息。所以，在这个收获的推动下，我写了最简单的脚本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05d982a9011137374\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/sh\r\ncurl http://rather.long.url | tar -xz -C my_directory --strip-components=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05d982a9011137374-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982a9011137374-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05d982a9011137374-1\"><span class=\"crayon-p\">#!/bin/sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982a9011137374-2\"><span class=\"crayon-e\">curl </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rather.long.url | tar -xz -C my_directory --strip-components=1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>我迫不及待地运行看看。但我发现一个问题： URL 是会变的，根据我要访问的文件的分组不同而不同。我有新的问题需要解决，这使我进行了下一轮搜索。</p>\n<p><strong>参数如何传递给 Bash 脚本？</strong></p>\n<p>我需要以不同的 URL 和不同的最终目录来运行此脚本。 Google 向我展示了如何使用 <code>$1</code>、<code>$2</code> 等等来替换我在命令行中运行脚本时输入的内容。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05d982b3674576403\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbash myscript.sh http://rather.long.url my_directory</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05d982b3674576403-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05d982b3674576403-1\"><span class=\"crayon-e\">bash </span><span class=\"crayon-v\">myscript</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sh </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rather.long.url my_directory</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这就好多了。一切如我所愿，灵活，实用。最重要的是我只要输入一条简短的命令就可以节省 30 分钟无聊的复制、粘贴工作。这个早上的时间花得值得。</p>\n<p>然后我发现还有一个问题：我很健忘，并且我知道我几个月才运行一次这个脚本。这留给我两个疑问：</p>\n<ul>\n<li>我要如何记得运行脚本时输入什么（URL 先，还是目录先）？</li>\n<li>如果我被货车撞了，其它作家如何知道该怎样运行我的脚本？</li>\n</ul>\n<p>我需要一个使用说明 —— 如果我使用不正确，则脚本会提示。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05d982b7489593245\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nusage: bash yaml-fetch.sh &lt;'snapshot_url'&gt; &lt;directory&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05d982b7489593245-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05d982b7489593245-1\"><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bash </span><span class=\"crayon-v\">yaml</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fetch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-s\">'snapshot_url'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">directory</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>否则，则直接运行脚本。我的下一个搜索是：</p>\n<p><strong>如何在 Bash 脚本里使用 “if/then/else”?</strong></p>\n<p>幸运的是，我已经知道编程中 <code>if/then/else</code> 的存在。我只要找出如何使用它的方法。在这个过程中，我也学到了如何在 Bash 脚本里使用 <code>echo</code> 打印。我的最终成果如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05d982bb520360360\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/sh\r\nURL=$1\r\nDIRECTORY=$2\r\nif [ $# -eq 0 ];\r\n then\r\n echo \"usage: bash yaml-fetch.sh &lt;'snapshot_url'&gt; &lt;directory&gt;\".\r\n else\r\n# 如果目录不存在则创建它\r\n echo 'create directory'\r\n mkdir $DIRECTORY\r\n # 下载并解压 yaml 文件\r\n echo 'fetch and untar the yaml files'\r\n curl $URL | tar -xz -C $DIRECTORY --strip-components=1\r\nfi</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5983c05d982bb520360360-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05d982bb520360360-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-1\"><span class=\"crayon-p\">#!/bin/sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-2\"><span class=\"crayon-v\">URL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-3\"><span class=\"crayon-v\">DIRECTORY</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-4\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-p\"># -eq 0 ];</span></div><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"usage: bash yaml-fetch.sh &lt;'snapshot_url'&gt; &lt;directory&gt;\"</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-8\"><span class=\"crayon-p\"># 如果目录不存在则创建它</span></div><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'create directory'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mkdir</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">DIRECTORY</span></div><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 下载并解压 yaml 文件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'fetch and untar the yaml files'</span></div><div class=\"crayon-line\" id=\"crayon-5983c05d982bb520360360-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tar</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">DIRECTORY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">strip</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05d982bb520360360-14\"><span class=\"crayon-v\">fi</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">Google 和脚本编程如何颠覆我的世界？</h3>\n<p>好吧，这稍微有点夸大，不过现在是 21 世纪，学习新东西（特别是稍微简单的东西）比以前简单多了。我所学到的（除了如何写一个简短的、自动分类的 Bash 脚本之外）是如果我有疑问，那么有很大可能性是其它人在之前也有过相同的疑问。当我困惑时，我可以问下一个问题，再下一个问题。最后，我不仅拥有了脚本，还拥有了可以一直拥有并可以简化其它任务的新技能，这是我之前所没有的。</p>\n<p>别止步于第一个脚本（或者编程的第一步）。这是一个技能，和其它的技能并无不同，有大量的信息可以在这一路上帮助你。你无需阅读大量的书或参加一个月的课程。你可以像婴儿学步那样简单地开始写脚本，然后掌握技能并建立自信。人们总有写成千上万行代码的需求，并对它进行分支、合并、修复错误。但是，通过简单的脚本或其它方式来自动化、简单化任务的需求也一样强烈。这样的一个小脚本和小小的自信就能够让你启程脚本编程之路。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111509\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111509votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111509\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "f65b12bcb444cfbc3d0109311fbdd75c", "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg"}
{"title": "不再迷惑，无值和 NULL 值", "url": "http://blog.jobbole.com/111541/", "create_date": "2017/06/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/06/aa7d9f4278af95b35311f5d41c7b9fa2-300x39.png"], "fav_count": 4, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/ljhdo/p/5128417.html\">Vic Liu</a>   </div><p>在关系型数据库的世界中，无值和NULL值的区别是什么？一直被这个问题困扰着，甚至在写TSQL脚本时，心有戚戚焉，害怕因为自己的一知半解，挖了坑，贻害后来人，于是，本着上下求索，不达通幽不罢休的决心（开个玩笑），遂有此文。</p>\n<p>学习过关系型数据库的伙伴都知道，NULL是指不确定的值，在数据库中绝对是噩梦的存在；而空值，一般对字符串类型而言，指没有任何值的字符串类型，为字符类型的变量设置为空值：set @vs=”，空值跟无值不同。有人可能会问，无值是什么？无值，是指数据表中没有任何数据。无值和不确定值，单从字面意思上来看，两者之间的定义很清楚，一旦深究，这两者之间的关系，有时令人十分迷惑（confused），这是因为，在特定条件下，无值会转换为NULL值。</p>\n<h3>一，举个栗子，理解无值和NULL值的区别</h3>\n<p>比如，创建一个临时表，在不插入任何数据时，该数据表是空的，没有任何值，对其执行select命令，将不会返回任何数据值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65e74419560361\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncreate table #temp\r\n(\r\nid int null\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e74419560361-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65e74419560361-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e74419560361-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65e74419560361-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65e74419560361-1\"><span class=\"crayon-e\">create </span><span class=\"crayon-v\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65e74419560361-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5983c05e65e74419560361-3\"><span class=\"crayon-e\">id </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65e74419560361-4\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>创建一个标量类型的变量，在不初始化时，该变量的值是不确定的，其值是NULL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65e7d278860600\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @vs int</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e7d278860600-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65e7d278860600-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">vs </span><span class=\"crayon-t\">int</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>创建一个表类型变量，在不初始化时，该表变量没有任何数据，是无值的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65e82024695750\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @vt as table\r\n(\r\nid int null\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e82024695750-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65e82024695750-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e82024695750-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65e82024695750-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65e82024695750-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">vt </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">table</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65e82024695750-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5983c05e65e82024695750-3\"><span class=\"crayon-e\">id </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65e82024695750-4\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>总结一下，声明一个标量型变量，如果没有对变量进行初始化，其值是不确定的，是NULL值；对于表变量，临时表和基础表，如果没有插入任何数据，该表没有任何数据，是无值的。</p>\n<h3>二，无值和NULL值的转换</h3>\n<p>在开始本节之前，先为变量赋值，简单的一个select命令就可以完成变量的赋值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65e86688136269\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect @vs=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e86688136269-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65e86688136269-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">vs</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>有些朋友思维比较活跃，立马会想到：“用select命令可以从表中取值为变量赋值”，对，但是，赋值方法不是我求索的重点，我关注的是从表中取值为变量赋值的结果。</p>\n<p><strong>1，从空表中为变量赋值</strong></p>\n<p>如果数据表是空表，没有任何值，那么数据库引擎不会执行赋值语句，变量保持原有值不变：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65e89948961150\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect @vs=id\r\nfrom #temp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e89948961150-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65e89948961150-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65e89948961150-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">vs</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65e89948961150-2\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>但是，如果采用以下方式，那么数据库引擎会执行赋值语句，由于空表不返回任何值，数据库引擎会把无值转换为不确定值NULL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65e8d378434998\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect @vs=(select top 1 id\r\nfrom #temp)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65e8d378434998-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65e8d378434998-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65e8d378434998-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">vs</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">select </span><span class=\"crayon-i\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65e8d378434998-2\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>诧异吗？无值和NULL值的转换，居然从不起眼的变量赋值开始。<strong>注意，当不返回任何值时，数据库引擎不确定返回值，就把无值转换为NULL值。</strong></p>\n<p><strong>2，从空表中计算聚合</strong></p>\n<p>空表是没有任何数据的表，计算聚合会产生怎样的结果？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65ea3774518940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect count(0) as count_all\r\n    ,count(id) as count_id\r\n    ,max(id) as max_id\r\n    ,min(id) as min_id\r\n    ,avg(id) as avg_id\r\n    ,sum(id) as sum_id\r\nfrom #temp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea3774518940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea3774518940-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea3774518940-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea3774518940-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea3774518940-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea3774518940-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea3774518940-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65ea3774518940-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>all</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea3774518940-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea3774518940-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea3774518940-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea3774518940-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">avg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avg</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea3774518940-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sum_id</span></div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea3774518940-7\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>当统计数据行数时，返回的是0；当计算聚合函数（max，min，avg和sum）的聚合值时，由于无值可以聚合，数据库引擎不能确定这些聚合函数的返回值，因此，数据库引擎返回NULL值。</p>\n<p style=\"text-align: center\"><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/aa7d9f4278af95b35311f5d41c7b9fa2.png\"><img class=\"alignnone size-medium wp-image-111574\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/aa7d9f4278af95b35311f5d41c7b9fa2-300x39.png\" alt=\"628084-20170620110230601-1550885802\"></a></p>\n<h3>三，聚合函数忽略NULL值</h3>\n<p>一般情况下，除了count(0)，count(*)之外，聚合函数都会忽略NULL值，而统计非NULL值，如果读者有疑问，可以查看我的博客《<a id=\"cb_post_title_url\" class=\"postTitle2\" href=\"http://www.cnblogs.com/ljhdo/p/4950586.html\">TSQL 聚合函数忽略NULL值</a>》。如果只知聚合函数忽略NULL值，而不知空表也会产生结果为NULL的聚合值，轻易得出聚合函数不会返回NULL值的定论，那就很尴尬。楼主曾遇到过一次“意外”，在一次调试脚本代码的过程中，我遇到max聚合函数返回NULL值的情况，当时一脸懵逼，直接怀疑自己之前的所学。</p>\n<p>当聚合列值都是NULL值时，由于聚合函数忽略NULL值，因此，当计算聚合函数（max，min，avg和sum）的聚合值时，由于无值可以聚合，数据库引擎不能确定这些聚合函数的返回值，因此，数据库引擎返回NULL值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5983c05e65ea8335125441\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninsert into #temp(id)\r\nvalues(null)\r\n\r\nselect count(0) as count_all\r\n    ,count(id) as count_id\r\n    ,max(id) as max_id\r\n    ,min(id) as min_id\r\n    ,avg(id) as avg_id\r\n    ,sum(id) as sum_id\r\nfrom #temp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea8335125441-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea8335125441-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea8335125441-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea8335125441-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea8335125441-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea8335125441-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea8335125441-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea8335125441-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5983c05e65ea8335125441-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5983c05e65ea8335125441-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5983c05e65ea8335125441-1\"><span class=\"crayon-e\">insert </span><span class=\"crayon-v\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp(id)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea8335125441-2\"><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea8335125441-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea8335125441-4\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>all</div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea8335125441-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea8335125441-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea8335125441-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea8335125441-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">avg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avg</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5983c05e65ea8335125441-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sum_id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5983c05e65ea8335125441-10\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>聚合函数（max,min,sum,avg和count）忽略null值，但不代表聚合函数不返回null值：如果数据表为空表，或聚合列值都是null，那么max,min,sum,avg聚合函数返回null值，而count 聚合函数返回0。聚合函数的共性：<span id=\"mt3\" class=\"sentence SentenceHover\">Null values are ignored。</span></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/67f68fb73135e2a336466ab69fe7df28.png\"><img class=\"size-medium wp-image-111576 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/67f68fb73135e2a336466ab69fe7df28-300x37.png\" alt=\"628084-20170620112538616-1090159798\"></a></p>\n<p>不再迷惑：<strong>当不返回任何值时，数据库引擎不确定返回值，就把无值转换为NULL值。</strong></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111541\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111541votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111541\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "IT技术", "url_object_id": "ef6c307e280a8e27315c464cf98bb302", "front_image_path": "full/233e3fbaa3d4c54374b5477ad13750ab622a9d4c.jpg"}
{"title": "我眼中的项目经理", "url": "http://blog.jobbole.com/111535/", "create_date": "2017/06/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/08/25e260d52cd3cc8e5ae1638dd3ab4271.jpg"], "fav_count": 5, "comment_count": 2, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/ljhdo/p/5068072.html\">Vic Liu</a>   </div><div>\n<h3>把想法变成项目，服务于业务</h3>\n<p>在项目组待的时间久了，渐渐地跟微软的项目经理Michael熟悉起来了，跟他有过很多次深入的聊天，向他请教过很多关于人生，理想，技术上的问题，不得不说，项目经理是我神往的角色。虽然我没有亲身经历过，但是我认为做项目经理很有意思，把一个想法变成项目，服务于业务，这是我期望的工作。 佛者说：“一花一世界，一叶一菩提”，不得不说，修行是一个技术活，面对同一个世界，眼界的不同，能够看到的事物也是不同的；同样一句话，阅历不同，理解也会不同。那我就说说我眼中的项目经理，与常人不同的是，他们总是更进一步，想的更多，做的更多。</p>\n<p>在每天的Daily Scrum会议上，Michael照例追踪分配给每个人的Task的完成情况，并分配新的Task。这种一成不变的例行汇报，听的多了，就有点习以为常了，左耳朵进，右耳朵出，当然，起码得“留一点痕迹”，至少得知道自己新的Task。在项目不是很复杂的时候，即使做不同样的事情，也大概知道彼此做事的内容。可是有一次，在同事小林汇报工作时，即使我集中十二分的注意力，也听不懂小林说话的内容，但是，Michael却能瞬间找到关键点，那一刻，我才知道什么叫“默契”，我能感受到小林的开心，因为有人很懂她。</p>\n<p>我请教过这个问题，Michael说：“这是由于‘信息不对称’导致的，因为我负责整个项目的进度和业务，跟所有的开发工程师（Developer）都有交集，交流比较多，知道他们在做什么，能听懂他们说的话，这很正常，不用诧异。”我觉得信息不对称，固然是一个重要的原因，但是，不是最主要的。我曾经在汇报工作时，对于数据库中出现的一个问题，提出了一个解决方案，由于这个想法是临时想出来的，我在描述解决方案时，没有组织好语言，说的磕磕绊绊，我认为我没有说清除，但是，Michael却出乎我意料之外的理解了，并把我的不成熟的想法完善了，当时，我意识到，有人懂我，是多么的开心，也理解了同事小林当时喜悦的心情。这是信息不对称，善于沟通所不能解释的，我认为，熟悉业务，善于思考，对项目经理来说，才是最重要的特质。</p>\n<h3>换位思考</h3>\n<p>还有一件事，由于同事小陈离职了，我开始接手PowerBI报表，在跟业务分析小组的同事共事时，我发现他们身上有一个显著的个性，就是：<strong>站在老板的立场上思考问题，组织语言和汇报工作。</strong>在我第一次无意识地向老板直接汇报工作时，我犯了很多技术出身的开发人员经常忽视的错误，那就是不自觉地在报告中掺杂了太多的开发术语，没有意识到，我面对的客户是一位不懂技术，但深谙业务的老板。沈姐是业务分析小组实际上的Leader，她跟我说：“你不能那样向老板回邮件，老板不懂技术，只懂业务，你要翻译成他们能够理解的内容，他们才知道，你已经把问题解决了，不然，他们又会发邮件问你。”</p>\n<p>有了沈姐的开导，我开始意识到，在工作上，必须具有换位思考的意识：站在老板的角度上来看待问题，但意识到，不代表你就能做到，这是一个技术活。当老板再次发送邮件，提出新的业务需求时，我又犯错了，这次的错误，是由于信息不对称导致的，也跟我缺少历练有关。老板在邮件中，说到：“请提供报表数据，用于分析组织者（Organizer）每个月在活动中的贡献（Contribution）。”由于在业务逻辑中，组织者（Organizer）是管理者角色的一种，除了Organizer，还有Co-Organizer，Event-Organizer，Assistant-Organizer等管理者角色，我提供的报表数据仅仅是Organizer角色每个月的贡献。Michael在Review代码时，认真对我说：“Vic，老板不知道我们具体的角色分类，老板想知道的，其实是所有组织者在每个月的贡献，要站在老板的角度上，处理问题。给老板的报表，每一个数据上的细节都必须做到有理有据，即使数据对不上，不align，也必须要有合理的解释。”这次教训非常深刻，我意识到，老板是特殊的存在，必须理解老板的意思，同时，也必须把自己的意思传达给老板，这中间需要由一个词汇的转换，怎样做到？站在老板的角度上，思考问题，处理问题，刚开始做的不好，不要紧，必须要有这个意识（Sense）和觉悟。</p>\n<h3>项目经理是整个项目组的大脑</h3>\n<p>这样说一点也不为过，至少在我们项目组是这样的，其他成员具备的是执行力，也就是按时完成任务的能力。这里抛出一个问题：给你一个团队，你要如何带？在两年多的时间里，Michael带领我们团队做过很多新的项目，而每个新的项目都不是凭空想出来的。之所以这么说，是因为，我也曾经有过相同的想法，但是，我没有意识到这个想法的价值，在脑海中思考过之后，没有把想法“变现”的意识，导致轻易把想法抛弃；一旦Michael提出类似的新项目之后，我发觉：“我曾经也有过这个想法，只不过，我没有继续深入下去，没有更进一步去丰富这个想法 ……”</p>\n<p>反省不能解决问题，或许，这才是项目经理应该具备的优秀性格：不是想不到，而是善于发现想法的价值。Michael把抽象的想法，变成文档上的设想，经过丰富之后，变成有价值的具体项目，这就是创建价值，简化业务的过程。Michael说：“我想实现的新项目，实际上就是为了优化业务流程，做到化繁为简，而为了实现这个目的，必须化简为繁。比如，为了便于发现更多有影响力的人物（Influencer），必须整合所有的数据资源，从各个数据源中分析数据，这是我们的主要业务需求，为了简化这个流程，可以把这套业务流程扩大化，自动化，做一个更为复杂的引擎来替代手工，一旦这个繁的引擎做出来，业务流程就会变的非常简单。”抓住主要业务搞优化，实现项目的增值和技术的迭代，这其实也是他的一种管理思想，极简工作：先解决主要矛盾，再解决次要矛盾，根据业务需求，调整优先级。</p>\n<h3>项目经理很忙的</h3>\n<p>实际上，我观察到Michael的工作，1/3是在开会。不仅跟开发者开会，而且跟老板开会。我们的老板是外国人，Michael的英语相当不错，上海人，软实力杠杠滴，从小到大接受的教育，是我们这些屌丝所不能想象的。跟老板开会的内容，大致是谈论业务需求，演示新的项目，Michael说：“老板是非常聪明的，非常熟悉业务，对于新的项目，老板只要看到demo，自然会想到如何使用，不需要过多的文字说明”，好吧，高级别的老板，我也没有接触过，能坐到那个位置上，肯定有过人之处。跟开发者开会，Michael主要是演示项目，把控项目的进度和分配任务。</p>\n<p>Michael在任务的管控上，没有绝对的收和放，而是：前期放任，定时检查，最后是测试和验收。不过，他的管理风格还是比较自由的，他说：“我分配一个任务交给你们来做，你们想怎么做，就怎么做，只要实现业务需求就行。我的任务不是告诉你们如何去做，而是，告诉你们怎么做最简单，哪些是当前的业务上能够满足的，哪些是当前不需要做的。”</p>\n<h3>项目经理很忙的</h3>\n<p>但是，Michael能够记住很多非常细节的业务逻辑，不得不佩服他得记忆力，是不是项目经理的记忆力都很好？Michael说：“首先，这些关键的业务逻辑是我设置的，我当然记得比较牢，其次，我能记住的，实际上是关键的业务逻辑，经常遇到，那些特殊的设置，我也是需要阅读代码才知道。”我觉得，跟普通的开发工程师不同，项目经理更擅长处理业务上的问题。身价一万和身价十万的差距，没有想象中那么大，通过努力，日积月累，我也能做项目经理。阿Q一下，梦想还是要有的，万一实现了。</p>\n<h3>关于加薪</h3>\n<p>这是一个非常具有挑战性的问题，除非你在项目组中是不可替代的，否则，你就只能拿着offer，或者跳槽来提升身价，但是，那些项目经理是如何从普通的开发工程师，一步步被提拔上去的呢？运营经理范老板给出一份答案：创造额外的价值，注意，是额外的价值，而不仅仅是本职工作。在公司的动员大会上，有一句很流行的话：要想成为项目经理，必须先干项目经理的活。当然这些话都出自高层之口，尽管，事实上，大多数Leader都是空降的，仍然会有人心灵淹死在鸡汤中。很多开发工程师，包括我，天真地认为，只要做好本职工作，提升技术实力，就能获得公司的认可和嘉奖，获得升职和加薪的机会，就像运营经理说的那样，“这是技术人员的一条路线，稳定而平缓，但是，如果想快速提升，走一条陡峭的上升路线，必须创造额外的价值，当你为公司创造额外价值的时候，公司也会给你提供更好的发展空间。”其实，道理都是相通的，打铁还需自身硬，公司不会给你机会试炼，而会给你空间发挥，前提是你必须比身边的人优秀，才有能力抓住机会。</p>\n<p>这一个个小故事，都是真实的，给我很多启发，在人生的道路上，能够聆听到成功者的教诲，是最难能可贵的，谢谢！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111535\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111535votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111535\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "2139dbe97ca8c52f95ad3657fd02203b", "front_image_path": "full/1ded311d6e5e90e971d375817a4f5efb8e7096f1.jpg"}
{"title": "编程、出书、赛车……DHH 是如何兼顾这一切的？", "url": "http://blog.jobbole.com/111888/", "create_date": "2017/07/19", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fhns9sfhyuj20rs0fu75o.jpg"], "fav_count": 5, "comment_count": 1, "article_content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://m.signalvnoise.com/manufacturing-quality-time-fe043fa7b7a1#.7w18xpuzd\">DHH</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：《<a href=\"http://blog.jobbole.com/111892/\" target=\"_blank\">代码写的好，出过畅销书，还拿过赛车冠军，这是一种什么体验？</a>》这篇文章中已经介绍了 DHH。他既是 Ruby On Rails 之父，BaseCamp 的 CTO，又是一个家庭主男，业余还会参加赛车比赛，还爱好摄影，那他是如何兼顾着这一切的呢？</p>\n<p>的确也经常有人问他这个问题。不了解他的人，觉得他一定有些秘密或窍门。每晚只睡 5 小时？还是持续几个月每天工作 12 小时？还是其他什么的。</p>\n<p>2015 年 12 月 30 日，DHH 专门写了一篇文章，分享了他的答案。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhns9sfhyuj20rs0fu75o.jpg\" width=\"600\" height=\"342\"></p>\n<p style=\"text-align: left;\">“高效能人群”的共同点仅仅是他们更加努力地工作，通常像超人似的。对单一事物的关注/专注，是驱使他们工作到晚上 11 点的动力。而媒体喜欢报道他们这样那样的非凡毅力和决心。</p>\n<p>但我不吃这一套，我通常每晚的睡眠时间是 8.5 至 9 小时，并每周 40 小时。我不想在工作上花更多的时间。</p>\n<p><span style=\"color: #ff0000;\"><strong>如果一定要我说有什么技巧，那就是我追求每个小时的质量</strong></span>。不过这不代表着「<strong>时间管理</strong>」，该词出现于上世纪 90 年代，意思是将每个小时切分到最后一分钟，以压榨提高每秒的生产力峰值。但时间管理确实说明了一件事：<strong>每个小时的价值不尽相同</strong>。</p>\n<p>如果一小时充满了压力、中断、缺觉或者疲惫，在这种状态下工作，你对不起这一小时中的每一分钟。因为它是低质量的一小时。如果妄想通过这样低质时间能够做出好东西，明显非常愚蠢。因为你最终也只能「<strong>垃圾进来，垃圾出去</strong>」。</p>\n<p><strong>每周工作 40 小时，是一个王者的固守。</strong>在这样的前提下，我认为几乎可以完成所有的东西。当然了，前提是你没有把时间浪费在会议、一心多用或定义不清的问题上。这些都是吞噬时间的黑洞，深不见底。</p>\n<p>好吧，即便没有黑洞，但也有物理极限的（ 1 天只有 24 小时），我相信很多人都觉得自己是时间的穷人！如果花了时间但一事无成，你不能怪我，而我也不怪自己。<span style=\"color: #000000;\">怜悯是我们仅剩的借口了。</span></p>\n<p>自我保护或让别人帮你，也许能给你带来暂时的舒适，但从长久来看，它掩盖不了缺乏理想的窘境。面对失败，放弃是一种应对的机制。</p>\n<p>你需要的是一套精细的技术，需要积极努力地提高时间的纯度和质量。以下是我使用的几个小窍门：</p>\n<h3>1、我真的需要参与其中吗？</h3>\n<p>贪婪的好奇心会让你无休止地卷入各种讨论、决定和事件中，尽管是否有你，那些事可能区别都不大。</p>\n<p>你提出的想法或经验，“可能”对他人有用，但你也同样剥夺了他人自由思考的权利，这点可能让你难以接受。</p>\n<p>目前看来，略读邮件、拒绝会议邀请、不要在聊天中发表你的看法，这些举措可能还挺深奥的。但通过努力克制自己、避免插嘴和介入合作，能够让你集中时间花在少量的事上，以取得更重要的进展。</p>\n<h3>2、这个/这事还能等等吗？</h3>\n<p>有些问题需要今天处理掉，否则就是明天的麻烦。你最好马上处理掉那些问题，虽然它们通常只占少数。大多数的问题和机会值得从现在起，花上一天、一周甚至一月的时间来处理。</p>\n<p>将手上的事先搁置一边，可能等你回头再看的时候，它就不是事儿了。是不是很棒？！这些是不需要立刻做的工作，或者只是一开始认为非常重要，实则不然。</p>\n<p>花在解决问题上的时间越长，你会对这个问题有着更深入的了解。随着空闲时间的投入，解决问题的痛苦将大大减少。</p>\n<h3>3、我能放弃吗？</h3>\n<p>浪费了高质量时间的代价，往往最终浪费了一天的时间。而错误估计了问题的深度，也是工作和生活中的一个常见过失。</p>\n<p>当意识到现在的问题比当初预期的更难，却不承认解决问题需要花费比原计划更多的时间，结果通常是越陷越深，从而浪费更多的时间。</p>\n<p>学会放弃是一项关键的技能，能够让你专注于剩下的时间。只有失败者才会在<strong>沉没成本</strong>上下赌注。</p>\n<blockquote><p>伯乐在线补充：<strong>沉没成本</strong>是指由于过去的决策已经发生了的，而不能由现在或将来的任何决策改变的成本。人们在决定是否去做一件事情的时候，不仅是看这件事对自己有没有好处，而且也看过去是不是已经在这件事情上有过投入。我们把这些已经发生不可收回的支出，如时间、金钱、精力等称为“沉没成本”（Sunk Cost）。在经济学和商业决策制定过程中会用到“沉没成本”的概念，代指已经付出且不可收回的成本。沉没成本常用来和可变成本作比较，可变成本可以被改变，而沉没成本则不能被改变。</p></blockquote>\n<h3>4、我准备好了吗？</h3>\n<p>有时，问题需要更多的时间来发酵，你也需要更多的时间来成长。你我都做不到能够同时解决所有的问题。</p>\n<p>如果我本周适合写作，那完成新网站的拷贝工作会是一个好选择，但安排下个季度的工作情况则不是一个好的时机。如果我本周手指发痒想写代码，那正好可以尝试解决那个困扰了我一个月的 bug，但是却不适合做一对一面试。</p>\n<p>我们的情绪会如潮水般上下起伏，在激情和消沉之间摇摆不定。顺势而为要比逆势前行轻松得多。就像上文的例子一样，大多数事情都可以推延到合适的情绪下再做。</p>\n<p>即使你掌握了强大的技巧，让每一个小时都更有价值，失败仍然不可避免。原因也许只是本周所有要做的工作并不能激起你的激情。一旦激情消失，你会倍感失落。</p>\n<p>知道真相或许会给你巨大的心理安慰：每个人都会经历低潮，尽管大部分人都不承认这一点。即使有着经过打磨的高品质时间，我仍然经常生产出垃圾，比我预期得还要多。就是这么回事儿！</p>\n<p>长久来看，关键在于你要不断提高时间的质量，即使没有得到一个好的结果，也不要给自己过多的压力。</p>\n<p>一旦你建立了对高质量时间的正确认识和积极态度，我相信你就不会一味地追求更多的时间。高质量的四个连续小时和几天的垃圾（低质量）时间完全不可同日而语，两者相差悬殊。</p>\n<p>即便你对时间进行压缩以获取更多的时间，你可能也就多了 20% 到 50% 的时间；但对拥有的时间进行规划和打磨，你可能会得到 200% 到 500% 的额外价值。<span style=\"color: #ff0000;\"><strong>这才是真正的 10 倍效率！</strong></span></p>\n<p><strong>兼顾一切的窍门是停止兼顾。</strong></p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111888\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111888votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111888\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 29</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "category_tag": "职场", "url_object_id": "32fb6fb546aac0808415e5f45c8f324a", "front_image_path": "full/5d6df9368785d41523d2ae0a30beadd79fb92b3a.jpg"}
